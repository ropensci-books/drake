<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>The User Manual of the drake R Package</title>
  <meta name="description" content="The User Manual of the drake R Package">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="The User Manual of the drake R Package" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="The User Manual of the drake R Package" />
  
  
  

<meta name="author" content="Will Landau">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="hpc.html">
<link rel="next" href="store.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.2/htmlwidgets.js"></script>
<link href="libs/vis-4.20.1/vis.css" rel="stylesheet" />
<script src="libs/vis-4.20.1/vis.min.js"></script>
<script src="libs/visNetwork-binding-2.0.4/visNetwork.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#the-drake-r-package"><i class="fa fa-check"></i><b>1.1</b> The drake R package</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#installation"><i class="fa fa-check"></i><b>1.2</b> Installation</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#why-drake"><i class="fa fa-check"></i><b>1.3</b> Why drake?</a><ul>
<li class="chapter" data-level="1.3.1" data-path="index.html"><a href="index.html#what-gets-done-stays-done."><i class="fa fa-check"></i><b>1.3.1</b> What gets done stays done.</a></li>
<li class="chapter" data-level="1.3.2" data-path="index.html"><a href="index.html#reproducibility-with-confidence"><i class="fa fa-check"></i><b>1.3.2</b> Reproducibility with confidence</a></li>
<li class="chapter" data-level="1.3.3" data-path="index.html"><a href="index.html#aggressively-scale-up."><i class="fa fa-check"></i><b>1.3.3</b> Aggressively scale up.</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#documentation"><i class="fa fa-check"></i><b>1.4</b> Documentation</a><ul>
<li class="chapter" data-level="1.4.1" data-path="index.html"><a href="index.html#cheat-sheet"><i class="fa fa-check"></i><b>1.4.1</b> Cheat sheet</a></li>
<li class="chapter" data-level="1.4.2" data-path="index.html"><a href="index.html#frequently-asked-questions"><i class="fa fa-check"></i><b>1.4.2</b> Frequently asked questions</a></li>
<li class="chapter" data-level="1.4.3" data-path="index.html"><a href="index.html#function-reference"><i class="fa fa-check"></i><b>1.4.3</b> Function reference</a></li>
<li class="chapter" data-level="1.4.4" data-path="index.html"><a href="index.html#tutorials"><i class="fa fa-check"></i><b>1.4.4</b> Tutorials</a></li>
<li class="chapter" data-level="1.4.5" data-path="index.html"><a href="index.html#examples"><i class="fa fa-check"></i><b>1.4.5</b> Examples</a></li>
<li class="chapter" data-level="1.4.6" data-path="index.html"><a href="index.html#presentations"><i class="fa fa-check"></i><b>1.4.6</b> Presentations</a></li>
<li class="chapter" data-level="1.4.7" data-path="index.html"><a href="index.html#real-example-projects"><i class="fa fa-check"></i><b>1.4.7</b> Real example projects</a></li>
<li class="chapter" data-level="1.4.8" data-path="index.html"><a href="index.html#context-and-history"><i class="fa fa-check"></i><b>1.4.8</b> Context and history</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#help-and-troubleshooting"><i class="fa fa-check"></i><b>1.5</b> Help and troubleshooting</a></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#similar-work"><i class="fa fa-check"></i><b>1.6</b> Similar work</a><ul>
<li class="chapter" data-level="1.6.1" data-path="index.html"><a href="index.html#gnu-make"><i class="fa fa-check"></i><b>1.6.1</b> GNU Make</a></li>
<li class="chapter" data-level="1.6.2" data-path="index.html"><a href="index.html#remake"><i class="fa fa-check"></i><b>1.6.2</b> Remake</a></li>
<li class="chapter" data-level="1.6.3" data-path="index.html"><a href="index.html#memoise"><i class="fa fa-check"></i><b>1.6.3</b> Memoise</a></li>
<li class="chapter" data-level="1.6.4" data-path="index.html"><a href="index.html#knitr-and-r-markdown"><i class="fa fa-check"></i><b>1.6.4</b> Knitr and R Markdown</a></li>
<li class="chapter" data-level="1.6.5" data-path="index.html"><a href="index.html#factuals-drake"><i class="fa fa-check"></i><b>1.6.5</b> Factual’s Drake</a></li>
<li class="chapter" data-level="1.6.6" data-path="index.html"><a href="index.html#other-pipeline-toolkits"><i class="fa fa-check"></i><b>1.6.6</b> Other pipeline toolkits</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i><b>1.7</b> Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="example-main.html"><a href="example-main.html"><i class="fa fa-check"></i><b>2</b> Introduction</a><ul>
<li class="chapter" data-level="2.1" data-path="example-main.html"><a href="example-main.html#set-the-stage."><i class="fa fa-check"></i><b>2.1</b> Set the stage.</a></li>
<li class="chapter" data-level="2.2" data-path="example-main.html"><a href="example-main.html#make-your-results."><i class="fa fa-check"></i><b>2.2</b> Make your results.</a></li>
<li class="chapter" data-level="2.3" data-path="example-main.html"><a href="example-main.html#go-back-and-fix-things."><i class="fa fa-check"></i><b>2.3</b> Go back and fix things.</a></li>
<li class="chapter" data-level="2.4" data-path="example-main.html"><a href="example-main.html#try-it-yourself"><i class="fa fa-check"></i><b>2.4</b> Try it yourself!</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="example-packages.html"><a href="example-packages.html"><i class="fa fa-check"></i><b>3</b> Example: R package download trends</a><ul>
<li class="chapter" data-level="3.1" data-path="example-packages.html"><a href="example-packages.html#get-the-code."><i class="fa fa-check"></i><b>3.1</b> Get the code.</a></li>
<li class="chapter" data-level="3.2" data-path="example-packages.html"><a href="example-packages.html#overview"><i class="fa fa-check"></i><b>3.2</b> Overview</a></li>
<li class="chapter" data-level="3.3" data-path="example-packages.html"><a href="example-packages.html#analysis"><i class="fa fa-check"></i><b>3.3</b> Analysis</a></li>
<li class="chapter" data-level="3.4" data-path="example-packages.html"><a href="example-packages.html#what-remote-data-sources-in-general"><i class="fa fa-check"></i><b>3.4</b> What remote data sources in general?</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="example-gsp.html"><a href="example-gsp.html"><i class="fa fa-check"></i><b>4</b> Example: gross state products</a><ul>
<li class="chapter" data-level="4.1" data-path="example-gsp.html"><a href="example-gsp.html#get-the-code.-1"><i class="fa fa-check"></i><b>4.1</b> Get the code.</a></li>
<li class="chapter" data-level="4.2" data-path="example-gsp.html"><a href="example-gsp.html#objective-and-methods"><i class="fa fa-check"></i><b>4.2</b> Objective and methods</a></li>
<li class="chapter" data-level="4.3" data-path="example-gsp.html"><a href="example-gsp.html#data"><i class="fa fa-check"></i><b>4.3</b> Data</a></li>
<li class="chapter" data-level="4.4" data-path="example-gsp.html"><a href="example-gsp.html#analysis-1"><i class="fa fa-check"></i><b>4.4</b> Analysis</a></li>
<li class="chapter" data-level="4.5" data-path="example-gsp.html"><a href="example-gsp.html#results"><i class="fa fa-check"></i><b>4.5</b> Results</a></li>
<li class="chapter" data-level="4.6" data-path="example-gsp.html"><a href="example-gsp.html#comparison-with-gnu-make"><i class="fa fa-check"></i><b>4.6</b> Comparison with GNU Make</a></li>
<li class="chapter" data-level="4.7" data-path="example-gsp.html"><a href="example-gsp.html#references"><i class="fa fa-check"></i><b>4.7</b> References</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="mtcars.html"><a href="mtcars.html"><i class="fa fa-check"></i><b>5</b> The mtcars example and workflow plan generation</a><ul>
<li class="chapter" data-level="5.1" data-path="mtcars.html"><a href="mtcars.html#get-the-code.-2"><i class="fa fa-check"></i><b>5.1</b> Get the code.</a></li>
<li class="chapter" data-level="5.2" data-path="mtcars.html"><a href="mtcars.html#quick-examples"><i class="fa fa-check"></i><b>5.2</b> Quick examples</a></li>
<li class="chapter" data-level="5.3" data-path="mtcars.html"><a href="mtcars.html#the-motivation-of-the-mtcars-example"><i class="fa fa-check"></i><b>5.3</b> The motivation of the mtcars example</a></li>
<li class="chapter" data-level="5.4" data-path="mtcars.html"><a href="mtcars.html#set-up-the-mtcars-example"><i class="fa fa-check"></i><b>5.4</b> Set up the mtcars example</a></li>
<li class="chapter" data-level="5.5" data-path="mtcars.html"><a href="mtcars.html#the-workflow-plan-data-frame"><i class="fa fa-check"></i><b>5.5</b> The workflow plan data frame</a></li>
<li class="chapter" data-level="5.6" data-path="mtcars.html"><a href="mtcars.html#generate-the-workflow-plan"><i class="fa fa-check"></i><b>5.6</b> Generate the workflow plan</a></li>
<li class="chapter" data-level="5.7" data-path="mtcars.html"><a href="mtcars.html#flexible-workflow-plan-generation"><i class="fa fa-check"></i><b>5.7</b> Flexible workflow plan generation</a></li>
<li class="chapter" data-level="5.8" data-path="mtcars.html"><a href="mtcars.html#run-the-workflow"><i class="fa fa-check"></i><b>5.8</b> Run the workflow</a></li>
<li class="chapter" data-level="5.9" data-path="mtcars.html"><a href="mtcars.html#automatic-watching-for-changed-dependencies"><i class="fa fa-check"></i><b>5.9</b> Automatic watching for changed dependencies</a></li>
<li class="chapter" data-level="5.10" data-path="mtcars.html"><a href="mtcars.html#a-note-on-tidy-evaluation"><i class="fa fa-check"></i><b>5.10</b> A note on tidy evaluation</a></li>
<li class="chapter" data-level="5.11" data-path="mtcars.html"><a href="mtcars.html#need-more-speed"><i class="fa fa-check"></i><b>5.11</b> Need more speed?</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="best-practices.html"><a href="best-practices.html"><i class="fa fa-check"></i><b>6</b> General best practices for drake projects</a><ul>
<li class="chapter" data-level="6.1" data-path="best-practices.html"><a href="best-practices.html#how-to-organize-your-files"><i class="fa fa-check"></i><b>6.1</b> How to organize your files</a><ul>
<li class="chapter" data-level="6.1.1" data-path="best-practices.html"><a href="best-practices.html#examples-1"><i class="fa fa-check"></i><b>6.1.1</b> Examples</a></li>
<li class="chapter" data-level="6.1.2" data-path="best-practices.html"><a href="best-practices.html#where-do-you-put-your-code"><i class="fa fa-check"></i><b>6.1.2</b> Where do you put your code?</a></li>
<li class="chapter" data-level="6.1.3" data-path="best-practices.html"><a href="best-practices.html#remember-your-commands-are-code-chunks-not-r-scripts"><i class="fa fa-check"></i><b>6.1.3</b> Remember: your commands are code chunks, not R scripts</a></li>
<li class="chapter" data-level="6.1.4" data-path="best-practices.html"><a href="best-practices.html#file-output-targets"><i class="fa fa-check"></i><b>6.1.4</b> File output targets</a></li>
<li class="chapter" data-level="6.1.5" data-path="best-practices.html"><a href="best-practices.html#r-markdown-and-knitr-reports"><i class="fa fa-check"></i><b>6.1.5</b> R Markdown and knitr reports</a></li>
<li class="chapter" data-level="6.1.6" data-path="best-practices.html"><a href="best-practices.html#workflows-as-r-packages"><i class="fa fa-check"></i><b>6.1.6</b> Workflows as R packages</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="best-practices.html"><a href="best-practices.html#generating-workflow-plan-data-frames"><i class="fa fa-check"></i><b>6.2</b> Generating workflow plan data frames</a></li>
<li class="chapter" data-level="6.3" data-path="best-practices.html"><a href="best-practices.html#remote-data-sources"><i class="fa fa-check"></i><b>6.3</b> Remote data sources</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="debug.html"><a href="debug.html"><i class="fa fa-check"></i><b>7</b> Debugging and testing drake projects</a><ul>
<li class="chapter" data-level="7.1" data-path="debug.html"><a href="debug.html#the-configuration-list"><i class="fa fa-check"></i><b>7.1</b> The configuration list</a></li>
<li class="chapter" data-level="7.2" data-path="debug.html"><a href="debug.html#plan-your-work."><i class="fa fa-check"></i><b>7.2</b> Plan your work.</a><ul>
<li class="chapter" data-level="7.2.1" data-path="debug.html"><a href="debug.html#workflow-plan-data-frames"><i class="fa fa-check"></i><b>7.2.1</b> Workflow plan data frames</a></li>
<li class="chapter" data-level="7.2.2" data-path="debug.html"><a href="debug.html#visualize-your-workflow."><i class="fa fa-check"></i><b>7.2.2</b> Visualize your workflow.</a></li>
<li class="chapter" data-level="7.2.3" data-path="debug.html"><a href="debug.html#check-dependency-relationships."><i class="fa fa-check"></i><b>7.2.3</b> Check dependency relationships.</a></li>
<li class="chapter" data-level="7.2.4" data-path="debug.html"><a href="debug.html#outdated-up-to-date-and-missing-items"><i class="fa fa-check"></i><b>7.2.4</b> Outdated, up to date, and missing items</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="debug.html"><a href="debug.html#test-with-triggers."><i class="fa fa-check"></i><b>7.3</b> Test with triggers.</a></li>
<li class="chapter" data-level="7.4" data-path="debug.html"><a href="debug.html#skipping-imports"><i class="fa fa-check"></i><b>7.4</b> Skipping imports</a></li>
<li class="chapter" data-level="7.5" data-path="debug.html"><a href="debug.html#impose-timeouts-and-retries"><i class="fa fa-check"></i><b>7.5</b> Impose timeouts and retries</a></li>
<li class="chapter" data-level="7.6" data-path="debug.html"><a href="debug.html#diagnose-failures."><i class="fa fa-check"></i><b>7.6</b> Diagnose failures.</a><ul>
<li class="chapter" data-level="7.6.1" data-path="debug.html"><a href="debug.html#tidy-evaluation-a-caveat-to-diagnosing-interactively"><i class="fa fa-check"></i><b>7.6.1</b> Tidy evaluation: a caveat to diagnosing interactively</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="debug.html"><a href="debug.html#debrief-a-build-session."><i class="fa fa-check"></i><b>7.7</b> Debrief a build session.</a></li>
<li class="chapter" data-level="7.8" data-path="debug.html"><a href="debug.html#start-tinkering."><i class="fa fa-check"></i><b>7.8</b> Start tinkering.</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="vis.html"><a href="vis.html"><i class="fa fa-check"></i><b>8</b> Visualization with drake</a><ul>
<li class="chapter" data-level="8.1" data-path="vis.html"><a href="vis.html#dependency-reactivity"><i class="fa fa-check"></i><b>8.1</b> Dependency reactivity</a></li>
<li class="chapter" data-level="8.2" data-path="vis.html"><a href="vis.html#subgraphs"><i class="fa fa-check"></i><b>8.2</b> Subgraphs</a></li>
<li class="chapter" data-level="8.3" data-path="vis.html"><a href="vis.html#control-the-legend."><i class="fa fa-check"></i><b>8.3</b> Control the legend.</a></li>
<li class="chapter" data-level="8.4" data-path="vis.html"><a href="vis.html#more-flexibility"><i class="fa fa-check"></i><b>8.4</b> More flexibility</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="hpc.html"><a href="hpc.html"><i class="fa fa-check"></i><b>9</b> High-performance computing with drake</a><ul>
<li class="chapter" data-level="9.1" data-path="hpc.html"><a href="hpc.html#batch-mode-for-long-workflows"><i class="fa fa-check"></i><b>9.1</b> Batch mode for long workflows</a></li>
<li class="chapter" data-level="9.2" data-path="hpc.html"><a href="hpc.html#let-drake-schedule-your-targets."><i class="fa fa-check"></i><b>9.2</b> Let drake schedule your targets.</a></li>
<li class="chapter" data-level="9.3" data-path="hpc.html"><a href="hpc.html#parallel-backends"><i class="fa fa-check"></i><b>9.3</b> Parallel backends</a></li>
<li class="chapter" data-level="9.4" data-path="hpc.html"><a href="hpc.html#local-workers"><i class="fa fa-check"></i><b>9.4</b> Local workers</a></li>
<li class="chapter" data-level="9.5" data-path="hpc.html"><a href="hpc.html#remote-workers"><i class="fa fa-check"></i><b>9.5</b> Remote workers</a><ul>
<li class="chapter" data-level="9.5.1" data-path="hpc.html"><a href="hpc.html#future-and-future_lapply"><i class="fa fa-check"></i><b>9.5.1</b> <code>&quot;future&quot;</code> and <code>&quot;future_lapply&quot;</code></a></li>
<li class="chapter" data-level="9.5.2" data-path="hpc.html"><a href="hpc.html#makefile"><i class="fa fa-check"></i><b>9.5.2</b> <code>&quot;Makefile&quot;</code></a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="hpc.html"><a href="hpc.html#scheduling-algorithms"><i class="fa fa-check"></i><b>9.6</b> Scheduling algorithms</a><ul>
<li class="chapter" data-level="9.6.1" data-path="hpc.html"><a href="hpc.html#persistent-scheduling"><i class="fa fa-check"></i><b>9.6.1</b> Persistent scheduling</a></li>
<li class="chapter" data-level="9.6.2" data-path="hpc.html"><a href="hpc.html#transient-scheduling"><i class="fa fa-check"></i><b>9.6.2</b> Transient scheduling</a></li>
<li class="chapter" data-level="9.6.3" data-path="hpc.html"><a href="hpc.html#staged-scheduling"><i class="fa fa-check"></i><b>9.6.3</b> Staged scheduling</a></li>
</ul></li>
<li class="chapter" data-level="9.7" data-path="hpc.html"><a href="hpc.html#final-thoughts"><i class="fa fa-check"></i><b>9.7</b> Final thoughts</a><ul>
<li class="chapter" data-level="9.7.1" data-path="hpc.html"><a href="hpc.html#debugging"><i class="fa fa-check"></i><b>9.7.1</b> Debugging</a></li>
<li class="chapter" data-level="9.7.2" data-path="hpc.html"><a href="hpc.html#drake-as-an-ordinary-job-scheduler"><i class="fa fa-check"></i><b>9.7.2</b> Drake as an ordinary job scheduler</a></li>
<li class="chapter" data-level="9.7.3" data-path="hpc.html"><a href="hpc.html#more-resources"><i class="fa fa-check"></i><b>9.7.3</b> More resources</a></li>
</ul></li>
<li class="chapter" data-level="9.8" data-path="hpc.html"><a href="hpc.html#footnotes"><i class="fa fa-check"></i><b>9.8</b> Footnotes</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="time.html"><a href="time.html"><i class="fa fa-check"></i><b>10</b> Time: logging, prediction, and strategy</a><ul>
<li class="chapter" data-level="10.1" data-path="time.html"><a href="time.html#predict-total-runtime"><i class="fa fa-check"></i><b>10.1</b> Predict total runtime</a></li>
<li class="chapter" data-level="10.2" data-path="time.html"><a href="time.html#strategize-your-high-performance-computing"><i class="fa fa-check"></i><b>10.2</b> Strategize your high-performance computing</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="store.html"><a href="store.html"><i class="fa fa-check"></i><b>11</b> Storage</a><ul>
<li class="chapter" data-level="11.1" data-path="store.html"><a href="store.html#caches"><i class="fa fa-check"></i><b>11.1</b> Caches</a></li>
<li class="chapter" data-level="11.2" data-path="store.html"><a href="store.html#hash-algorithms"><i class="fa fa-check"></i><b>11.2</b> Hash algorithms</a></li>
<li class="chapter" data-level="11.3" data-path="store.html"><a href="store.html#which-hash-algorithm-should-you-choose"><i class="fa fa-check"></i><b>11.3</b> Which hash algorithm should you choose?</a></li>
<li class="chapter" data-level="11.4" data-path="store.html"><a href="store.html#select-the-hash-algorithms-of-the-cache"><i class="fa fa-check"></i><b>11.4</b> Select the hash algorithms of the cache</a></li>
<li class="chapter" data-level="11.5" data-path="store.html"><a href="store.html#using-storr-directly"><i class="fa fa-check"></i><b>11.5</b> Using <code>storr</code> directly</a></li>
<li class="chapter" data-level="11.6" data-path="store.html"><a href="store.html#cleaning-up"><i class="fa fa-check"></i><b>11.6</b> Cleaning up</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="caution.html"><a href="caution.html"><i class="fa fa-check"></i><b>12</b> Cautionary notes</a><ul>
<li class="chapter" data-level="12.1" data-path="caution.html"><a href="caution.html#projects-built-with-drake-4.4.0-are-not-back-compatible-with-drake-4.4.0."><i class="fa fa-check"></i><b>12.1</b> Projects built with drake &lt;= 4.4.0 are not back compatible with drake &gt; 4.4.0.</a></li>
<li class="chapter" data-level="12.2" data-path="caution.html"><a href="caution.html#workflow-plans"><i class="fa fa-check"></i><b>12.2</b> Workflow plans</a><ul>
<li class="chapter" data-level="12.2.1" data-path="caution.html"><a href="caution.html#externalizing-commands-in-r-script-files"><i class="fa fa-check"></i><b>12.2.1</b> Externalizing commands in R script files</a></li>
<li class="chapter" data-level="12.2.2" data-path="caution.html"><a href="caution.html#commands-are-not-perfectly-flexible."><i class="fa fa-check"></i><b>12.2.2</b> Commands are NOT perfectly flexible.</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="caution.html"><a href="caution.html#execution"><i class="fa fa-check"></i><b>12.3</b> Execution</a><ul>
<li class="chapter" data-level="12.3.1" data-path="caution.html"><a href="caution.html#install-drake-properly."><i class="fa fa-check"></i><b>12.3.1</b> Install <code>drake</code> properly.</a></li>
<li class="chapter" data-level="12.3.2" data-path="caution.html"><a href="caution.html#install-all-your-packages."><i class="fa fa-check"></i><b>12.3.2</b> Install all your packages.</a></li>
<li class="chapter" data-level="12.3.3" data-path="caution.html"><a href="caution.html#a-note-on-tidy-evaluation-1"><i class="fa fa-check"></i><b>12.3.3</b> A note on tidy evaluation</a></li>
<li class="chapter" data-level="12.3.4" data-path="caution.html"><a href="caution.html#find-and-diagnose-your-errors."><i class="fa fa-check"></i><b>12.3.4</b> Find and diagnose your errors.</a></li>
<li class="chapter" data-level="12.3.5" data-path="caution.html"><a href="caution.html#refresh-the-drake_config-list-early-and-often."><i class="fa fa-check"></i><b>12.3.5</b> Refresh the <code>drake_config()</code> list early and often.</a></li>
<li class="chapter" data-level="12.3.6" data-path="caution.html"><a href="caution.html#workflows-as-r-packages."><i class="fa fa-check"></i><b>12.3.6</b> Workflows as R packages.</a></li>
<li class="chapter" data-level="12.3.7" data-path="caution.html"><a href="caution.html#the-lazy_load-flag-does-not-work-with-parlapply-parallelism."><i class="fa fa-check"></i><b>12.3.7</b> The <code>lazy_load</code> flag does not work with <code>&quot;parLapply&quot;</code> parallelism.</a></li>
<li class="chapter" data-level="12.3.8" data-path="caution.html"><a href="caution.html#timeouts-may-be-unreliable."><i class="fa fa-check"></i><b>12.3.8</b> Timeouts may be unreliable.</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="caution.html"><a href="caution.html#dependencies"><i class="fa fa-check"></i><b>12.4</b> Dependencies</a><ul>
<li class="chapter" data-level="12.4.1" data-path="caution.html"><a href="caution.html#objects-that-contain-functions-may-trigger-unwanted-builds"><i class="fa fa-check"></i><b>12.4.1</b> Objects that contain functions may trigger unwanted builds</a></li>
<li class="chapter" data-level="12.4.2" data-path="caution.html"><a href="caution.html#the-magrittr-dot-.-is-always-ignored."><i class="fa fa-check"></i><b>12.4.2</b> The <code>magrittr</code> dot (<code>.</code>) is always ignored.</a></li>
<li class="chapter" data-level="12.4.3" data-path="caution.html"><a href="caution.html#triggers-and-skipped-imports"><i class="fa fa-check"></i><b>12.4.3</b> Triggers and skipped imports</a></li>
<li class="chapter" data-level="12.4.4" data-path="caution.html"><a href="caution.html#dependencies-are-not-tracked-in-some-edge-cases."><i class="fa fa-check"></i><b>12.4.4</b> Dependencies are not tracked in some edge cases.</a></li>
<li class="chapter" data-level="12.4.5" data-path="caution.html"><a href="caution.html#dependencies-of-knitr-reports"><i class="fa fa-check"></i><b>12.4.5</b> Dependencies of <code>knitr</code> reports</a></li>
<li class="chapter" data-level="12.4.6" data-path="caution.html"><a href="caution.html#knitr-inputs-and-file-outputs-in-imported-functions."><i class="fa fa-check"></i><b>12.4.6</b> Knitr inputs and file outputs in imported functions.</a></li>
<li class="chapter" data-level="12.4.7" data-path="caution.html"><a href="caution.html#functions-produced-by-vectorize"><i class="fa fa-check"></i><b>12.4.7</b> Functions produced by <code>Vectorize()</code></a></li>
<li class="chapter" data-level="12.4.8" data-path="caution.html"><a href="caution.html#compiled-code-is-not-reproducibly-tracked."><i class="fa fa-check"></i><b>12.4.8</b> Compiled code is not reproducibly tracked.</a></li>
<li class="chapter" data-level="12.4.9" data-path="caution.html"><a href="caution.html#directories-folders-are-not-reproducibly-tracked."><i class="fa fa-check"></i><b>12.4.9</b> Directories (folders) are not reproducibly tracked.</a></li>
<li class="chapter" data-level="12.4.10" data-path="caution.html"><a href="caution.html#packages-are-not-tracked-as-dependencies."><i class="fa fa-check"></i><b>12.4.10</b> Packages are not tracked as dependencies.</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="caution.html"><a href="caution.html#high-performance-computing"><i class="fa fa-check"></i><b>12.5</b> High-performance computing</a><ul>
<li class="chapter" data-level="12.5.1" data-path="caution.html"><a href="caution.html#the-practical-utility-of-parallel-computing"><i class="fa fa-check"></i><b>12.5.1</b> The practical utility of parallel computing</a></li>
<li class="chapter" data-level="12.5.2" data-path="caution.html"><a href="caution.html#maximum-number-of-simultaneous-jobs"><i class="fa fa-check"></i><b>12.5.2</b> Maximum number of simultaneous jobs</a></li>
<li class="chapter" data-level="12.5.3" data-path="caution.html"><a href="caution.html#parallel-computing-on-windows"><i class="fa fa-check"></i><b>12.5.3</b> Parallel computing on Windows</a></li>
<li class="chapter" data-level="12.5.4" data-path="caution.html"><a href="caution.html#configuring-futurebatchtools-parallelism-for-clusters"><i class="fa fa-check"></i><b>12.5.4</b> Configuring <a href="https://github.com/HenrikBengtsson/future">future</a>/<a href="https://github.com/mllg/batchtools">batchtools</a> parallelism for clusters</a></li>
<li class="chapter" data-level="12.5.5" data-path="caution.html"><a href="caution.html#proper-makefiles-are-not-standalone."><i class="fa fa-check"></i><b>12.5.5</b> Proper Makefiles are not standalone.</a></li>
<li class="chapter" data-level="12.5.6" data-path="caution.html"><a href="caution.html#makefile-level-parallelism-for-imported-objects-and-files"><i class="fa fa-check"></i><b>12.5.6</b> Makefile-level parallelism for imported objects and files</a></li>
<li class="chapter" data-level="12.5.7" data-path="caution.html"><a href="caution.html#zombie-processes"><i class="fa fa-check"></i><b>12.5.7</b> Zombie processes</a></li>
</ul></li>
<li class="chapter" data-level="12.6" data-path="caution.html"><a href="caution.html#storage"><i class="fa fa-check"></i><b>12.6</b> Storage</a><ul>
<li class="chapter" data-level="12.6.1" data-path="caution.html"><a href="caution.html#projects-hosted-on-dropbox-and-similar-platforms"><i class="fa fa-check"></i><b>12.6.1</b> Projects hosted on Dropbox and similar platforms</a></li>
<li class="chapter" data-level="12.6.2" data-path="caution.html"><a href="caution.html#cache-customization-is-limited"><i class="fa fa-check"></i><b>12.6.2</b> Cache customization is limited</a></li>
<li class="chapter" data-level="12.6.3" data-path="caution.html"><a href="caution.html#runtime-predictions"><i class="fa fa-check"></i><b>12.6.3</b> Runtime predictions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="faq.html"><a href="faq.html"><i class="fa fa-check"></i><b>13</b> Frequently-asked questions</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The User Manual of the drake R Package</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="time" class="section level1">
<h1><span class="header-section-number">Chapter 10</span> Time: logging, prediction, and strategy</h1>
<p>Thanks to <a href="https://github.com/dapperjapper">Jasper Clarkberg</a>, <code>drake</code> records how long it takes to build each target. For large projects that take hours or days to run, this feature becomes important for planning and execution.</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb185-1" data-line-number="1"><span class="kw">library</span>(drake)</a>
<a class="sourceLine" id="cb185-2" data-line-number="2"><span class="kw">load_mtcars_example</span>() <span class="co"># Get the code with drake_example(&quot;mtcars&quot;).</span></a>
<a class="sourceLine" id="cb185-3" data-line-number="3"><span class="kw">make</span>(my_plan, <span class="dt">jobs =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb185-4" data-line-number="4"></a>
<a class="sourceLine" id="cb185-5" data-line-number="5"><span class="kw">build_times</span>(<span class="dt">digits =</span> <span class="dv">8</span>) <span class="co"># From the cache.</span></a>
<a class="sourceLine" id="cb185-6" data-line-number="6">## # A tibble: 28 x 5</a>
<a class="sourceLine" id="cb185-7" data-line-number="7">##    item                   type   elapsed        user           system     </a>
<a class="sourceLine" id="cb185-8" data-line-number="8">##  * &lt;chr&gt;                  &lt;chr&gt;  &lt;S4: Duration&gt; &lt;S4: Duration&gt; &lt;S4: Durat&gt;</a>
<a class="sourceLine" id="cb185-9" data-line-number="9">##  1 &quot;\&quot;report.md\&quot;&quot;        target 0.127s         0.068s         0.011s     </a>
<a class="sourceLine" id="cb185-10" data-line-number="10">##  2 &quot;\&quot;report.Rmd\&quot;&quot;       import 0.023s         0.002s         0.002s     </a>
<a class="sourceLine" id="cb185-11" data-line-number="11">##  3 coef_regression1_large target 0.032s         0.008s         0s         </a>
<a class="sourceLine" id="cb185-12" data-line-number="12">##  4 coef_regression1_small target 0.028s         0.008s         0s         </a>
<a class="sourceLine" id="cb185-13" data-line-number="13">##  5 coef_regression2_large target 0.026s         0.008s         0.001s     </a>
<a class="sourceLine" id="cb185-14" data-line-number="14">##  6 coef_regression2_small target 0.03s          0.008s         0.001s     </a>
<a class="sourceLine" id="cb185-15" data-line-number="15">##  7 data.frame             import 0.062s         0.034s         0.002s     </a>
<a class="sourceLine" id="cb185-16" data-line-number="16">##  8 knit                   import 0.059s         0.033s         0.001s     </a>
<a class="sourceLine" id="cb185-17" data-line-number="17">##  9 large                  target 0.04s          0.009s         0s         </a>
<a class="sourceLine" id="cb185-18" data-line-number="18">## 10 lm                     import 0.044s         0.016s         0s         </a>
<a class="sourceLine" id="cb185-19" data-line-number="19">## # ... with 18 more rows</a>
<a class="sourceLine" id="cb185-20" data-line-number="20"></a>
<a class="sourceLine" id="cb185-21" data-line-number="21">## `dplyr`-style `tidyselect` commands</a>
<a class="sourceLine" id="cb185-22" data-line-number="22"><span class="kw">build_times</span>(<span class="kw">starts_with</span>(<span class="st">&quot;coef&quot;</span>), <span class="dt">digits =</span> <span class="dv">8</span>)</a>
<a class="sourceLine" id="cb185-23" data-line-number="23">## # A tibble: 4 x 5</a>
<a class="sourceLine" id="cb185-24" data-line-number="24">##   item                   type   elapsed        user           system      </a>
<a class="sourceLine" id="cb185-25" data-line-number="25">## * &lt;chr&gt;                  &lt;chr&gt;  &lt;S4: Duration&gt; &lt;S4: Duration&gt; &lt;S4: Durati&gt;</a>
<a class="sourceLine" id="cb185-26" data-line-number="26">## 1 coef_regression1_large target 0.032s         0.008s         0s          </a>
<a class="sourceLine" id="cb185-27" data-line-number="27">## 2 coef_regression1_small target 0.028s         0.008s         0s          </a>
<a class="sourceLine" id="cb185-28" data-line-number="28">## 3 coef_regression2_large target 0.026s         0.008s         0.001s      </a>
<a class="sourceLine" id="cb185-29" data-line-number="29">## 4 coef_regression2_small target 0.03s          0.008s         0.001s</a>
<a class="sourceLine" id="cb185-30" data-line-number="30"></a>
<a class="sourceLine" id="cb185-31" data-line-number="31"><span class="kw">build_times</span>(<span class="dt">digits =</span> <span class="dv">8</span>, <span class="dt">targets_only =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb185-32" data-line-number="32">## # A tibble: 15 x 5</a>
<a class="sourceLine" id="cb185-33" data-line-number="33">##    item                   type   elapsed        user           system     </a>
<a class="sourceLine" id="cb185-34" data-line-number="34">##  * &lt;chr&gt;                  &lt;chr&gt;  &lt;S4: Duration&gt; &lt;S4: Duration&gt; &lt;S4: Durat&gt;</a>
<a class="sourceLine" id="cb185-35" data-line-number="35">##  1 &quot;\&quot;report.md\&quot;&quot;        target 0.127s         0.068s         0.011s     </a>
<a class="sourceLine" id="cb185-36" data-line-number="36">##  2 coef_regression1_large target 0.032s         0.008s         0s         </a>
<a class="sourceLine" id="cb185-37" data-line-number="37">##  3 coef_regression1_small target 0.028s         0.008s         0s         </a>
<a class="sourceLine" id="cb185-38" data-line-number="38">##  4 coef_regression2_large target 0.026s         0.008s         0.001s     </a>
<a class="sourceLine" id="cb185-39" data-line-number="39">##  5 coef_regression2_small target 0.03s          0.008s         0.001s     </a>
<a class="sourceLine" id="cb185-40" data-line-number="40">##  6 large                  target 0.04s          0.009s         0s         </a>
<a class="sourceLine" id="cb185-41" data-line-number="41">##  7 regression1_large      target 0.035s         0.008s         0.001s     </a>
<a class="sourceLine" id="cb185-42" data-line-number="42">##  8 regression1_small      target 0.027s         0.008s         0.001s     </a>
<a class="sourceLine" id="cb185-43" data-line-number="43">##  9 regression2_large      target 0.052s         0.006s         0.003s     </a>
<a class="sourceLine" id="cb185-44" data-line-number="44">## 10 regression2_small      target 0.031s         0.007s         0.001s     </a>
<a class="sourceLine" id="cb185-45" data-line-number="45">## 11 small                  target 0.031s         0.006s         0.003s     </a>
<a class="sourceLine" id="cb185-46" data-line-number="46">## 12 summ_regression1_large target 0.03s          0.008s         0s         </a>
<a class="sourceLine" id="cb185-47" data-line-number="47">## 13 summ_regression1_small target 0.031s         0.01s          0.001s     </a>
<a class="sourceLine" id="cb185-48" data-line-number="48">## 14 summ_regression2_large target 0.03s          0.008s         0s         </a>
<a class="sourceLine" id="cb185-49" data-line-number="49">## 15 summ_regression2_small target 0.033s         0.005s         0.002s</a></code></pre></div>
<p>For <code>drake</code> version 4.1.0 and earlier, <code>build_times()</code> just measures the elapsed runtime of each command in <code>my_plan$command</code>. For later versions, the build times also account for all the internal operations in <code>drake:::build()</code>, such as <a href="store.html#store">storage and hashing</a>.</p>
<div id="predict-total-runtime" class="section level2">
<h2><span class="header-section-number">10.1</span> Predict total runtime</h2>
<p>Drake uses these times to predict the runtime of the next <code>make()</code>. At this moment, everything is up to date in the current example, so the next <code>make()</code> should be fast. Here, we only factor in the times of the formal targets in the workflow plan, excluding any imports.</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb186-1" data-line-number="1">config &lt;-<span class="st"> </span><span class="kw">drake_config</span>(my_plan, <span class="dt">verbose =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb186-2" data-line-number="2"><span class="kw">predict_runtime</span>(config, <span class="dt">targets_only =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb186-3" data-line-number="3">## [1] &quot;0.583s&quot;</a></code></pre></div>
<p>Suppose we change a dependency to make some targets out of date. Now, even though, the next <code>make()</code> should take a little longer.</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb187-1" data-line-number="1">reg2 &lt;-<span class="st"> </span><span class="cf">function</span>(d){</a>
<a class="sourceLine" id="cb187-2" data-line-number="2">  d<span class="op">$</span>x3 &lt;-<span class="st"> </span>d<span class="op">$</span>x <span class="op">^</span><span class="st"> </span><span class="dv">3</span></a>
<a class="sourceLine" id="cb187-3" data-line-number="3">  <span class="kw">lm</span>(y <span class="op">~</span><span class="st"> </span>x3, <span class="dt">data =</span> d)</a>
<a class="sourceLine" id="cb187-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb187-5" data-line-number="5"></a>
<a class="sourceLine" id="cb187-6" data-line-number="6"><span class="kw">predict_runtime</span>(config, <span class="dt">targets_only =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb187-7" data-line-number="7">## [1] &quot;0.583s&quot;</a></code></pre></div>
<p>But what if you plan on starting from scratch next time, either after <code>clean()</code> or with <code>make(..., trigger = &quot;always&quot;)</code>?</p>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb188-1" data-line-number="1"><span class="kw">predict_runtime</span>(config, <span class="dt">from_scratch =</span> <span class="ot">TRUE</span>, <span class="dt">targets_only =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb188-2" data-line-number="2">## [1] &quot;0.583s&quot;</a></code></pre></div>
</div>
<div id="strategize-your-high-performance-computing" class="section level2">
<h2><span class="header-section-number">10.2</span> Strategize your high-performance computing</h2>
<p>Let’s say you are scaling up your workflow. You just put bigger data and heavier computation in your custom code, and the next time you run <code>make()</code>, your targets will take much longer to build. In fact, you estimate that every target except for your R Markdown report will take two hours to complete. Let’s write down these known times in seconds.</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb189-1" data-line-number="1">known_times &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">5</span>, <span class="kw">rep</span>(<span class="dv">7200</span>, <span class="kw">nrow</span>(my_plan) <span class="op">-</span><span class="st"> </span><span class="dv">1</span>))</a>
<a class="sourceLine" id="cb189-2" data-line-number="2"><span class="kw">names</span>(known_times) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">file_store</span>(<span class="st">&quot;report.md&quot;</span>), my_plan<span class="op">$</span>target[<span class="op">-</span><span class="dv">1</span>])</a>
<a class="sourceLine" id="cb189-3" data-line-number="3">known_times</a>
<a class="sourceLine" id="cb189-4" data-line-number="4">##            &quot;report.md&quot;                  small                  large </a>
<a class="sourceLine" id="cb189-5" data-line-number="5">##                      5                   7200                   7200 </a>
<a class="sourceLine" id="cb189-6" data-line-number="6">##      regression1_small      regression1_large      regression2_small </a>
<a class="sourceLine" id="cb189-7" data-line-number="7">##                   7200                   7200                   7200 </a>
<a class="sourceLine" id="cb189-8" data-line-number="8">##      regression2_large summ_regression1_small summ_regression1_large </a>
<a class="sourceLine" id="cb189-9" data-line-number="9">##                   7200                   7200                   7200 </a>
<a class="sourceLine" id="cb189-10" data-line-number="10">## summ_regression2_small summ_regression2_large coef_regression1_small </a>
<a class="sourceLine" id="cb189-11" data-line-number="11">##                   7200                   7200                   7200 </a>
<a class="sourceLine" id="cb189-12" data-line-number="12">## coef_regression1_large coef_regression2_small coef_regression2_large </a>
<a class="sourceLine" id="cb189-13" data-line-number="13">##                   7200                   7200                   7200</a></code></pre></div>
<p>How many parallel jobs should you use in the next <code>make()</code>? The <code>predict_runtime()</code> function can help you decide. <code>predict_runtime(jobs = n)</code> simulates persistent parallel workers and reports the estimated total runtime of <code>make(jobs = n)</code>. (See also <code>predict_load_balancing()</code>.)</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb190-1" data-line-number="1">time &lt;-<span class="st"> </span><span class="kw">c</span>()</a>
<a class="sourceLine" id="cb190-2" data-line-number="2"><span class="cf">for</span> (jobs <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">12</span>){</a>
<a class="sourceLine" id="cb190-3" data-line-number="3">  time[jobs] &lt;-<span class="st"> </span><span class="kw">predict_runtime</span>(</a>
<a class="sourceLine" id="cb190-4" data-line-number="4">    config,</a>
<a class="sourceLine" id="cb190-5" data-line-number="5">    <span class="dt">jobs =</span> jobs,</a>
<a class="sourceLine" id="cb190-6" data-line-number="6">    <span class="dt">from_scratch =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb190-7" data-line-number="7">    <span class="dt">known_times =</span> known_times</a>
<a class="sourceLine" id="cb190-8" data-line-number="8">  )</a>
<a class="sourceLine" id="cb190-9" data-line-number="9">}</a>
<a class="sourceLine" id="cb190-10" data-line-number="10"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb190-11" data-line-number="11"><span class="kw">ggplot</span>(<span class="kw">data.frame</span>(<span class="dt">time =</span> time <span class="op">/</span><span class="st"> </span><span class="dv">3600</span>, <span class="dt">jobs =</span> <span class="kw">ordered</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">12</span>), <span class="dt">group =</span> <span class="dv">1</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb190-12" data-line-number="12"><span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">x =</span> jobs, <span class="dt">y =</span> time, <span class="dt">group =</span> group)) <span class="op">+</span></a>
<a class="sourceLine" id="cb190-13" data-line-number="13"><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">breaks =</span> <span class="dv">0</span><span class="op">:</span><span class="dv">10</span> <span class="op">*</span><span class="st"> </span><span class="dv">4</span>, <span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">29</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb190-14" data-line-number="14"><span class="st">  </span><span class="kw">theme_gray</span>(<span class="dv">16</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb190-15" data-line-number="15"><span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;jobs argument of make()&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb190-16" data-line-number="16"><span class="st">  </span><span class="kw">ylab</span>(<span class="st">&quot;Predicted runtime of make() (hours)&quot;</span>)</a></code></pre></div>
<p><img src="drake-manual_files/figure-html/predictjobs-1.png" width="576" style="display: block; margin: auto;" /></p>
<p>We see serious potential speed gains up to 4 jobs, but beyond that point, we have to double the jobs to shave off another 2 hours. Your choice of <code>jobs</code> for <code>make()</code> ultimately depends on the runtime you can tolerate and the computing resources at your disposal.</p>
<p>A final note on predicting runtime: the output of <code>predict_runtime()</code> and <code>predict_load_balancing()</code> also depends the optional <code>workers</code> column of your <code>drake_plan()</code>. If you micromanage which workers are allowed to build which targets, you may minimize reads from disk, but you could also slow down your workflow if you are not careful. See the <a href="hpc.html#hpc">high-performance computing guide</a> for more.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="hpc.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="store.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
