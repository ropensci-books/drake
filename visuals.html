<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 16 Visualization with drake | The drake R Package User Manual</title>
  <meta name="description" content="In-depth walkthroughs and examples of drake, an R package for reproducible computation at scale." />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 16 Visualization with drake | The drake R Package User Manual" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://books.ropensci.org/drake/" />
  <meta property="og:image" content="https://books.ropensci.org/drake//images/logo.png" />
  <meta property="og:description" content="In-depth walkthroughs and examples of drake, an R package for reproducible computation at scale." />
  <meta name="github-repo" content="ropensci-books/drake" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 16 Visualization with drake | The drake R Package User Manual" />
  
  <meta name="twitter:description" content="In-depth walkthroughs and examples of drake, an R package for reproducible computation at scale." />
  <meta name="twitter:image" content="https://books.ropensci.org/drake//images/logo.png" />

<meta name="author" content="Will Landau, Kirill Müller, Alex Axthelm, Jasper Clarkberg, Lorenz Walthert, Ellis Hughes, Matthew Mark Strasiotto" />
<meta name="author" content="Copyright Eli Lilly and Company" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="images/apple-touch-icon.png" />
  <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
<link rel="prev" href="storage.html"/>
<link rel="next" href="debugging.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/vis-4.20.1/vis.css" rel="stylesheet" />
<script src="libs/vis-4.20.1/vis.min.js"></script>
<script src="libs/visNetwork-binding-2.0.9/visNetwork.js"></script>
<script src="libs/d3-4.5.0/d3.min.js"></script>
<script src="libs/sankey-1/sankey.js"></script>
<script src="libs/sankeyNetwork-binding-0.4/sankeyNetwork.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-150843595-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-150843595-1');
</script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="https://ropensci.github.io/dev_guide/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">The drake R Package User Manual</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#short-version"><i class="fa fa-check"></i><b>1.1</b> Short version</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#long-version"><i class="fa fa-check"></i><b>1.2</b> Long version</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#the-drake-r-package"><i class="fa fa-check"></i><b>1.3</b> The drake R package</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#installation"><i class="fa fa-check"></i><b>1.4</b> Installation</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#why-drake"><i class="fa fa-check"></i><b>1.5</b> Why drake?</a><ul>
<li class="chapter" data-level="1.5.1" data-path="index.html"><a href="index.html#what-gets-done-stays-done."><i class="fa fa-check"></i><b>1.5.1</b> What gets done stays done.</a></li>
<li class="chapter" data-level="1.5.2" data-path="index.html"><a href="index.html#reproducibility-with-confidence"><i class="fa fa-check"></i><b>1.5.2</b> Reproducibility with confidence</a></li>
<li class="chapter" data-level="1.5.3" data-path="index.html"><a href="index.html#scale-up-and-out."><i class="fa fa-check"></i><b>1.5.3</b> Scale up and out.</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#with-docker"><i class="fa fa-check"></i><b>1.6</b> With Docker</a></li>
<li class="chapter" data-level="1.7" data-path="index.html"><a href="index.html#documentation"><i class="fa fa-check"></i><b>1.7</b> Documentation</a><ul>
<li class="chapter" data-level="1.7.1" data-path="index.html"><a href="index.html#frequently-asked-questions"><i class="fa fa-check"></i><b>1.7.1</b> Frequently asked questions</a></li>
<li class="chapter" data-level="1.7.2" data-path="index.html"><a href="index.html#function-reference"><i class="fa fa-check"></i><b>1.7.2</b> Function reference</a></li>
<li class="chapter" data-level="1.7.3" data-path="index.html"><a href="index.html#tutorials"><i class="fa fa-check"></i><b>1.7.3</b> Tutorials</a></li>
<li class="chapter" data-level="1.7.4" data-path="index.html"><a href="index.html#examples"><i class="fa fa-check"></i><b>1.7.4</b> Examples</a></li>
<li class="chapter" data-level="1.7.5" data-path="index.html"><a href="index.html#presentations"><i class="fa fa-check"></i><b>1.7.5</b> Presentations</a></li>
<li class="chapter" data-level="1.7.6" data-path="index.html"><a href="index.html#context-and-history"><i class="fa fa-check"></i><b>1.7.6</b> Context and history</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="index.html"><a href="index.html#help-and-troubleshooting"><i class="fa fa-check"></i><b>1.8</b> Help and troubleshooting</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="similar-work.html"><a href="similar-work.html"><i class="fa fa-check"></i><b>2</b> Similar work</a><ul>
<li class="chapter" data-level="2.1" data-path="similar-work.html"><a href="similar-work.html#pipeline-tools"><i class="fa fa-check"></i><b>2.1</b> Pipeline tools</a><ul>
<li class="chapter" data-level="2.1.1" data-path="similar-work.html"><a href="similar-work.html#gnu-make"><i class="fa fa-check"></i><b>2.1.1</b> GNU Make</a></li>
<li class="chapter" data-level="2.1.2" data-path="similar-work.html"><a href="similar-work.html#remake"><i class="fa fa-check"></i><b>2.1.2</b> Remake</a></li>
<li class="chapter" data-level="2.1.3" data-path="similar-work.html"><a href="similar-work.html#factuals-drake"><i class="fa fa-check"></i><b>2.1.3</b> Factual’s Drake</a></li>
<li class="chapter" data-level="2.1.4" data-path="similar-work.html"><a href="similar-work.html#other-pipeline-tools"><i class="fa fa-check"></i><b>2.1.4</b> Other pipeline tools</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="similar-work.html"><a href="similar-work.html#memoization"><i class="fa fa-check"></i><b>2.2</b> Memoization</a></li>
<li class="chapter" data-level="2.3" data-path="similar-work.html"><a href="similar-work.html#literate-programming"><i class="fa fa-check"></i><b>2.3</b> Literate programming</a><ul>
<li class="chapter" data-level="2.3.1" data-path="similar-work.html"><a href="similar-work.html#knitr-and-r-markdown"><i class="fa fa-check"></i><b>2.3.1</b> knitr and R Markdown</a></li>
<li class="chapter" data-level="2.3.2" data-path="similar-work.html"><a href="similar-work.html#version-control"><i class="fa fa-check"></i><b>2.3.2</b> Version control</a></li>
<li class="chapter" data-level="2.3.3" data-path="similar-work.html"><a href="similar-work.html#containerization-and-r-package-environments"><i class="fa fa-check"></i><b>2.3.3</b> Containerization and R package environments</a></li>
<li class="chapter" data-level="2.3.4" data-path="similar-work.html"><a href="similar-work.html#workflowr"><i class="fa fa-check"></i><b>2.3.4</b> workflowr</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="similar-work.html"><a href="similar-work.html#acknowledgements"><i class="fa fa-check"></i><b>2.4</b> Acknowledgements</a></li>
</ul></li>
<li class="part"><span><b>I Getting started</b></span></li>
<li class="chapter" data-level="3" data-path="walkthrough.html"><a href="walkthrough.html"><i class="fa fa-check"></i><b>3</b> Walkthrough</a><ul>
<li class="chapter" data-level="3.1" data-path="walkthrough.html"><a href="walkthrough.html#set-the-stage."><i class="fa fa-check"></i><b>3.1</b> Set the stage.</a></li>
<li class="chapter" data-level="3.2" data-path="walkthrough.html"><a href="walkthrough.html#make-your-results."><i class="fa fa-check"></i><b>3.2</b> Make your results.</a></li>
<li class="chapter" data-level="3.3" data-path="walkthrough.html"><a href="walkthrough.html#go-back-and-fix-things."><i class="fa fa-check"></i><b>3.3</b> Go back and fix things.</a></li>
<li class="chapter" data-level="3.4" data-path="walkthrough.html"><a href="walkthrough.html#history-and-provenance"><i class="fa fa-check"></i><b>3.4</b> History and provenance</a></li>
<li class="chapter" data-level="3.5" data-path="walkthrough.html"><a href="walkthrough.html#reproducible-data-recovery-and-renaming"><i class="fa fa-check"></i><b>3.5</b> Reproducible data recovery and renaming</a><ul>
<li class="chapter" data-level="3.5.1" data-path="walkthrough.html"><a href="walkthrough.html#undoing-clean"><i class="fa fa-check"></i><b>3.5.1</b> Undoing <code>clean()</code></a></li>
<li class="chapter" data-level="3.5.2" data-path="walkthrough.html"><a href="walkthrough.html#renaming"><i class="fa fa-check"></i><b>3.5.2</b> Renaming</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="walkthrough.html"><a href="walkthrough.html#try-the-code-yourself"><i class="fa fa-check"></i><b>3.6</b> Try the code yourself!</a></li>
<li class="chapter" data-level="3.7" data-path="walkthrough.html"><a href="walkthrough.html#thanks"><i class="fa fa-check"></i><b>3.7</b> Thanks</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="plans.html"><a href="plans.html"><i class="fa fa-check"></i><b>4</b> <code>drake</code> plans</a><ul>
<li class="chapter" data-level="4.1" data-path="plans.html"><a href="plans.html#functions"><i class="fa fa-check"></i><b>4.1</b> Functions</a></li>
<li class="chapter" data-level="4.2" data-path="plans.html"><a href="plans.html#intro-to-plans"><i class="fa fa-check"></i><b>4.2</b> Intro to plans</a></li>
<li class="chapter" data-level="4.3" data-path="plans.html"><a href="plans.html#how-to-choose-good-targets"><i class="fa fa-check"></i><b>4.3</b> How to choose good targets</a></li>
<li class="chapter" data-level="4.4" data-path="plans.html"><a href="plans.html#special-data-formats-for-targets"><i class="fa fa-check"></i><b>4.4</b> Special data formats for targets</a></li>
<li class="chapter" data-level="4.5" data-path="plans.html"><a href="plans.html#special-columns"><i class="fa fa-check"></i><b>4.5</b> Special columns</a></li>
<li class="chapter" data-level="4.6" data-path="plans.html"><a href="plans.html#static-files"><i class="fa fa-check"></i><b>4.6</b> Static files</a><ul>
<li class="chapter" data-level="4.6.1" data-path="plans.html"><a href="plans.html#urls"><i class="fa fa-check"></i><b>4.6.1</b> URLs</a></li>
<li class="chapter" data-level="4.6.2" data-path="plans.html"><a href="plans.html#limitations-of-static-files"><i class="fa fa-check"></i><b>4.6.2</b> Limitations of static files</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="plans.html"><a href="plans.html#dynamic-files"><i class="fa fa-check"></i><b>4.7</b> Dynamic files</a><ul>
<li class="chapter" data-level="4.7.1" data-path="plans.html"><a href="plans.html#how-to-use-dynamic-files"><i class="fa fa-check"></i><b>4.7.1</b> How to use dynamic files</a></li>
<li class="chapter" data-level="4.7.2" data-path="plans.html"><a href="plans.html#example-of-dynamic-files"><i class="fa fa-check"></i><b>4.7.2</b> Example of dynamic files</a></li>
<li class="chapter" data-level="4.7.3" data-path="plans.html"><a href="plans.html#limitations-of-dynamic-files"><i class="fa fa-check"></i><b>4.7.3</b> Limitations of dynamic files</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="plans.html"><a href="plans.html#large-plans"><i class="fa fa-check"></i><b>4.8</b> Large plans</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="static.html"><a href="static.html"><i class="fa fa-check"></i><b>5</b> Static branching</a><ul>
<li class="chapter" data-level="5.1" data-path="static.html"><a href="static.html#why-static-branching"><i class="fa fa-check"></i><b>5.1</b> Why static branching?</a></li>
<li class="chapter" data-level="5.2" data-path="static.html"><a href="static.html#grouping-variables"><i class="fa fa-check"></i><b>5.2</b> Grouping variables</a><ul>
<li class="chapter" data-level="5.2.1" data-path="static.html"><a href="static.html#limitations-of-grouping-variables"><i class="fa fa-check"></i><b>5.2.1</b> Limitations of grouping variables</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="static.html"><a href="static.html#tidy-evaluation"><i class="fa fa-check"></i><b>5.3</b> Tidy evaluation</a></li>
<li class="chapter" data-level="5.4" data-path="static.html"><a href="static.html#static-transformations"><i class="fa fa-check"></i><b>5.4</b> Static transformations</a><ul>
<li class="chapter" data-level="5.4.1" data-path="static.html"><a href="static.html#map"><i class="fa fa-check"></i><b>5.4.1</b> <code>map()</code></a></li>
<li class="chapter" data-level="5.4.2" data-path="static.html"><a href="static.html#cross"><i class="fa fa-check"></i><b>5.4.2</b> <code>cross()</code></a></li>
<li class="chapter" data-level="5.4.3" data-path="static.html"><a href="static.html#split"><i class="fa fa-check"></i><b>5.4.3</b> <code>split()</code></a></li>
<li class="chapter" data-level="5.4.4" data-path="static.html"><a href="static.html#combine"><i class="fa fa-check"></i><b>5.4.4</b> <code>combine()</code></a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="static.html"><a href="static.html#tags"><i class="fa fa-check"></i><b>5.5</b> Tags</a><ul>
<li class="chapter" data-level="5.5.1" data-path="static.html"><a href="static.html#target-names"><i class="fa fa-check"></i><b>5.5.1</b> Target names</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="dynamic.html"><a href="dynamic.html"><i class="fa fa-check"></i><b>6</b> Dynamic branching</a><ul>
<li class="chapter" data-level="6.1" data-path="dynamic.html"><a href="dynamic.html#a-note-about-versions"><i class="fa fa-check"></i><b>6.1</b> A note about versions</a></li>
<li class="chapter" data-level="6.2" data-path="dynamic.html"><a href="dynamic.html#motivation"><i class="fa fa-check"></i><b>6.2</b> Motivation</a></li>
<li class="chapter" data-level="6.3" data-path="dynamic.html"><a href="dynamic.html#which-kind-of-branching-should-i-use"><i class="fa fa-check"></i><b>6.3</b> Which kind of branching should I use?</a></li>
<li class="chapter" data-level="6.4" data-path="dynamic.html"><a href="dynamic.html#dynamic-targets"><i class="fa fa-check"></i><b>6.4</b> Dynamic targets</a></li>
<li class="chapter" data-level="6.5" data-path="dynamic.html"><a href="dynamic.html#dynamic-transformations"><i class="fa fa-check"></i><b>6.5</b> Dynamic transformations</a><ul>
<li class="chapter" data-level="6.5.1" data-path="dynamic.html"><a href="dynamic.html#map-1"><i class="fa fa-check"></i><b>6.5.1</b> <code>map()</code></a></li>
<li class="chapter" data-level="6.5.2" data-path="dynamic.html"><a href="dynamic.html#cross-1"><i class="fa fa-check"></i><b>6.5.2</b> <code>cross()</code></a></li>
<li class="chapter" data-level="6.5.3" data-path="dynamic.html"><a href="dynamic.html#group"><i class="fa fa-check"></i><b>6.5.3</b> <code>group()</code></a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="dynamic.html"><a href="dynamic.html#trace"><i class="fa fa-check"></i><b>6.6</b> Trace</a></li>
<li class="chapter" data-level="6.7" data-path="dynamic.html"><a href="dynamic.html#max_expand"><i class="fa fa-check"></i><b>6.7</b> <code>max_expand</code></a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="projects.html"><a href="projects.html"><i class="fa fa-check"></i><b>7</b> <code>drake</code> projects</a><ul>
<li class="chapter" data-level="7.1" data-path="projects.html"><a href="projects.html#code-files"><i class="fa fa-check"></i><b>7.1</b> Code files</a></li>
<li class="chapter" data-level="7.2" data-path="projects.html"><a href="projects.html#safer-interactivity"><i class="fa fa-check"></i><b>7.2</b> Safer interactivity</a><ul>
<li class="chapter" data-level="7.2.1" data-path="projects.html"><a href="projects.html#motivation-1"><i class="fa fa-check"></i><b>7.2.1</b> Motivation</a></li>
<li class="chapter" data-level="7.2.2" data-path="projects.html"><a href="projects.html#usage"><i class="fa fa-check"></i><b>7.2.2</b> Usage</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="projects.html"><a href="projects.html#script-file-pitfalls"><i class="fa fa-check"></i><b>7.3</b> Script file pitfalls</a></li>
<li class="chapter" data-level="7.4" data-path="projects.html"><a href="projects.html#workflows-as-r-packages"><i class="fa fa-check"></i><b>7.4</b> Workflows as R packages</a></li>
<li class="chapter" data-level="7.5" data-path="projects.html"><a href="projects.html#other-tools"><i class="fa fa-check"></i><b>7.5</b> Other tools</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="scripts.html"><a href="scripts.html"><i class="fa fa-check"></i><b>8</b> Script-based workflows</a><ul>
<li class="chapter" data-level="8.1" data-path="scripts.html"><a href="scripts.html#function-oriented-workflows"><i class="fa fa-check"></i><b>8.1</b> Function-oriented workflows</a></li>
<li class="chapter" data-level="8.2" data-path="scripts.html"><a href="scripts.html#traditional-and-legacy-workflows"><i class="fa fa-check"></i><b>8.2</b> Traditional and legacy workflows</a></li>
<li class="chapter" data-level="8.3" data-path="scripts.html"><a href="scripts.html#overcoming-technical-debt"><i class="fa fa-check"></i><b>8.3</b> Overcoming Technical Debt</a></li>
<li class="chapter" data-level="8.4" data-path="scripts.html"><a href="scripts.html#dependencies"><i class="fa fa-check"></i><b>8.4</b> Dependencies</a></li>
<li class="chapter" data-level="8.5" data-path="scripts.html"><a href="scripts.html#building-the-connections"><i class="fa fa-check"></i><b>8.5</b> Building the connections</a></li>
<li class="chapter" data-level="8.6" data-path="scripts.html"><a href="scripts.html#run-the-workflow"><i class="fa fa-check"></i><b>8.6</b> Run the workflow</a></li>
<li class="chapter" data-level="8.7" data-path="scripts.html"><a href="scripts.html#keeping-the-results-up-to-date"><i class="fa fa-check"></i><b>8.7</b> Keeping the results up to date</a></li>
<li class="chapter" data-level="8.8" data-path="scripts.html"><a href="scripts.html#final-thoughts"><i class="fa fa-check"></i><b>8.8</b> Final thoughts</a></li>
</ul></li>
<li class="part"><span><b>II Examples</b></span></li>
<li class="chapter" data-level="9" data-path="churn.html"><a href="churn.html"><i class="fa fa-check"></i><b>9</b> Customer churn and deep learning</a><ul>
<li class="chapter" data-level="9.1" data-path="churn.html"><a href="churn.html#packages"><i class="fa fa-check"></i><b>9.1</b> Packages</a></li>
<li class="chapter" data-level="9.2" data-path="churn.html"><a href="churn.html#functions-1"><i class="fa fa-check"></i><b>9.2</b> Functions</a></li>
<li class="chapter" data-level="9.3" data-path="churn.html"><a href="churn.html#plan"><i class="fa fa-check"></i><b>9.3</b> Plan</a></li>
<li class="chapter" data-level="9.4" data-path="churn.html"><a href="churn.html#dependency-graph"><i class="fa fa-check"></i><b>9.4</b> Dependency graph</a></li>
<li class="chapter" data-level="9.5" data-path="churn.html"><a href="churn.html#run-the-models"><i class="fa fa-check"></i><b>9.5</b> Run the models</a></li>
<li class="chapter" data-level="9.6" data-path="churn.html"><a href="churn.html#inspect-the-results"><i class="fa fa-check"></i><b>9.6</b> Inspect the results</a></li>
<li class="chapter" data-level="9.7" data-path="churn.html"><a href="churn.html#add-models"><i class="fa fa-check"></i><b>9.7</b> Add models</a></li>
<li class="chapter" data-level="9.8" data-path="churn.html"><a href="churn.html#inspect-the-results-again"><i class="fa fa-check"></i><b>9.8</b> Inspect the results again</a></li>
<li class="chapter" data-level="9.9" data-path="churn.html"><a href="churn.html#update-your-code"><i class="fa fa-check"></i><b>9.9</b> Update your code</a></li>
<li class="chapter" data-level="9.10" data-path="churn.html"><a href="churn.html#history-and-provenance-1"><i class="fa fa-check"></i><b>9.10</b> History and provenance</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="churn.html"><a href="churn.html#packages"><i class="fa fa-check"></i><b>10</b> An analysis of R package download trends</a><ul>
<li class="chapter" data-level="10.1" data-path="packages.html"><a href="packages.html"><i class="fa fa-check"></i><b>10.1</b> Get the code.</a></li>
<li class="chapter" data-level="10.2" data-path="packages.html"><a href="packages.html#overview"><i class="fa fa-check"></i><b>10.2</b> Overview</a></li>
<li class="chapter" data-level="10.3" data-path="packages.html"><a href="packages.html#analysis"><i class="fa fa-check"></i><b>10.3</b> Analysis</a></li>
<li class="chapter" data-level="10.4" data-path="packages.html"><a href="packages.html#other-ways-to-trigger-downloads"><i class="fa fa-check"></i><b>10.4</b> Other ways to trigger downloads</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="gsp.html"><a href="gsp.html"><i class="fa fa-check"></i><b>11</b> Finding the best model of gross state product</a><ul>
<li class="chapter" data-level="11.1" data-path="gsp.html"><a href="gsp.html#get-the-code.-1"><i class="fa fa-check"></i><b>11.1</b> Get the code.</a></li>
<li class="chapter" data-level="11.2" data-path="gsp.html"><a href="gsp.html#objective-and-methods"><i class="fa fa-check"></i><b>11.2</b> Objective and methods</a></li>
<li class="chapter" data-level="11.3" data-path="gsp.html"><a href="gsp.html#data"><i class="fa fa-check"></i><b>11.3</b> Data</a></li>
<li class="chapter" data-level="11.4" data-path="gsp.html"><a href="gsp.html#analysis-1"><i class="fa fa-check"></i><b>11.4</b> Analysis</a></li>
<li class="chapter" data-level="11.5" data-path="gsp.html"><a href="gsp.html#results"><i class="fa fa-check"></i><b>11.5</b> Results</a></li>
<li class="chapter" data-level="11.6" data-path="gsp.html"><a href="gsp.html#comparison-with-gnu-make"><i class="fa fa-check"></i><b>11.6</b> Comparison with GNU Make</a></li>
<li class="chapter" data-level="11.7" data-path="gsp.html"><a href="gsp.html#references"><i class="fa fa-check"></i><b>11.7</b> References</a></li>
</ul></li>
<li class="part"><span><b>III Resource management</b></span></li>
<li class="chapter" data-level="12" data-path="hpc.html"><a href="hpc.html"><i class="fa fa-check"></i><b>12</b> High-performance computing</a><ul>
<li class="chapter" data-level="12.1" data-path="hpc.html"><a href="hpc.html#start-small"><i class="fa fa-check"></i><b>12.1</b> Start small</a></li>
<li class="chapter" data-level="12.2" data-path="hpc.html"><a href="hpc.html#let-make-schedule-your-targets."><i class="fa fa-check"></i><b>12.2</b> Let <code>make()</code> schedule your targets.</a></li>
<li class="chapter" data-level="12.3" data-path="hpc.html"><a href="hpc.html#the-master-process"><i class="fa fa-check"></i><b>12.3</b> The master process</a><ul>
<li class="chapter" data-level="12.3.1" data-path="hpc.html"><a href="hpc.html#master-on-a-cluster"><i class="fa fa-check"></i><b>12.3.1</b> Master on a cluster</a></li>
<li class="chapter" data-level="12.3.2" data-path="hpc.html"><a href="hpc.html#local-master"><i class="fa fa-check"></i><b>12.3.2</b> Local master</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="hpc.html"><a href="hpc.html#parallel-backends"><i class="fa fa-check"></i><b>12.4</b> Parallel backends</a></li>
<li class="chapter" data-level="12.5" data-path="hpc.html"><a href="hpc.html#the-clustermq-backend"><i class="fa fa-check"></i><b>12.5</b> The <code>clustermq</code> backend</a><ul>
<li class="chapter" data-level="12.5.1" data-path="hpc.html"><a href="hpc.html#persistent-workers"><i class="fa fa-check"></i><b>12.5.1</b> Persistent workers</a></li>
<li class="chapter" data-level="12.5.2" data-path="hpc.html"><a href="hpc.html#installation-1"><i class="fa fa-check"></i><b>12.5.2</b> Installation</a></li>
<li class="chapter" data-level="12.5.3" data-path="hpc.html"><a href="hpc.html#on-your-local-machine"><i class="fa fa-check"></i><b>12.5.3</b> On your local machine</a></li>
<li class="chapter" data-level="12.5.4" data-path="hpc.html"><a href="hpc.html#on-a-cluster"><i class="fa fa-check"></i><b>12.5.4</b> On a cluster</a></li>
</ul></li>
<li class="chapter" data-level="12.6" data-path="hpc.html"><a href="hpc.html#the-future-backend"><i class="fa fa-check"></i><b>12.6</b> The <code>future</code> backend</a><ul>
<li class="chapter" data-level="12.6.1" data-path="hpc.html"><a href="hpc.html#transient-workers"><i class="fa fa-check"></i><b>12.6.1</b> Transient workers</a></li>
<li class="chapter" data-level="12.6.2" data-path="hpc.html"><a href="hpc.html#installation-2"><i class="fa fa-check"></i><b>12.6.2</b> Installation</a></li>
<li class="chapter" data-level="12.6.3" data-path="hpc.html"><a href="hpc.html#on-your-local-machine-1"><i class="fa fa-check"></i><b>12.6.3</b> On your local machine</a></li>
<li class="chapter" data-level="12.6.4" data-path="hpc.html"><a href="hpc.html#on-a-cluster-1"><i class="fa fa-check"></i><b>12.6.4</b> On a cluster</a></li>
</ul></li>
<li class="chapter" data-level="12.7" data-path="hpc.html"><a href="hpc.html#advanced-options"><i class="fa fa-check"></i><b>12.7</b> Advanced options</a><ul>
<li class="chapter" data-level="12.7.1" data-path="hpc.html"><a href="hpc.html#selectivity"><i class="fa fa-check"></i><b>12.7.1</b> Selectivity</a></li>
<li class="chapter" data-level="12.7.2" data-path="hpc.html"><a href="hpc.html#memory-options"><i class="fa fa-check"></i><b>12.7.2</b> Memory options</a></li>
<li class="chapter" data-level="12.7.3" data-path="hpc.html"><a href="hpc.html#storage-options"><i class="fa fa-check"></i><b>12.7.3</b> Storage options</a></li>
<li class="chapter" data-level="12.7.4" data-path="hpc.html"><a href="hpc.html#the-template-argument-for-persistent-workers"><i class="fa fa-check"></i><b>12.7.4</b> The <code>template</code> argument for persistent workers</a></li>
<li class="chapter" data-level="12.7.5" data-path="hpc.html"><a href="hpc.html#the-resources-column-for-transient-workers"><i class="fa fa-check"></i><b>12.7.5</b> The <code>resources</code> column for transient workers</a></li>
<li class="chapter" data-level="12.7.6" data-path="hpc.html"><a href="hpc.html#parallel-computing-within-targets"><i class="fa fa-check"></i><b>12.7.6</b> Parallel computing <em>within</em> targets</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="time.html"><a href="time.html"><i class="fa fa-check"></i><b>13</b> Time: speed, time logging, prediction, and strategy</a><ul>
<li class="chapter" data-level="13.1" data-path="time.html"><a href="time.html#why-is-drake-so-slow"><i class="fa fa-check"></i><b>13.1</b> Why is <code>drake</code> so slow?</a><ul>
<li class="chapter" data-level="13.1.1" data-path="time.html"><a href="time.html#help-us-find-out"><i class="fa fa-check"></i><b>13.1.1</b> Help us find out!</a></li>
<li class="chapter" data-level="13.1.2" data-path="time.html"><a href="time.html#too-many-targets"><i class="fa fa-check"></i><b>13.1.2</b> Too many targets?</a></li>
<li class="chapter" data-level="13.1.3" data-path="time.html"><a href="time.html#big-data"><i class="fa fa-check"></i><b>13.1.3</b> Big data?</a></li>
<li class="chapter" data-level="13.1.4" data-path="time.html"><a href="time.html#aggressive-shortcuts"><i class="fa fa-check"></i><b>13.1.4</b> Aggressive shortcuts</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="time.html"><a href="time.html#time-logging"><i class="fa fa-check"></i><b>13.2</b> Time logging</a></li>
<li class="chapter" data-level="13.3" data-path="time.html"><a href="time.html#predict-total-runtime"><i class="fa fa-check"></i><b>13.3</b> Predict total runtime</a></li>
<li class="chapter" data-level="13.4" data-path="time.html"><a href="time.html#strategize-your-high-performance-computing"><i class="fa fa-check"></i><b>13.4</b> Strategize your high-performance computing</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="memory.html"><a href="memory.html"><i class="fa fa-check"></i><b>14</b> Memory management</a><ul>
<li class="chapter" data-level="14.1" data-path="memory.html"><a href="memory.html#garbage-collection-and-custom-files"><i class="fa fa-check"></i><b>14.1</b> Garbage collection and custom files</a></li>
<li class="chapter" data-level="14.2" data-path="memory.html"><a href="memory.html#memory-strategies"><i class="fa fa-check"></i><b>14.2</b> Memory strategies</a></li>
<li class="chapter" data-level="14.3" data-path="memory.html"><a href="memory.html#data-splitting"><i class="fa fa-check"></i><b>14.3</b> Data splitting</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="storage.html"><a href="storage.html"><i class="fa fa-check"></i><b>15</b> Storage</a><ul>
<li class="chapter" data-level="15.1" data-path="storage.html"><a href="storage.html#drakes-cache"><i class="fa fa-check"></i><b>15.1</b> <code>drake</code>’s cache</a></li>
<li class="chapter" data-level="15.2" data-path="storage.html"><a href="storage.html#efficient-target-storage"><i class="fa fa-check"></i><b>15.2</b> Efficient target storage</a></li>
<li class="chapter" data-level="15.3" data-path="storage.html"><a href="storage.html#why-is-my-cache-so-big"><i class="fa fa-check"></i><b>15.3</b> Why is my cache so big?</a><ul>
<li class="chapter" data-level="15.3.1" data-path="storage.html"><a href="storage.html#old-targets"><i class="fa fa-check"></i><b>15.3.1</b> Old targets</a></li>
<li class="chapter" data-level="15.3.2" data-path="storage.html"><a href="storage.html#garbage-from-interrupted-builds"><i class="fa fa-check"></i><b>15.3.2</b> Garbage from interrupted builds</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="storage.html"><a href="storage.html#interfaces-to-the-cache"><i class="fa fa-check"></i><b>15.4</b> Interfaces to the cache</a></li>
</ul></li>
<li class="part"><span><b>IV Extra features</b></span></li>
<li class="chapter" data-level="16" data-path="visuals.html"><a href="visuals.html"><i class="fa fa-check"></i><b>16</b> Visualization with drake</a><ul>
<li class="chapter" data-level="16.1" data-path="visuals.html"><a href="visuals.html#plotting-plans"><i class="fa fa-check"></i><b>16.1</b> Plotting plans</a><ul>
<li class="chapter" data-level="16.1.1" data-path="visuals.html"><a href="visuals.html#vis_drake_graph"><i class="fa fa-check"></i><b>16.1.1</b> <code>vis_drake_graph()</code></a></li>
<li class="chapter" data-level="16.1.2" data-path="visuals.html"><a href="visuals.html#sankey_drake_graph"><i class="fa fa-check"></i><b>16.1.2</b> <code>sankey_drake_graph()</code></a></li>
<li class="chapter" data-level="16.1.3" data-path="visuals.html"><a href="visuals.html#drake_ggraph"><i class="fa fa-check"></i><b>16.1.3</b> <code>drake_ggraph()</code></a></li>
<li class="chapter" data-level="16.1.4" data-path="visuals.html"><a href="visuals.html#text_drake_graph"><i class="fa fa-check"></i><b>16.1.4</b> <code>text_drake_graph()</code></a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="visuals.html"><a href="visuals.html#underlying-graph-data-node-and-edge-data-frames"><i class="fa fa-check"></i><b>16.2</b> Underlying graph data: node and edge data frames</a></li>
<li class="chapter" data-level="16.3" data-path="visuals.html"><a href="visuals.html#visualizing-target-status"><i class="fa fa-check"></i><b>16.3</b> Visualizing target status</a></li>
<li class="chapter" data-level="16.4" data-path="visuals.html"><a href="visuals.html#subgraphs"><i class="fa fa-check"></i><b>16.4</b> Subgraphs</a></li>
<li class="chapter" data-level="16.5" data-path="visuals.html"><a href="visuals.html#control-the-vis_drake_graph-legend."><i class="fa fa-check"></i><b>16.5</b> Control the <code>vis_drake_graph()</code> legend.</a></li>
<li class="chapter" data-level="16.6" data-path="visuals.html"><a href="visuals.html#clusters"><i class="fa fa-check"></i><b>16.6</b> Clusters</a></li>
<li class="chapter" data-level="16.7" data-path="visuals.html"><a href="visuals.html#output-files"><i class="fa fa-check"></i><b>16.7</b> Output files</a></li>
<li class="chapter" data-level="16.8" data-path="visuals.html"><a href="visuals.html#node-selection"><i class="fa fa-check"></i><b>16.8</b> Node Selection</a><ul>
<li class="chapter" data-level="16.8.1" data-path="visuals.html"><a href="visuals.html#perform-the-default-action-on-select"><i class="fa fa-check"></i><b>16.8.1</b> Perform the default action on select</a></li>
<li class="chapter" data-level="16.8.2" data-path="visuals.html"><a href="visuals.html#perform-no-action-on-select"><i class="fa fa-check"></i><b>16.8.2</b> Perform no action on select</a></li>
<li class="chapter" data-level="16.8.3" data-path="visuals.html"><a href="visuals.html#customize-the-onselect-event-behaviour"><i class="fa fa-check"></i><b>16.8.3</b> Customize the onSelect event behaviour</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="debugging.html"><a href="debugging.html"><i class="fa fa-check"></i><b>17</b> Debugging and testing drake projects</a><ul>
<li class="chapter" data-level="17.1" data-path="debugging.html"><a href="debugging.html#debugging-failed-targets"><i class="fa fa-check"></i><b>17.1</b> Debugging failed targets</a><ul>
<li class="chapter" data-level="17.1.1" data-path="debugging.html"><a href="debugging.html#diagnosing-errors"><i class="fa fa-check"></i><b>17.1.1</b> Diagnosing errors</a></li>
<li class="chapter" data-level="17.1.2" data-path="debugging.html"><a href="debugging.html#interactive-debugging"><i class="fa fa-check"></i><b>17.1.2</b> Interactive debugging</a></li>
<li class="chapter" data-level="17.1.3" data-path="debugging.html"><a href="debugging.html#efficient-trial-and-error"><i class="fa fa-check"></i><b>17.1.3</b> Efficient trial and error</a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="debugging.html"><a href="debugging.html#why-do-my-targets-keep-rerunning"><i class="fa fa-check"></i><b>17.2</b> Why do my targets keep rerunning?</a><ul>
<li class="chapter" data-level="17.2.1" data-path="debugging.html"><a href="debugging.html#how-your-workflow-fits-together"><i class="fa fa-check"></i><b>17.2.1</b> How your workflow fits together</a></li>
<li class="chapter" data-level="17.2.2" data-path="debugging.html"><a href="debugging.html#which-targets-are-outdated"><i class="fa fa-check"></i><b>17.2.2</b> Which targets are outdated</a></li>
<li class="chapter" data-level="17.2.3" data-path="debugging.html"><a href="debugging.html#why-your-targets-are-outdated"><i class="fa fa-check"></i><b>17.2.3</b> Why your targets are outdated</a></li>
<li class="chapter" data-level="17.2.4" data-path="debugging.html"><a href="debugging.html#strategies-to-prevent-unexpected-changes-in-the-future"><i class="fa fa-check"></i><b>17.2.4</b> Strategies to prevent unexpected changes in the future</a></li>
</ul></li>
<li class="chapter" data-level="17.3" data-path="debugging.html"><a href="debugging.html#more-help"><i class="fa fa-check"></i><b>17.3</b> More help</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="triggers.html"><a href="triggers.html"><i class="fa fa-check"></i><b>18</b> Triggers: decision rules for building targets</a><ul>
<li class="chapter" data-level="18.1" data-path="triggers.html"><a href="triggers.html#what-are-triggers"><i class="fa fa-check"></i><b>18.1</b> What are triggers?</a></li>
<li class="chapter" data-level="18.2" data-path="triggers.html"><a href="triggers.html#customization"><i class="fa fa-check"></i><b>18.2</b> Customization</a></li>
<li class="chapter" data-level="18.3" data-path="triggers.html"><a href="triggers.html#alternative-trigger-modes"><i class="fa fa-check"></i><b>18.3</b> Alternative trigger modes</a></li>
<li class="chapter" data-level="18.4" data-path="triggers.html"><a href="triggers.html#a-more-practical-example"><i class="fa fa-check"></i><b>18.4</b> A more practical example</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="faq.html"><a href="faq.html"><i class="fa fa-check"></i><b>A</b> Frequently-asked questions</a></li>
<li class="chapter" data-level="B" data-path="design.html"><a href="design.html"><i class="fa fa-check"></i><b>B</b> Design</a><ul>
<li class="chapter" data-level="B.1" data-path="design.html"><a href="design.html#principles"><i class="fa fa-check"></i><b>B.1</b> Principles</a><ul>
<li class="chapter" data-level="B.1.1" data-path="design.html"><a href="design.html#functions-first"><i class="fa fa-check"></i><b>B.1.1</b> Functions first</a></li>
<li class="chapter" data-level="B.1.2" data-path="design.html"><a href="design.html#light-use-of-traditional-oop"><i class="fa fa-check"></i><b>B.1.2</b> Light use of traditional OOP</a></li>
<li class="chapter" data-level="B.1.3" data-path="design.html"><a href="design.html#high-performant-small-objects"><i class="fa fa-check"></i><b>B.1.3</b> High-performant small objects</a></li>
<li class="chapter" data-level="B.1.4" data-path="design.html"><a href="design.html#fast-iteration-along-aggregated-data"><i class="fa fa-check"></i><b>B.1.4</b> Fast iteration along aggregated data</a></li>
<li class="chapter" data-level="B.1.5" data-path="design.html"><a href="design.html#access-to-information-across-targets"><i class="fa fa-check"></i><b>B.1.5</b> Access to information across targets</a></li>
</ul></li>
<li class="chapter" data-level="B.2" data-path="design.html"><a href="design.html#specific-classes"><i class="fa fa-check"></i><b>B.2</b> Specific classes</a><ul>
<li class="chapter" data-level="B.2.1" data-path="design.html"><a href="design.html#config"><i class="fa fa-check"></i><b>B.2.1</b> Config</a></li>
<li class="chapter" data-level="B.2.2" data-path="design.html"><a href="design.html#settings"><i class="fa fa-check"></i><b>B.2.2</b> Settings</a></li>
<li class="chapter" data-level="B.2.3" data-path="design.html"><a href="design.html#plan-1"><i class="fa fa-check"></i><b>B.2.3</b> Plan</a></li>
<li class="chapter" data-level="B.2.4" data-path="design.html"><a href="design.html#specification"><i class="fa fa-check"></i><b>B.2.4</b> Specification</a></li>
<li class="chapter" data-level="B.2.5" data-path="design.html"><a href="design.html#graph"><i class="fa fa-check"></i><b>B.2.5</b> Graph</a></li>
<li class="chapter" data-level="B.2.6" data-path="design.html"><a href="design.html#priority-queue"><i class="fa fa-check"></i><b>B.2.6</b> Priority queue</a></li>
<li class="chapter" data-level="B.2.7" data-path="design.html"><a href="design.html#metadata"><i class="fa fa-check"></i><b>B.2.7</b> Metadata</a></li>
<li class="chapter" data-level="B.2.8" data-path="design.html"><a href="design.html#cache"><i class="fa fa-check"></i><b>B.2.8</b> Cache</a></li>
<li class="chapter" data-level="B.2.9" data-path="design.html"><a href="design.html#code-analysis-lists"><i class="fa fa-check"></i><b>B.2.9</b> Code analysis lists</a></li>
<li class="chapter" data-level="B.2.10" data-path="design.html"><a href="design.html#environments"><i class="fa fa-check"></i><b>B.2.10</b> Environments</a></li>
<li class="chapter" data-level="B.2.11" data-path="design.html"><a href="design.html#hash-tables"><i class="fa fa-check"></i><b>B.2.11</b> Hash tables</a></li>
<li class="chapter" data-level="B.2.12" data-path="design.html"><a href="design.html#logger"><i class="fa fa-check"></i><b>B.2.12</b> Logger</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The drake R Package User Manual</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="visuals" class="section level1">
<h1><span class="header-section-number">Chapter 16</span> Visualization with drake</h1>
<p>Data analysis projects have complicated networks of dependencies, and <code>drake</code> can help you visualize them with <code>vis_drake_graph()</code>, <code>sankey_drake_graph()</code>, and <code>drake_ggraph()</code> (note the two g’s).</p>
<div id="plotting-plans" class="section level2">
<h2><span class="header-section-number">16.1</span> Plotting plans</h2>
<p>Except for <code>drake</code> 7.7.0 and below, you can simply <code>plot()</code> the plan to show the targets and their dependency relationships.</p>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb237-1" data-line-number="1"><span class="kw">library</span>(drake)</a>
<a class="sourceLine" id="cb237-2" data-line-number="2"><span class="co"># from https://github.com/wlandau/drake-examples/tree/master/mtcars</span></a>
<a class="sourceLine" id="cb237-3" data-line-number="3"><span class="kw">load_mtcars_example</span>()</a>
<a class="sourceLine" id="cb237-4" data-line-number="4"></a>
<a class="sourceLine" id="cb237-5" data-line-number="5">my_plan</a>
<a class="sourceLine" id="cb237-6" data-line-number="6"><span class="co">#&gt; # A tibble: 15 x 2</span></a>
<a class="sourceLine" id="cb237-7" data-line-number="7"><span class="co">#&gt;    target               command                                                 </span></a>
<a class="sourceLine" id="cb237-8" data-line-number="8"><span class="co">#&gt;    &lt;chr&gt;                &lt;expr&gt;                                                  </span></a>
<a class="sourceLine" id="cb237-9" data-line-number="9"><span class="co">#&gt;  1 report               knit(knitr_in(&quot;report.Rmd&quot;), file_out(&quot;report.md&quot;), qui…</span></a>
<a class="sourceLine" id="cb237-10" data-line-number="10"><span class="co">#&gt;  2 small                simulate(48)                                           …</span></a>
<a class="sourceLine" id="cb237-11" data-line-number="11"><span class="co">#&gt;  3 large                simulate(64)                                           …</span></a>
<a class="sourceLine" id="cb237-12" data-line-number="12"><span class="co">#&gt;  4 regression1_small    reg1(small)                                            …</span></a>
<a class="sourceLine" id="cb237-13" data-line-number="13"><span class="co">#&gt;  5 regression1_large    reg1(large)                                            …</span></a>
<a class="sourceLine" id="cb237-14" data-line-number="14"><span class="co">#&gt;  6 regression2_small    reg2(small)                                            …</span></a>
<a class="sourceLine" id="cb237-15" data-line-number="15"><span class="co">#&gt;  7 regression2_large    reg2(large)                                            …</span></a>
<a class="sourceLine" id="cb237-16" data-line-number="16"><span class="co">#&gt;  8 summ_regression1_sm… suppressWarnings(summary(regression1_small$residuals)) …</span></a>
<a class="sourceLine" id="cb237-17" data-line-number="17"><span class="co">#&gt;  9 summ_regression1_la… suppressWarnings(summary(regression1_large$residuals)) …</span></a>
<a class="sourceLine" id="cb237-18" data-line-number="18"><span class="co">#&gt; 10 summ_regression2_sm… suppressWarnings(summary(regression2_small$residuals)) …</span></a>
<a class="sourceLine" id="cb237-19" data-line-number="19"><span class="co">#&gt; 11 summ_regression2_la… suppressWarnings(summary(regression2_large$residuals)) …</span></a>
<a class="sourceLine" id="cb237-20" data-line-number="20"><span class="co">#&gt; 12 coef_regression1_sm… suppressWarnings(summary(regression1_small))$coefficien…</span></a>
<a class="sourceLine" id="cb237-21" data-line-number="21"><span class="co">#&gt; 13 coef_regression1_la… suppressWarnings(summary(regression1_large))$coefficien…</span></a>
<a class="sourceLine" id="cb237-22" data-line-number="22"><span class="co">#&gt; 14 coef_regression2_sm… suppressWarnings(summary(regression2_small))$coefficien…</span></a>
<a class="sourceLine" id="cb237-23" data-line-number="23"><span class="co">#&gt; 15 coef_regression2_la… suppressWarnings(summary(regression2_large))$coefficien…</span></a>
<a class="sourceLine" id="cb237-24" data-line-number="24"></a>
<a class="sourceLine" id="cb237-25" data-line-number="25"><span class="kw">plot</span>(my_plan)</a></code></pre></div>
<div id="htmlwidget-44eed51e93cee206fe24" style="width:576px;height:576px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-44eed51e93cee206fe24">{"x":{"nodes":{"id":["small","large","regression2_small","regression1_small","regression1_large","regression2_large","coef_regression2_small","summ_regression2_small","coef_regression1_small","summ_regression1_small","coef_regression1_large","summ_regression1_large","summ_regression2_large","coef_regression2_large","report","p-OJSXA33SOQXG2ZA"],"imported":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],"label":["small","large","regression2_small","regression1_small","regression1_large","regression2_large","coef_regression2_small","summ_regression2_small","coef_regression1_small","summ_regression1_small","coef_regression1_large","summ_regression1_large","summ_regression2_large","coef_regression2_large","report","file report.md"],"status":["outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated"],"type":["object","object","object","object","object","object","object","object","object","object","object","object","object","object","object","file"],"font.size":[20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20],"color":["#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000"],"shape":["dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","square"],"level":[1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,5],"x":[-1,-1,-0.5,-0.5,-0.5,-0.5,0,0,0,0,0,0,0,0,0.5,1],"y":[-0.428571428571428,0.428571428571429,-0.771428571428571,-0.257142857142857,0.257142857142858,0.771428571428572,-1,-0.714285714285714,-0.428571428571428,-0.142857142857143,0.142857142857143,0.428571428571429,0.714285714285714,1,2.22044604925031e-16,2.22044604925031e-16]},"edges":{"from":["regression1_large","regression1_large","small","small","small","regression2_small","regression2_small","large","large","large","coef_regression2_small","report","regression1_small","regression1_small","regression2_large","regression2_large"],"to":["coef_regression1_large","summ_regression1_large","regression2_small","report","regression1_small","coef_regression2_small","summ_regression2_small","regression1_large","report","regression2_large","report","p-OJSXA33SOQXG2ZA","coef_regression1_small","summ_regression1_small","summ_regression2_large","coef_regression2_large"],"arrows":["to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"interaction":{"navigationButtons":true},"edges":{"smooth":false},"physics":{"stabilization":false}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":false,"hoverNearest":false,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"legend":{"width":0.2,"useGroups":false,"position":"left","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Outdated","Object","File"],"color":["#000000","#888888","#888888"],"shape":["dot","dot","square"],"font.color":["black","black","black"],"font.size":[20,20,20],"id":[2,8,11]},"nodesToDataframe":true},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);","igraphlayout":{"type":"square"}},"evals":[],"jsHooks":[]}</script>
<div id="vis_drake_graph" class="section level3">
<h3><span class="header-section-number">16.1.1</span> <code>vis_drake_graph()</code></h3>
<p>Powered by <a href="http://datastorm-open.github.io/visNetwork/"><code>visNetwork</code></a>. Colors represent target status, and shapes represent data type. These graphs are interactive, so you can click, drag, zoom, and and pan to adjust the size and position. Double-click on nodes to contract neighborhoods into clusters or expand them back out again. If you hover over a node, you will see text in a tooltip showing the first few lines of</p>
<ul>
<li>The command of a target, or</li>
<li>The body of an imported function, or</li>
<li>The content of an imported text file.</li>
</ul>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb238-1" data-line-number="1"><span class="kw">vis_drake_graph</span>(my_plan)</a></code></pre></div>
<div id="htmlwidget-060222e5f085f497d303" style="width:576px;height:576px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-060222e5f085f497d303">{"x":{"nodes":{"id":["p-OJSXA33SOQXFE3LE","reg2","random_rows","n-MRQXIYLTMV2HGOR2NV2GGYLSOM","reg1","simulate","large","small","regression2_large","regression1_large","regression2_small","regression1_small","summ_regression2_large","coef_regression2_large","coef_regression1_large","summ_regression1_large","coef_regression2_small","summ_regression2_small","coef_regression1_small","summ_regression1_small","report","p-OJSXA33SOQXG2ZA"],"imported":[true,true,true,true,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],"label":["file report.Rmd","reg2","random_rows","datasets::mtcars","reg1","simulate","large","small","regression2_large","regression1_large","regression2_small","regression1_small","summ_regression2_large","coef_regression2_large","coef_regression1_large","summ_regression1_large","coef_regression2_small","summ_regression2_small","coef_regression1_small","summ_regression1_small","report","file report.md"],"status":["imported","imported","imported","imported","imported","imported","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated"],"type":["file","function","function","object","function","function","object","object","object","object","object","object","object","object","object","object","object","object","object","object","object","file"],"font.size":[20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20],"color":["#1874CD","#1874CD","#1874CD","#1874CD","#1874CD","#1874CD","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000"],"shape":["square","triangle","triangle","dot","triangle","triangle","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","square"],"level":[1,1,1,1,1,2,3,3,4,4,4,4,5,5,5,5,5,5,5,5,6,7],"x":[-1,-1,-1,-1,-1,-0.666666666666667,-0.333333333333333,-0.333333333333333,0,0,0,0,0.333333333333333,0.333333333333333,0.333333333333333,0.333333333333333,0.333333333333333,0.333333333333333,0.333333333333333,0.333333333333333,0.666666666666667,1],"y":[-0.857142857142857,-0.428571428571428,2.22044604925031e-16,0.428571428571429,0.857142857142857,2.22044604925031e-16,-0.428571428571428,0.428571428571429,-0.771428571428571,-0.257142857142857,0.257142857142858,0.771428571428572,-1,-0.714285714285714,-0.428571428571428,-0.142857142857143,0.142857142857143,0.428571428571429,0.714285714285714,1,2.22044604925031e-16,2.22044604925031e-16]},"edges":{"from":["large","large","large","small","small","small","coef_regression2_small","p-OJSXA33SOQXFE3LE","report","regression2_small","regression2_small","simulate","simulate","reg2","reg2","random_rows","n-MRQXIYLTMV2HGOR2NV2GGYLSOM","regression1_small","regression1_small","regression2_large","regression2_large","regression1_large","regression1_large","reg1","reg1"],"to":["report","regression2_large","regression1_large","report","regression2_small","regression1_small","report","report","p-OJSXA33SOQXG2ZA","coef_regression2_small","summ_regression2_small","large","small","regression2_small","regression2_large","simulate","simulate","coef_regression1_small","summ_regression1_small","summ_regression2_large","coef_regression2_large","coef_regression1_large","summ_regression1_large","regression1_small","regression1_large"],"arrows":["to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"interaction":{"navigationButtons":true},"edges":{"smooth":false},"physics":{"stabilization":false}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"Dependency graph","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":false,"hoverNearest":false,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"legend":{"width":0.2,"useGroups":false,"position":"left","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Outdated","Imported","Object","Function","File"],"color":["#000000","#1874CD","#888888","#888888","#888888"],"shape":["dot","dot","dot","triangle","square"],"font.color":["black","black","black","black","black"],"font.size":[20,20,20,20,20],"id":[2,6,8,10,11]},"nodesToDataframe":true},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);","igraphlayout":{"type":"square"}},"evals":[],"jsHooks":[]}</script>
<p>To save this interactive widget for later, just supply the name of an HTML file.</p>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb239-1" data-line-number="1"><span class="kw">vis_drake_graph</span>(my_plan, <span class="dt">file =</span> <span class="st">&quot;graph.html&quot;</span>)</a></code></pre></div>
<p>To save a static image file, supply a file name that ends in <code>&quot;.png&quot;</code>, <code>&quot;.pdf&quot;</code>, <code>&quot;.jpeg&quot;</code>, or <code>&quot;.jpg&quot;</code>.</p>
<div class="sourceCode" id="cb240"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb240-1" data-line-number="1"><span class="kw">vis_drake_graph</span>(my_plan, <span class="dt">file =</span> <span class="st">&quot;graph.png&quot;</span>)</a></code></pre></div>
</div>
<div id="sankey_drake_graph" class="section level3">
<h3><span class="header-section-number">16.1.2</span> <code>sankey_drake_graph()</code></h3>
<p>These interactive <a href="https://github.com/christophergandrud/networkD3"><code>networkD3</code></a> <a href="https://en.wikipedia.org/wiki/Sankey_diagram">Sankey diagrams</a> have more nuance: the height of each node is proportional to its number of connections. Nodes with many incoming connnections tend to fall out of date more often, and nodes with many outgoing connections can invalidate bigger chunks of the downstream pipeline.</p>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb241-1" data-line-number="1"><span class="kw">sankey_drake_graph</span>(my_plan)</a></code></pre></div>
<div id="htmlwidget-ca029b56cbc5ce7ed7ae" style="width:576px;height:576px;" class="sankeyNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-ca029b56cbc5ce7ed7ae">{"x":{"links":{"source":[6,6,6,7,7,7,16,0,20,10,10,5,5,1,1,2,3,11,11,8,8,9,9,4,4],"target":[20,8,9,20,10,11,20,20,21,16,17,6,7,10,8,5,5,18,19,12,13,14,15,11,9],"value":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]},"nodes":{"name":["file report.Rmd","reg2","random_rows","datasets::mtcars","reg1","simulate","large","small","regression2_large","regression1_large","regression2_small","regression1_small","summ_regression2_large","coef_regression2_large","coef_regression1_large","summ_regression1_large","coef_regression2_small","summ_regression2_small","coef_regression1_small","summ_regression1_small","report","file report.md"],"group":["imported","imported","imported","imported","imported","imported","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated"]},"options":{"NodeID":"label","NodeGroup":"status","LinkGroup":null,"colourScale":"d3.scaleOrdinal() .domain(['imported', 'outdated']) .range(['#1874CD', '#000000'])","fontSize":7,"fontFamily":null,"nodeWidth":15,"nodePadding":10,"units":"","margin":{"top":null,"right":null,"bottom":null,"left":null},"iterations":32,"sinksRight":true}},"evals":[],"jsHooks":[]}</script>
<p>Saving the graphs is the same as before.</p>
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb242-1" data-line-number="1"><span class="kw">sankey_drake_graph</span>(my_plan, <span class="dt">file =</span> <span class="st">&quot;graph.html&quot;</span>) <span class="co"># Interactive HTML widget</span></a>
<a class="sourceLine" id="cb242-2" data-line-number="2"><span class="kw">sankey_drake_graph</span>(my_plan, <span class="dt">file =</span> <span class="st">&quot;graph.png&quot;</span>)  <span class="co"># Static image file</span></a></code></pre></div>
<p>Unfortunately, a legend is <a href="https://github.com/ropensci/drake/pull/467">not yet available for Sankey diagrams</a>, but <code>drake</code> exposes a separate legend for the colors and shapes.</p>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb243-1" data-line-number="1"><span class="kw">library</span>(visNetwork)</a>
<a class="sourceLine" id="cb243-2" data-line-number="2"><span class="kw">legend_nodes</span>()</a>
<a class="sourceLine" id="cb243-3" data-line-number="3"><span class="co">#&gt; # A tibble: 12 x 6</span></a>
<a class="sourceLine" id="cb243-4" data-line-number="4"><span class="co">#&gt;    label      color   shape    font.color font.size    id</span></a>
<a class="sourceLine" id="cb243-5" data-line-number="5"><span class="co">#&gt;    &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt; &lt;int&gt;</span></a>
<a class="sourceLine" id="cb243-6" data-line-number="6"><span class="co">#&gt;  1 Up to date #228B22 dot      black             20     1</span></a>
<a class="sourceLine" id="cb243-7" data-line-number="7"><span class="co">#&gt;  2 Outdated   #000000 dot      black             20     2</span></a>
<a class="sourceLine" id="cb243-8" data-line-number="8"><span class="co">#&gt;  3 Running    #FF7221 dot      black             20     3</span></a>
<a class="sourceLine" id="cb243-9" data-line-number="9"><span class="co">#&gt;  4 Cancelled  #ECB753 dot      black             20     4</span></a>
<a class="sourceLine" id="cb243-10" data-line-number="10"><span class="co">#&gt;  5 Failed     #AA0000 dot      black             20     5</span></a>
<a class="sourceLine" id="cb243-11" data-line-number="11"><span class="co">#&gt;  6 Imported   #1874CD dot      black             20     6</span></a>
<a class="sourceLine" id="cb243-12" data-line-number="12"><span class="co">#&gt;  7 Missing    #9A32CD dot      black             20     7</span></a>
<a class="sourceLine" id="cb243-13" data-line-number="13"><span class="co">#&gt;  8 Object     #888888 dot      black             20     8</span></a>
<a class="sourceLine" id="cb243-14" data-line-number="14"><span class="co">#&gt;  9 Dynamic    #888888 star     black             20     9</span></a>
<a class="sourceLine" id="cb243-15" data-line-number="15"><span class="co">#&gt; 10 Function   #888888 triangle black             20    10</span></a>
<a class="sourceLine" id="cb243-16" data-line-number="16"><span class="co">#&gt; 11 File       #888888 square   black             20    11</span></a>
<a class="sourceLine" id="cb243-17" data-line-number="17"><span class="co">#&gt; 12 Cluster    #888888 diamond  black             20    12</span></a>
<a class="sourceLine" id="cb243-18" data-line-number="18"><span class="kw">visNetwork</span>(<span class="dt">nodes =</span> <span class="kw">legend_nodes</span>())</a></code></pre></div>
<div id="htmlwidget-bcfe061eed9eec71dcdc" style="width:576px;height:576px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-bcfe061eed9eec71dcdc">{"x":{"nodes":{"label":["Up to date","Outdated","Running","Cancelled","Failed","Imported","Missing","Object","Dynamic","Function","File","Cluster"],"color":["#228B22","#000000","#FF7221","#ECB753","#AA0000","#1874CD","#9A32CD","#888888","#888888","#888888","#888888","#888888"],"shape":["dot","dot","dot","dot","dot","dot","dot","dot","star","triangle","square","diamond"],"font.color":["black","black","black","black","black","black","black","black","black","black","black","black"],"font.size":[20,20,20,20,20,20,20,20,20,20,20,20],"id":[1,2,3,4,5,6,7,8,9,10,11,12]},"edges":null,"nodesToDataframe":true,"edgesToDataframe":false,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot"},"manipulation":{"enabled":false}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false},"byselection":{"enabled":false},"main":null,"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="drake_ggraph" class="section level3">
<h3><span class="header-section-number">16.1.3</span> <code>drake_ggraph()</code></h3>
<p><code>drake_ggraph()</code> can handle larger workflows than the other graphing functions. If your project has thousands of targets and <code>vis_drake_graph()</code>/<code>sankey_drake_graph()</code> does not render properly, consider <code>drake_ggraph()</code>. Powered by <a href="https://github.com/thomasp85/ggraph"><code>ggraph</code></a>, <code>drake_ggraph()</code>s are static <a href="https://github.com/tidyverse/ggplot2"><code>ggplot2</code></a> objects, and you can save them with <code>ggsave()</code>.</p>
<div class="sourceCode" id="cb244"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb244-1" data-line-number="1"><span class="kw">drake_ggraph</span>(my_plan)</a></code></pre></div>
<p><img src="drake-manual_files/figure-html/unnamed-chunk-262-1.png" width="576" style="display: block; margin: auto;" /></p>
</div>
<div id="text_drake_graph" class="section level3">
<h3><span class="header-section-number">16.1.4</span> <code>text_drake_graph()</code></h3>
<p>If you are running R in a terminal without <a href="https://en.wikipedia.org/wiki/X_Window_System">X Window</a> support, the usual visualizations will show up interactively in your session. Here, you can use <code>text_drake_graph()</code> to see a text display in your terminal window. Terminal colors are deactivated in this manual, but you will see color in your console.</p>
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb245-1" data-line-number="1"><span class="co"># Use nchar = 0 or nchar = 1 for better results.</span></a>
<a class="sourceLine" id="cb245-2" data-line-number="2"><span class="co"># The color display is better in your own terminal.</span></a>
<a class="sourceLine" id="cb245-3" data-line-number="3"><span class="kw">text_drake_graph</span>(my_plan, <span class="dt">nchar =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb245-4" data-line-number="4"><span class="co">#&gt;                                      sum                   </span></a>
<a class="sourceLine" id="cb245-5" data-line-number="5"><span class="co">#&gt;   reg                         reg        coe                   </span></a>
<a class="sourceLine" id="cb245-6" data-line-number="6"><span class="co">#&gt;                                                          </span></a>
<a class="sourceLine" id="cb245-7" data-line-number="7"><span class="co">#&gt;   dat                sma                 sum                   </span></a>
<a class="sourceLine" id="cb245-8" data-line-number="8"><span class="co">#&gt;                             reg                            </span></a>
<a class="sourceLine" id="cb245-9" data-line-number="9"><span class="co">#&gt;                                      coe                   </span></a>
<a class="sourceLine" id="cb245-10" data-line-number="10"><span class="co">#&gt;   ran       sim                                  rep        fil  </span></a>
<a class="sourceLine" id="cb245-11" data-line-number="11"><span class="co">#&gt;                                      sum                   </span></a>
<a class="sourceLine" id="cb245-12" data-line-number="12"><span class="co">#&gt;                             reg                            </span></a>
<a class="sourceLine" id="cb245-13" data-line-number="13"><span class="co">#&gt;   reg                lar                 coe                   </span></a>
<a class="sourceLine" id="cb245-14" data-line-number="14"><span class="co">#&gt;                                                          </span></a>
<a class="sourceLine" id="cb245-15" data-line-number="15"><span class="co">#&gt;   fil                         reg        coe                   </span></a>
<a class="sourceLine" id="cb245-16" data-line-number="16"><span class="co">#&gt;                                      sum</span></a></code></pre></div>
</div>
</div>
<div id="underlying-graph-data-node-and-edge-data-frames" class="section level2">
<h2><span class="header-section-number">16.2</span> Underlying graph data: node and edge data frames</h2>
<p><code>drake_graph_info()</code> is used behind the scenes in <code>vis_drake_graph()</code>, <code>sankey_drake_graph()</code>, and <code>drake_ggraph()</code> to get the graph information ready for rendering. To save time, you can call <code>drake_graph_info()</code> to get these internals and then call <code>render_drake_graph()</code>, <code>render_sankey_drake_graph()</code>, or <code>render_drake_ggraph()</code>.</p>
<div class="sourceCode" id="cb246"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb246-1" data-line-number="1"><span class="kw">str</span>(<span class="kw">drake_graph_info</span>(my_plan))</a>
<a class="sourceLine" id="cb246-2" data-line-number="2"><span class="co">#&gt; List of 4</span></a>
<a class="sourceLine" id="cb246-3" data-line-number="3"><span class="co">#&gt;  $ nodes        :Classes &#39;tbl_df&#39;, &#39;tbl&#39; and &#39;data.frame&#39;:   22 obs. of  12 variables:</span></a>
<a class="sourceLine" id="cb246-4" data-line-number="4"><span class="co">#&gt;   ..$ id       : chr [1:22] &quot;p-OJSXA33SOQXFE3LE&quot; &quot;reg2&quot; &quot;random_rows&quot; &quot;n-MRQXIYLTMV2HGOR2NV2GGYLSOM&quot; ...</span></a>
<a class="sourceLine" id="cb246-5" data-line-number="5"><span class="co">#&gt;   ..$ imported : logi [1:22] TRUE TRUE TRUE TRUE TRUE TRUE ...</span></a>
<a class="sourceLine" id="cb246-6" data-line-number="6"><span class="co">#&gt;   ..$ label    : chr [1:22] &quot;file report.Rmd&quot; &quot;reg2&quot; &quot;random_rows&quot; &quot;datasets::mtcars&quot; ...</span></a>
<a class="sourceLine" id="cb246-7" data-line-number="7"><span class="co">#&gt;   ..$ status   : chr [1:22] &quot;imported&quot; &quot;imported&quot; &quot;imported&quot; &quot;imported&quot; ...</span></a>
<a class="sourceLine" id="cb246-8" data-line-number="8"><span class="co">#&gt;   ..$ type     : chr [1:22] &quot;file&quot; &quot;function&quot; &quot;function&quot; &quot;object&quot; ...</span></a>
<a class="sourceLine" id="cb246-9" data-line-number="9"><span class="co">#&gt;   ..$ font.size: num [1:22] 20 20 20 20 20 20 20 20 20 20 ...</span></a>
<a class="sourceLine" id="cb246-10" data-line-number="10"><span class="co">#&gt;   ..$ color    : chr [1:22] &quot;#1874CD&quot; &quot;#1874CD&quot; &quot;#1874CD&quot; &quot;#1874CD&quot; ...</span></a>
<a class="sourceLine" id="cb246-11" data-line-number="11"><span class="co">#&gt;   ..$ shape    : chr [1:22] &quot;square&quot; &quot;triangle&quot; &quot;triangle&quot; &quot;dot&quot; ...</span></a>
<a class="sourceLine" id="cb246-12" data-line-number="12"><span class="co">#&gt;   ..$ level    : num [1:22] 1 1 1 1 1 2 3 3 4 4 ...</span></a>
<a class="sourceLine" id="cb246-13" data-line-number="13"><span class="co">#&gt;   ..$ title    : chr [1:22] &quot;Call drake_graph_info(hover = TRUE) for informative text.&quot; &quot;Call drake_graph_info(hover = TRUE) for informative text.&quot; &quot;Call drake_graph_info(hover = TRUE) for informative text.&quot; &quot;Call drake_graph_info(hover = TRUE) for informative text.&quot; ...</span></a>
<a class="sourceLine" id="cb246-14" data-line-number="14"><span class="co">#&gt;   ..$ x        : num [1:22] -1 -1 -1 -1 -1 ...</span></a>
<a class="sourceLine" id="cb246-15" data-line-number="15"><span class="co">#&gt;   ..$ y        : num [1:22] -8.57e-01 -4.29e-01 2.22e-16 4.29e-01 8.57e-01 ...</span></a>
<a class="sourceLine" id="cb246-16" data-line-number="16"><span class="co">#&gt;  $ edges        :Classes &#39;tbl_df&#39;, &#39;tbl&#39; and &#39;data.frame&#39;:   25 obs. of  3 variables:</span></a>
<a class="sourceLine" id="cb246-17" data-line-number="17"><span class="co">#&gt;   ..$ from  : chr [1:25] &quot;large&quot; &quot;large&quot; &quot;large&quot; &quot;small&quot; ...</span></a>
<a class="sourceLine" id="cb246-18" data-line-number="18"><span class="co">#&gt;   ..$ to    : chr [1:25] &quot;report&quot; &quot;regression2_large&quot; &quot;regression1_large&quot; &quot;report&quot; ...</span></a>
<a class="sourceLine" id="cb246-19" data-line-number="19"><span class="co">#&gt;   ..$ arrows: chr [1:25] &quot;to&quot; &quot;to&quot; &quot;to&quot; &quot;to&quot; ...</span></a>
<a class="sourceLine" id="cb246-20" data-line-number="20"><span class="co">#&gt;  $ legend_nodes :Classes &#39;tbl_df&#39;, &#39;tbl&#39; and &#39;data.frame&#39;:   5 obs. of  6 variables:</span></a>
<a class="sourceLine" id="cb246-21" data-line-number="21"><span class="co">#&gt;   ..$ label     : chr [1:5] &quot;Outdated&quot; &quot;Imported&quot; &quot;Object&quot; &quot;Function&quot; ...</span></a>
<a class="sourceLine" id="cb246-22" data-line-number="22"><span class="co">#&gt;   ..$ color     : chr [1:5] &quot;#000000&quot; &quot;#1874CD&quot; &quot;#888888&quot; &quot;#888888&quot; ...</span></a>
<a class="sourceLine" id="cb246-23" data-line-number="23"><span class="co">#&gt;   ..$ shape     : chr [1:5] &quot;dot&quot; &quot;dot&quot; &quot;dot&quot; &quot;triangle&quot; ...</span></a>
<a class="sourceLine" id="cb246-24" data-line-number="24"><span class="co">#&gt;   ..$ font.color: chr [1:5] &quot;black&quot; &quot;black&quot; &quot;black&quot; &quot;black&quot; ...</span></a>
<a class="sourceLine" id="cb246-25" data-line-number="25"><span class="co">#&gt;   ..$ font.size : num [1:5] 20 20 20 20 20</span></a>
<a class="sourceLine" id="cb246-26" data-line-number="26"><span class="co">#&gt;   ..$ id        : int [1:5] 2 6 8 10 11</span></a>
<a class="sourceLine" id="cb246-27" data-line-number="27"><span class="co">#&gt;  $ default_title: chr &quot;Dependency graph&quot;</span></a>
<a class="sourceLine" id="cb246-28" data-line-number="28"><span class="co">#&gt;  - attr(*, &quot;class&quot;)= chr &quot;drake_graph_info&quot;</span></a></code></pre></div>
</div>
<div id="visualizing-target-status" class="section level2">
<h2><span class="header-section-number">16.3</span> Visualizing target status</h2>
<p><code>drake</code>’s visuals tell you which targets are up to date and which are outdated.</p>
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb247-1" data-line-number="1"><span class="kw">make</span>(my_plan, <span class="dt">verbose =</span> 0L)</a>
<a class="sourceLine" id="cb247-2" data-line-number="2"><span class="kw">outdated</span>(my_plan)</a>
<a class="sourceLine" id="cb247-3" data-line-number="3"><span class="co">#&gt; character(0)</span></a>
<a class="sourceLine" id="cb247-4" data-line-number="4"></a>
<a class="sourceLine" id="cb247-5" data-line-number="5"><span class="kw">sankey_drake_graph</span>(my_plan)</a></code></pre></div>
<div id="htmlwidget-c8163b5d4281ac6d97ea" style="width:576px;height:576px;" class="sankeyNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-c8163b5d4281ac6d97ea">{"x":{"links":{"source":[6,6,6,7,7,7,16,0,20,10,10,5,5,1,1,2,3,11,11,8,8,9,9,4,4],"target":[20,8,9,20,10,11,20,20,21,16,17,6,7,10,8,5,5,18,19,12,13,14,15,11,9],"value":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]},"nodes":{"name":["file report.Rmd","reg2","random_rows","datasets::mtcars","reg1","simulate","large (0.004s)","small (0.004s)","regression2_large (0.005s)","regression1_large (0.004s)","regression2_small (0.005s)","regression1_small (0.004s)","summ_regression2_large (0.003s)","coef_regression2_large (0.003s)","coef_regression1_large (0.003s)","summ_regression1_large (0.003s)","coef_regression2_small (0.004s)","summ_regression2_small (0.003s)","coef_regression1_small (0.003s)","summ_regression1_small (0.002s)","report (0.044s)","file report.md"],"group":["imported","imported","imported","imported","imported","imported","up_to_date","up_to_date","up_to_date","up_to_date","up_to_date","up_to_date","up_to_date","up_to_date","up_to_date","up_to_date","up_to_date","up_to_date","up_to_date","up_to_date","up_to_date","up_to_date"]},"options":{"NodeID":"label","NodeGroup":"status","LinkGroup":null,"colourScale":"d3.scaleOrdinal() .domain(['imported', 'up_to_date']) .range(['#1874CD', '#228B22'])","fontSize":7,"fontFamily":null,"nodeWidth":15,"nodePadding":10,"units":"","margin":{"top":null,"right":null,"bottom":null,"left":null},"iterations":32,"sinksRight":true}},"evals":[],"jsHooks":[]}</script>
<p>When you change a dependency, some targets fall out of date (black nodes).</p>
<div class="sourceCode" id="cb248"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb248-1" data-line-number="1">reg2 &lt;-<span class="st"> </span><span class="cf">function</span>(d){</a>
<a class="sourceLine" id="cb248-2" data-line-number="2">  d<span class="op">$</span>x3 &lt;-<span class="st"> </span>d<span class="op">$</span>x <span class="op">^</span><span class="st"> </span><span class="dv">3</span></a>
<a class="sourceLine" id="cb248-3" data-line-number="3">  <span class="kw">lm</span>(y <span class="op">~</span><span class="st"> </span>x3, <span class="dt">data =</span> d)</a>
<a class="sourceLine" id="cb248-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb248-5" data-line-number="5"><span class="kw">sankey_drake_graph</span>(my_plan)</a></code></pre></div>
<div id="htmlwidget-b0db740b948cfe60c73e" style="width:576px;height:576px;" class="sankeyNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-b0db740b948cfe60c73e">{"x":{"links":{"source":[6,6,6,7,7,7,16,0,20,10,10,5,5,1,1,2,3,11,11,8,8,9,9,4,4],"target":[20,8,9,20,10,11,20,20,21,16,17,6,7,10,8,5,5,18,19,12,13,14,15,11,9],"value":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]},"nodes":{"name":["file report.Rmd","reg2","random_rows","datasets::mtcars","reg1","simulate","large (0.004s)","small (0.004s)","regression2_large (0.005s)","regression1_large (0.004s)","regression2_small (0.005s)","regression1_small (0.004s)","summ_regression2_large (0.003s)","coef_regression2_large (0.003s)","coef_regression1_large (0.003s)","summ_regression1_large (0.003s)","coef_regression2_small (0.004s)","summ_regression2_small (0.003s)","coef_regression1_small (0.003s)","summ_regression1_small (0.002s)","report (0.044s)","file report.md"],"group":["imported","imported","imported","imported","imported","imported","up_to_date","up_to_date","outdated","up_to_date","outdated","up_to_date","outdated","outdated","up_to_date","up_to_date","outdated","outdated","up_to_date","up_to_date","outdated","outdated"]},"options":{"NodeID":"label","NodeGroup":"status","LinkGroup":null,"colourScale":"d3.scaleOrdinal() .domain(['imported', 'up_to_date', 'outdated']) .range(['#1874CD', '#228B22', '#000000'])","fontSize":7,"fontFamily":null,"nodeWidth":15,"nodePadding":10,"units":"","margin":{"top":null,"right":null,"bottom":null,"left":null},"iterations":32,"sinksRight":true}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="subgraphs" class="section level2">
<h2><span class="header-section-number">16.4</span> Subgraphs</h2>
<p>Graphs can grow enormous for serious projects, so there are multiple ways to focus on a manageable subgraph. The most brute-force way is to just pick a manual <code>subset</code> of nodes. However, with the <code>subset</code> argument, the graphing functions can drop intermediate nodes and edges.</p>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb249-1" data-line-number="1"><span class="kw">vis_drake_graph</span>(</a>
<a class="sourceLine" id="cb249-2" data-line-number="2">  my_plan,</a>
<a class="sourceLine" id="cb249-3" data-line-number="3">  <span class="dt">subset =</span> <span class="kw">c</span>(<span class="st">&quot;regression2_small&quot;</span>, <span class="st">&quot;large&quot;</span>)</a>
<a class="sourceLine" id="cb249-4" data-line-number="4">)</a></code></pre></div>
<div id="htmlwidget-202078f06a05885eebf6" style="width:576px;height:576px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-202078f06a05885eebf6">{"x":{"nodes":{"id":["large","regression2_small"],"imported":[false,false],"label":["large\n0.004s","regression2_small\n0.005s"],"status":["up to date","outdated"],"type":["object","object"],"font.size":[20,20],"color":["#228B22","#000000"],"shape":["dot","dot"],"level":[1,1],"x":[0,0],"y":[-1,1]},"edges":{"from":[],"to":[]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"interaction":{"navigationButtons":true},"layout":{"hierarchical":{"enabled":true,"direction":"LR"}}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"Dependency graph","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":false,"hoverNearest":false,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"legend":{"width":0.2,"useGroups":false,"position":"left","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Up to date","Outdated","Object"],"color":["#228B22","#000000","#888888"],"shape":["dot","dot","dot"],"font.color":["black","black","black"],"font.size":[20,20,20],"id":[1,2,8]},"nodesToDataframe":true},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);"},"evals":[],"jsHooks":[]}</script>
<p>The rest of the subgraph functionality preserves connectedness. Use <code>targets_only</code> to ignore the imports.</p>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb250-1" data-line-number="1"><span class="kw">vis_drake_graph</span>(my_plan, <span class="dt">targets_only =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<div id="htmlwidget-85332d8ffcd4723e094c" style="width:576px;height:576px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-85332d8ffcd4723e094c">{"x":{"nodes":{"id":["large","small","regression2_large","regression1_large","regression2_small","regression1_small","summ_regression2_large","coef_regression2_large","coef_regression1_large","summ_regression1_large","coef_regression2_small","summ_regression2_small","coef_regression1_small","summ_regression1_small","report","p-OJSXA33SOQXG2ZA"],"imported":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],"label":["large\n0.004s","small\n0.004s","regression2_large\n0.005s","regression1_large\n0.004s","regression2_small\n0.005s","regression1_small\n0.004s","summ_regression2_large\n0.003s","coef_regression2_large\n0.003s","coef_regression1_large\n0.003s","summ_regression1_large\n0.003s","coef_regression2_small\n0.004s","summ_regression2_small\n0.003s","coef_regression1_small\n0.003s","summ_regression1_small\n0.002s","report\n0.044s","file report.md"],"status":["up to date","up to date","outdated","up to date","outdated","up to date","outdated","outdated","up to date","up to date","outdated","outdated","up to date","up to date","outdated","outdated"],"type":["object","object","object","object","object","object","object","object","object","object","object","object","object","object","object","file"],"font.size":[20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20],"color":["#228B22","#228B22","#000000","#228B22","#000000","#228B22","#000000","#000000","#228B22","#228B22","#000000","#000000","#228B22","#228B22","#000000","#000000"],"shape":["dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","square"],"level":[1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,5],"x":[-1,-1,-0.5,-0.5,-0.5,-0.5,0,0,0,0,0,0,0,0,0.5,1],"y":[-0.428571428571428,0.428571428571429,-0.771428571428571,-0.257142857142857,0.257142857142858,0.771428571428572,-1,-0.714285714285714,-0.428571428571428,-0.142857142857143,0.142857142857143,0.428571428571429,0.714285714285714,1,2.22044604925031e-16,2.22044604925031e-16]},"edges":{"from":["large","large","large","small","small","small","coef_regression2_small","report","regression2_small","regression2_small","regression1_small","regression1_small","regression2_large","regression2_large","regression1_large","regression1_large"],"to":["report","regression2_large","regression1_large","report","regression2_small","regression1_small","report","p-OJSXA33SOQXG2ZA","coef_regression2_small","summ_regression2_small","coef_regression1_small","summ_regression1_small","summ_regression2_large","coef_regression2_large","coef_regression1_large","summ_regression1_large"],"arrows":["to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"interaction":{"navigationButtons":true},"edges":{"smooth":false},"physics":{"stabilization":false}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"Dependency graph","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":false,"hoverNearest":false,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"legend":{"width":0.2,"useGroups":false,"position":"left","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Up to date","Outdated","Object","File"],"color":["#228B22","#000000","#888888","#888888"],"shape":["dot","dot","dot","square"],"font.color":["black","black","black","black"],"font.size":[20,20,20,20],"id":[1,2,8,11]},"nodesToDataframe":true},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);","igraphlayout":{"type":"square"}},"evals":[],"jsHooks":[]}</script>
<p>Similarly, you can just show downstream nodes.</p>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb251-1" data-line-number="1"><span class="kw">vis_drake_graph</span>(my_plan, <span class="dt">from =</span> <span class="kw">c</span>(<span class="st">&quot;regression2_small&quot;</span>, <span class="st">&quot;regression2_large&quot;</span>))</a></code></pre></div>
<div id="htmlwidget-8d248cc6845a458c157d" style="width:576px;height:576px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-8d248cc6845a458c157d">{"x":{"nodes":{"id":["regression2_small","regression2_large","coef_regression2_small","summ_regression2_small","summ_regression2_large","coef_regression2_large","report","p-OJSXA33SOQXG2ZA"],"imported":[false,false,false,false,false,false,false,false],"label":["regression2_small\n0.005s","regression2_large\n0.005s","coef_regression2_small\n0.004s","summ_regression2_small\n0.003s","summ_regression2_large\n0.003s","coef_regression2_large\n0.003s","report\n0.044s","file report.md"],"status":["outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated"],"type":["object","object","object","object","object","object","object","file"],"font.size":[20,20,20,20,20,20,20,20],"color":["#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000"],"shape":["dot","dot","dot","dot","dot","dot","dot","square"],"level":[1,1,2,2,2,2,3,4],"x":[-1,-1,-0.333333333333333,-0.333333333333333,-0.333333333333333,-0.333333333333333,0.333333333333333,1],"y":[-0.555555555555556,0.555555555555555,-1,-0.333333333333333,0.333333333333333,1,-2.22044604925031e-16,-2.22044604925031e-16]},"edges":{"from":["coef_regression2_small","report","regression2_small","regression2_small","regression2_large","regression2_large"],"to":["report","p-OJSXA33SOQXG2ZA","coef_regression2_small","summ_regression2_small","summ_regression2_large","coef_regression2_large"],"arrows":["to","to","to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"interaction":{"navigationButtons":true},"layout":{"hierarchical":{"enabled":true,"direction":"LR"}}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"Dependency graph","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":false,"hoverNearest":false,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"legend":{"width":0.2,"useGroups":false,"position":"left","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Outdated","Object","File"],"color":["#000000","#888888","#888888"],"shape":["dot","dot","square"],"font.color":["black","black","black"],"font.size":[20,20,20],"id":[2,8,11]},"nodesToDataframe":true},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);"},"evals":[],"jsHooks":[]}</script>
<p>Or upstream ones.</p>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb252-1" data-line-number="1"><span class="kw">vis_drake_graph</span>(my_plan, <span class="dt">from =</span> <span class="st">&quot;small&quot;</span>, <span class="dt">mode =</span> <span class="st">&quot;in&quot;</span>)</a></code></pre></div>
<div id="htmlwidget-3a1720f9a5da47692e40" style="width:576px;height:576px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-3a1720f9a5da47692e40">{"x":{"nodes":{"id":["random_rows","n-MRQXIYLTMV2HGOR2NV2GGYLSOM","simulate","small"],"imported":[true,true,true,false],"label":["random_rows","datasets::mtcars","simulate","small\n0.004s"],"status":["imported","imported","imported","up to date"],"type":["function","object","function","object"],"font.size":[20,20,20,20],"color":["#1874CD","#1874CD","#1874CD","#228B22"],"shape":["triangle","dot","triangle","dot"],"level":[1,1,2,3],"x":[-1,-1,0,1],"y":[-1,1,2.22044604925031e-16,2.22044604925031e-16]},"edges":{"from":["simulate","random_rows","n-MRQXIYLTMV2HGOR2NV2GGYLSOM"],"to":["small","simulate","simulate"],"arrows":["to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"interaction":{"navigationButtons":true},"layout":{"hierarchical":{"enabled":true,"direction":"LR"}}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"Dependency graph","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":false,"hoverNearest":false,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"legend":{"width":0.2,"useGroups":false,"position":"left","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Up to date","Imported","Object","Function"],"color":["#228B22","#1874CD","#888888","#888888"],"shape":["dot","dot","dot","triangle"],"font.color":["black","black","black","black"],"font.size":[20,20,20,20],"id":[1,6,8,10]},"nodesToDataframe":true},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);"},"evals":[],"jsHooks":[]}</script>
<p>In fact, let us just take a small neighborhood around a target in both directions. For the graph below, given order is 1, but all the custom <code>file_out()</code> output files of the neighborhood’s targets appear as well. This ensures consistent behavior between <code>show_output_files = TRUE</code> and <code>show_output_files = FALSE</code> (more on that later).</p>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb253-1" data-line-number="1"><span class="kw">vis_drake_graph</span>(my_plan, <span class="dt">from =</span> <span class="st">&quot;small&quot;</span>, <span class="dt">mode =</span> <span class="st">&quot;all&quot;</span>, <span class="dt">order =</span> <span class="dv">1</span>)</a></code></pre></div>
<div id="htmlwidget-3fd5ff6b0bd08191c2de" style="width:576px;height:576px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-3fd5ff6b0bd08191c2de">{"x":{"nodes":{"id":["simulate","small","report","regression2_small","regression1_small"],"imported":[true,false,false,false,false],"label":["simulate","small\n0.004s","report\n0.044s","regression2_small\n0.005s","regression1_small\n0.004s"],"status":["imported","up to date","up to date","outdated","up to date"],"type":["function","object","object","object","object"],"font.size":[20,20,20,20,20],"color":["#1874CD","#228B22","#228B22","#000000","#228B22"],"shape":["triangle","dot","dot","dot","dot"],"level":[1,2,3,3,3],"x":[-1,0,1,1,1],"y":[0,0,-1,0,1]},"edges":{"from":["small","small","small","simulate"],"to":["report","regression2_small","regression1_small","small"],"arrows":["to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"interaction":{"navigationButtons":true},"layout":{"hierarchical":{"enabled":true,"direction":"LR"}}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"Dependency graph","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":false,"hoverNearest":false,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"legend":{"width":0.2,"useGroups":false,"position":"left","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Up to date","Outdated","Imported","Object","Function"],"color":["#228B22","#000000","#1874CD","#888888","#888888"],"shape":["dot","dot","dot","dot","triangle"],"font.color":["black","black","black","black","black"],"font.size":[20,20,20,20,20],"id":[1,2,6,8,10]},"nodesToDataframe":true},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="control-the-vis_drake_graph-legend." class="section level2">
<h2><span class="header-section-number">16.5</span> Control the <code>vis_drake_graph()</code> legend.</h2>
<p>Some arguments to <code>vis_drake_graph()</code> control the legend.</p>
<div class="sourceCode" id="cb254"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb254-1" data-line-number="1"><span class="kw">vis_drake_graph</span>(my_plan, <span class="dt">full_legend =</span> <span class="ot">TRUE</span>, <span class="dt">ncol_legend =</span> <span class="dv">2</span>)</a></code></pre></div>
<div id="htmlwidget-be9709368ea8c345cf8a" style="width:576px;height:576px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-be9709368ea8c345cf8a">{"x":{"nodes":{"id":["p-OJSXA33SOQXFE3LE","reg2","random_rows","n-MRQXIYLTMV2HGOR2NV2GGYLSOM","reg1","simulate","large","small","regression2_large","regression1_large","regression2_small","regression1_small","summ_regression2_large","coef_regression2_large","coef_regression1_large","summ_regression1_large","coef_regression2_small","summ_regression2_small","coef_regression1_small","summ_regression1_small","report","p-OJSXA33SOQXG2ZA"],"imported":[true,true,true,true,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],"label":["file report.Rmd","reg2","random_rows","datasets::mtcars","reg1","simulate","large\n0.004s","small\n0.004s","regression2_large\n0.005s","regression1_large\n0.004s","regression2_small\n0.005s","regression1_small\n0.004s","summ_regression2_large\n0.003s","coef_regression2_large\n0.003s","coef_regression1_large\n0.003s","summ_regression1_large\n0.003s","coef_regression2_small\n0.004s","summ_regression2_small\n0.003s","coef_regression1_small\n0.003s","summ_regression1_small\n0.002s","report\n0.044s","file report.md"],"status":["imported","imported","imported","imported","imported","imported","up to date","up to date","outdated","up to date","outdated","up to date","outdated","outdated","up to date","up to date","outdated","outdated","up to date","up to date","outdated","outdated"],"type":["file","function","function","object","function","function","object","object","object","object","object","object","object","object","object","object","object","object","object","object","object","file"],"font.size":[20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20],"color":["#1874CD","#1874CD","#1874CD","#1874CD","#1874CD","#1874CD","#228B22","#228B22","#000000","#228B22","#000000","#228B22","#000000","#000000","#228B22","#228B22","#000000","#000000","#228B22","#228B22","#000000","#000000"],"shape":["square","triangle","triangle","dot","triangle","triangle","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","square"],"level":[1,1,1,1,1,2,3,3,4,4,4,4,5,5,5,5,5,5,5,5,6,7],"x":[-1,-1,-1,-1,-1,-0.666666666666667,-0.333333333333333,-0.333333333333333,0,0,0,0,0.333333333333333,0.333333333333333,0.333333333333333,0.333333333333333,0.333333333333333,0.333333333333333,0.333333333333333,0.333333333333333,0.666666666666667,1],"y":[-0.857142857142857,-0.428571428571428,2.22044604925031e-16,0.428571428571429,0.857142857142857,2.22044604925031e-16,-0.428571428571428,0.428571428571429,-0.771428571428571,-0.257142857142857,0.257142857142858,0.771428571428572,-1,-0.714285714285714,-0.428571428571428,-0.142857142857143,0.142857142857143,0.428571428571429,0.714285714285714,1,2.22044604925031e-16,2.22044604925031e-16]},"edges":{"from":["large","large","large","small","small","small","coef_regression2_small","p-OJSXA33SOQXFE3LE","report","regression2_small","regression2_small","simulate","simulate","reg2","reg2","random_rows","n-MRQXIYLTMV2HGOR2NV2GGYLSOM","regression1_small","regression1_small","regression2_large","regression2_large","regression1_large","regression1_large","reg1","reg1"],"to":["report","regression2_large","regression1_large","report","regression2_small","regression1_small","report","report","p-OJSXA33SOQXG2ZA","coef_regression2_small","summ_regression2_small","large","small","regression2_small","regression2_large","simulate","simulate","coef_regression1_small","summ_regression1_small","summ_regression2_large","coef_regression2_large","coef_regression1_large","summ_regression1_large","regression1_small","regression1_large"],"arrows":["to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"interaction":{"navigationButtons":true},"edges":{"smooth":false},"physics":{"stabilization":false}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"Dependency graph","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":false,"hoverNearest":false,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"legend":{"width":0.2,"useGroups":false,"position":"left","ncol":2,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Up to date","Outdated","Running","Cancelled","Failed","Imported","Missing","Object","Dynamic","Function","File","Cluster"],"color":["#228B22","#000000","#FF7221","#ECB753","#AA0000","#1874CD","#9A32CD","#888888","#888888","#888888","#888888","#888888"],"shape":["dot","dot","dot","dot","dot","dot","dot","dot","star","triangle","square","diamond"],"font.color":["black","black","black","black","black","black","black","black","black","black","black","black"],"font.size":[20,20,20,20,20,20,20,20,20,20,20,20],"id":[1,2,3,4,5,6,7,8,9,10,11,12]},"nodesToDataframe":true},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);","igraphlayout":{"type":"square"}},"evals":[],"jsHooks":[]}</script>
<p>To remove the legend altogether, set the <code>ncol_legend</code> argument to <code>0</code>.</p>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb255-1" data-line-number="1"><span class="kw">vis_drake_graph</span>(my_plan, <span class="dt">ncol_legend =</span> <span class="dv">0</span>)</a></code></pre></div>
<div id="htmlwidget-96a7be1942a1bd0dfb05" style="width:576px;height:576px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-96a7be1942a1bd0dfb05">{"x":{"nodes":{"id":["p-OJSXA33SOQXFE3LE","reg2","random_rows","n-MRQXIYLTMV2HGOR2NV2GGYLSOM","reg1","simulate","large","small","regression2_large","regression1_large","regression2_small","regression1_small","summ_regression2_large","coef_regression2_large","coef_regression1_large","summ_regression1_large","coef_regression2_small","summ_regression2_small","coef_regression1_small","summ_regression1_small","report","p-OJSXA33SOQXG2ZA"],"imported":[true,true,true,true,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],"label":["file report.Rmd","reg2","random_rows","datasets::mtcars","reg1","simulate","large\n0.004s","small\n0.004s","regression2_large\n0.005s","regression1_large\n0.004s","regression2_small\n0.005s","regression1_small\n0.004s","summ_regression2_large\n0.003s","coef_regression2_large\n0.003s","coef_regression1_large\n0.003s","summ_regression1_large\n0.003s","coef_regression2_small\n0.004s","summ_regression2_small\n0.003s","coef_regression1_small\n0.003s","summ_regression1_small\n0.002s","report\n0.044s","file report.md"],"status":["imported","imported","imported","imported","imported","imported","up to date","up to date","outdated","up to date","outdated","up to date","outdated","outdated","up to date","up to date","outdated","outdated","up to date","up to date","outdated","outdated"],"type":["file","function","function","object","function","function","object","object","object","object","object","object","object","object","object","object","object","object","object","object","object","file"],"font.size":[20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20],"color":["#1874CD","#1874CD","#1874CD","#1874CD","#1874CD","#1874CD","#228B22","#228B22","#000000","#228B22","#000000","#228B22","#000000","#000000","#228B22","#228B22","#000000","#000000","#228B22","#228B22","#000000","#000000"],"shape":["square","triangle","triangle","dot","triangle","triangle","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","square"],"level":[1,1,1,1,1,2,3,3,4,4,4,4,5,5,5,5,5,5,5,5,6,7],"x":[-1,-1,-1,-1,-1,-0.666666666666667,-0.333333333333333,-0.333333333333333,0,0,0,0,0.333333333333333,0.333333333333333,0.333333333333333,0.333333333333333,0.333333333333333,0.333333333333333,0.333333333333333,0.333333333333333,0.666666666666667,1],"y":[-0.857142857142857,-0.428571428571428,2.22044604925031e-16,0.428571428571429,0.857142857142857,2.22044604925031e-16,-0.428571428571428,0.428571428571429,-0.771428571428571,-0.257142857142857,0.257142857142858,0.771428571428572,-1,-0.714285714285714,-0.428571428571428,-0.142857142857143,0.142857142857143,0.428571428571429,0.714285714285714,1,2.22044604925031e-16,2.22044604925031e-16]},"edges":{"from":["large","large","large","small","small","small","coef_regression2_small","p-OJSXA33SOQXFE3LE","report","regression2_small","regression2_small","simulate","simulate","reg2","reg2","random_rows","n-MRQXIYLTMV2HGOR2NV2GGYLSOM","regression1_small","regression1_small","regression2_large","regression2_large","regression1_large","regression1_large","reg1","reg1"],"to":["report","regression2_large","regression1_large","report","regression2_small","regression1_small","report","report","p-OJSXA33SOQXG2ZA","coef_regression2_small","summ_regression2_small","large","small","regression2_small","regression2_large","simulate","simulate","coef_regression1_small","summ_regression1_small","summ_regression2_large","coef_regression2_large","coef_regression1_large","summ_regression1_large","regression1_small","regression1_large"],"arrows":["to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"interaction":{"navigationButtons":true},"edges":{"smooth":false},"physics":{"stabilization":false}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"Dependency graph","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":false,"hoverNearest":false,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);","igraphlayout":{"type":"square"}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="clusters" class="section level2">
<h2><span class="header-section-number">16.6</span> Clusters</h2>
<p>With the <code>group</code> and <code>clusters</code> arguments to the graphing functions, you can condense nodes into clusters. This is handy for workflows with lots of targets. Take the schools scenario from the <a href="plans.html#plans"><code>drake</code> plan guide</a>. Our plan was generated with <code>drake_plan(trace = TRUE)</code>, so it has wildcard columns that group nodes into natural clusters already. You can manually add such columns if you wish.</p>
<div class="sourceCode" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb256-1" data-line-number="1"><span class="co"># Visit https://books.ropensci.org/drake/static.html</span></a>
<a class="sourceLine" id="cb256-2" data-line-number="2"><span class="co"># to learn about the syntax with target(transform = ...).</span></a>
<a class="sourceLine" id="cb256-3" data-line-number="3">plan &lt;-<span class="st"> </span><span class="kw">drake_plan</span>(</a>
<a class="sourceLine" id="cb256-4" data-line-number="4">  <span class="dt">school =</span> <span class="kw">target</span>(</a>
<a class="sourceLine" id="cb256-5" data-line-number="5">    <span class="kw">get_school_data</span>(id),</a>
<a class="sourceLine" id="cb256-6" data-line-number="6">    <span class="dt">transform =</span> <span class="kw">map</span>(<span class="dt">id =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>))</a>
<a class="sourceLine" id="cb256-7" data-line-number="7">  ),</a>
<a class="sourceLine" id="cb256-8" data-line-number="8">  <span class="dt">credits =</span> <span class="kw">target</span>(</a>
<a class="sourceLine" id="cb256-9" data-line-number="9">    <span class="kw">fun</span>(school),</a>
<a class="sourceLine" id="cb256-10" data-line-number="10">    <span class="dt">transform =</span> <span class="kw">cross</span>(</a>
<a class="sourceLine" id="cb256-11" data-line-number="11">      school,</a>
<a class="sourceLine" id="cb256-12" data-line-number="12">      <span class="dt">fun =</span> <span class="kw">c</span>(check_credit_hours, check_students, check_graduations)</a>
<a class="sourceLine" id="cb256-13" data-line-number="13">    )</a>
<a class="sourceLine" id="cb256-14" data-line-number="14">  ),</a>
<a class="sourceLine" id="cb256-15" data-line-number="15">  <span class="dt">public_funds_school =</span> <span class="kw">target</span>(</a>
<a class="sourceLine" id="cb256-16" data-line-number="16">    <span class="dt">command =</span> <span class="kw">check_public_funding</span>(school),</a>
<a class="sourceLine" id="cb256-17" data-line-number="17">    <span class="dt">transform =</span> <span class="kw">map</span>(<span class="dt">school =</span> <span class="kw">c</span>(school_<span class="dv">1</span>, school_<span class="dv">2</span>))</a>
<a class="sourceLine" id="cb256-18" data-line-number="18">  ),</a>
<a class="sourceLine" id="cb256-19" data-line-number="19">  <span class="dt">trace =</span> <span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb256-20" data-line-number="20">)</a>
<a class="sourceLine" id="cb256-21" data-line-number="21">plan</a>
<a class="sourceLine" id="cb256-22" data-line-number="22"><span class="co">#&gt; # A tibble: 14 x 7</span></a>
<a class="sourceLine" id="cb256-23" data-line-number="23"><span class="co">#&gt;    target       command      fun     school credits     public_funds_scho… id   </span></a>
<a class="sourceLine" id="cb256-24" data-line-number="24"><span class="co">#&gt;    &lt;chr&gt;        &lt;expr&gt;       &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;       &lt;chr&gt;              &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb256-25" data-line-number="25"><span class="co">#&gt;  1 credits_che… check_credi… check_… schoo… credits_ch… &lt;NA&gt;               &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb256-26" data-line-number="26"><span class="co">#&gt;  2 credits_che… check_stude… check_… schoo… credits_ch… &lt;NA&gt;               &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb256-27" data-line-number="27"><span class="co">#&gt;  3 credits_che… check_gradu… check_… schoo… credits_ch… &lt;NA&gt;               &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb256-28" data-line-number="28"><span class="co">#&gt;  4 credits_che… check_credi… check_… schoo… credits_ch… &lt;NA&gt;               &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb256-29" data-line-number="29"><span class="co">#&gt;  5 credits_che… check_stude… check_… schoo… credits_ch… &lt;NA&gt;               &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb256-30" data-line-number="30"><span class="co">#&gt;  6 credits_che… check_gradu… check_… schoo… credits_ch… &lt;NA&gt;               &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb256-31" data-line-number="31"><span class="co">#&gt;  7 credits_che… check_credi… check_… schoo… credits_ch… &lt;NA&gt;               &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb256-32" data-line-number="32"><span class="co">#&gt;  8 credits_che… check_stude… check_… schoo… credits_ch… &lt;NA&gt;               &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb256-33" data-line-number="33"><span class="co">#&gt;  9 credits_che… check_gradu… check_… schoo… credits_ch… &lt;NA&gt;               &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb256-34" data-line-number="34"><span class="co">#&gt; 10 public_fund… check_publi… &lt;NA&gt;    schoo… &lt;NA&gt;        public_funds_scho… &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb256-35" data-line-number="35"><span class="co">#&gt; 11 public_fund… check_publi… &lt;NA&gt;    schoo… &lt;NA&gt;        public_funds_scho… &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb256-36" data-line-number="36"><span class="co">#&gt; 12 school_1     get_school_… &lt;NA&gt;    schoo… &lt;NA&gt;        &lt;NA&gt;               1    </span></a>
<a class="sourceLine" id="cb256-37" data-line-number="37"><span class="co">#&gt; 13 school_2     get_school_… &lt;NA&gt;    schoo… &lt;NA&gt;        &lt;NA&gt;               2    </span></a>
<a class="sourceLine" id="cb256-38" data-line-number="38"><span class="co">#&gt; 14 school_3     get_school_… &lt;NA&gt;    schoo… &lt;NA&gt;        &lt;NA&gt;               3</span></a></code></pre></div>
<p>Ordinarily, the workflow graph gives a separate node to each individual import object or target.</p>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb257-1" data-line-number="1"><span class="kw">vis_drake_graph</span>(plan)</a></code></pre></div>
<div id="htmlwidget-15ba9c4a7014608c5014" style="width:576px;height:576px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-15ba9c4a7014608c5014">{"x":{"nodes":{"id":["check_public_funding","check_credit_hours","check_students","get_school_data","check_graduations","school_1","school_2","school_3","credits_check_students_school_1","credits_check_credit_hours_school_1","public_funds_school_school_1","credits_check_graduations_school_1","credits_check_students_school_2","credits_check_credit_hours_school_2","public_funds_school_school_2","credits_check_graduations_school_2","credits_check_students_school_3","credits_check_credit_hours_school_3","credits_check_graduations_school_3"],"imported":[true,true,true,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false],"label":["check_public_funding","check_credit_hours","check_students","get_school_data","check_graduations","school_1","school_2","school_3","credits_check_students_school_1","credits_check_credit_hours_school_1","public_funds_school_school_1","credits_check_graduations_school_1","credits_check_students_school_2","credits_check_credit_hours_school_2","public_funds_school_school_2","credits_check_graduations_school_2","credits_check_students_school_3","credits_check_credit_hours_school_3","credits_check_graduations_school_3"],"status":["imported","imported","imported","imported","imported","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated"],"type":["function","function","function","function","function","object","object","object","object","object","object","object","object","object","object","object","object","object","object"],"font.size":[20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20],"color":["#1874CD","#1874CD","#1874CD","#1874CD","#1874CD","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000"],"shape":["triangle","triangle","triangle","triangle","triangle","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot"],"level":[1,1,1,1,1,2,2,2,3,3,3,3,3,3,3,3,3,3,3],"x":[-1,-1,-1,-1,-1,0,0,0,1,1,1,1,1,1,1,1,1,1,1],"y":[-0.8,-0.4,2.22044604925031e-16,0.4,0.8,-0.6,2.22044604925031e-16,0.6,-1,-0.8,-0.6,-0.4,-0.2,2.22044604925031e-16,0.2,0.4,0.6,0.8,1]},"edges":{"from":["check_public_funding","check_public_funding","check_credit_hours","check_credit_hours","check_credit_hours","school_1","school_1","school_1","school_1","check_students","check_students","check_students","school_2","school_2","school_2","school_2","school_3","school_3","school_3","get_school_data","get_school_data","get_school_data","check_graduations","check_graduations","check_graduations"],"to":["public_funds_school_school_1","public_funds_school_school_2","credits_check_credit_hours_school_1","credits_check_credit_hours_school_2","credits_check_credit_hours_school_3","credits_check_students_school_1","credits_check_credit_hours_school_1","public_funds_school_school_1","credits_check_graduations_school_1","credits_check_students_school_1","credits_check_students_school_2","credits_check_students_school_3","credits_check_students_school_2","credits_check_credit_hours_school_2","public_funds_school_school_2","credits_check_graduations_school_2","credits_check_students_school_3","credits_check_credit_hours_school_3","credits_check_graduations_school_3","school_1","school_2","school_3","credits_check_graduations_school_1","credits_check_graduations_school_2","credits_check_graduations_school_3"],"arrows":["to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"interaction":{"navigationButtons":true},"edges":{"smooth":false},"physics":{"stabilization":false}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"Dependency graph","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":false,"hoverNearest":false,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"legend":{"width":0.2,"useGroups":false,"position":"left","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Outdated","Imported","Object","Function"],"color":["#000000","#1874CD","#888888","#888888"],"shape":["dot","dot","dot","triangle"],"font.color":["black","black","black","black"],"font.size":[20,20,20,20],"id":[2,6,8,10]},"nodesToDataframe":true},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);","igraphlayout":{"type":"square"}},"evals":[],"jsHooks":[]}</script>
<p>For large projects with hundreds of nodes, this can get quite cumbersome. But here, we can choose a wildcard column (or any other column in the plan, even custom columns) to condense nodes into natural clusters. For the <code>group</code> argument to the graphing functions, choose the name of a column in <code>plan</code> or a column you know will be in <code>drake_graph_info(my_plan)$nodes</code>. Then for <code>clusters</code>, choose the values in your <code>group</code> column that correspond to nodes you want to bunch together. The new graph is not as cumbersome.</p>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb258-1" data-line-number="1"><span class="kw">vis_drake_graph</span>(plan,</a>
<a class="sourceLine" id="cb258-2" data-line-number="2">  <span class="dt">group =</span> <span class="st">&quot;school&quot;</span>,</a>
<a class="sourceLine" id="cb258-3" data-line-number="3">  <span class="dt">clusters =</span> <span class="kw">c</span>(<span class="st">&quot;school_1&quot;</span>, <span class="st">&quot;school_2&quot;</span>, <span class="st">&quot;school_3&quot;</span>)</a>
<a class="sourceLine" id="cb258-4" data-line-number="4">)</a></code></pre></div>
<div id="htmlwidget-a34b32a3d9be55179ea7" style="width:576px;height:576px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-a34b32a3d9be55179ea7">{"x":{"nodes":{"id":["check_public_funding","check_credit_hours","check_students","get_school_data","check_graduations","school: school_1","school: school_2","school: school_3"],"imported":[true,true,true,true,true,false,false,false],"label":["check_public_funding","check_credit_hours","check_students","get_school_data","check_graduations","school: school_1","school: school_2","school: school_3"],"school":["NULL","NULL","NULL","NULL","NULL","school_1","school_2","school_3"],"status":["imported","imported","imported","imported","imported","outdated","outdated","outdated"],"type":["function","function","function","function","function","cluster","cluster","cluster"],"font.size":[20,20,20,20,20,20,20,20],"color":["#1874CD","#1874CD","#1874CD","#1874CD","#1874CD","#000000","#000000","#000000"],"shape":["triangle","triangle","triangle","triangle","triangle","diamond","diamond","diamond"],"level":[1,1,1,1,1,2,2,2],"x":[-1,-1,-1,-1,-1,1,1,1],"y":[-0.8,-0.4,2.22044604925031e-16,0.4,0.8,-1,-0.2,0.6]},"edges":{"from":["check_public_funding","check_public_funding","check_credit_hours","check_credit_hours","check_credit_hours","check_students","check_students","check_students","get_school_data","get_school_data","get_school_data","check_graduations","check_graduations","check_graduations"],"to":["school: school_1","school: school_2","school: school_1","school: school_2","school: school_3","school: school_1","school: school_2","school: school_3","school: school_1","school: school_2","school: school_3","school: school_1","school: school_2","school: school_3"],"arrows":["to","to","to","to","to","to","to","to","to","to","to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"interaction":{"navigationButtons":true},"layout":{"hierarchical":{"enabled":true,"direction":"LR"}}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"Dependency graph","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":false,"hoverNearest":false,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"legend":{"width":0.2,"useGroups":false,"position":"left","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Function","Cluster"],"color":["#888888","#888888"],"shape":["triangle","diamond"],"font.color":["black","black"],"font.size":[20,20],"id":[10,12]},"nodesToDataframe":true},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);"},"evals":[],"jsHooks":[]}</script>
<p>As previously mentioned, you can group on any column in <code>drake_graph_info(my_plan)$nodes</code>. Let’s return to the <code>mtcars</code> project for demonstration.</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb259-1" data-line-number="1"><span class="kw">vis_drake_graph</span>(my_plan)</a></code></pre></div>
<div id="htmlwidget-0f36057b8c61ccc7635f" style="width:576px;height:576px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-0f36057b8c61ccc7635f">{"x":{"nodes":{"id":["random_rows","n-MRQXIYLTMV2HGOR2NV2GGYLSOM","reg2","reg1","p-OJSXA33SOQXFE3LE","simulate","small","large","regression1_small","regression2_small","regression2_large","regression1_large","coef_regression1_small","summ_regression1_small","coef_regression2_small","summ_regression2_small","coef_regression2_large","summ_regression2_large","summ_regression1_large","coef_regression1_large","report","p-OJSXA33SOQXG2ZA"],"imported":[true,true,true,true,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],"label":["random_rows","datasets::mtcars","reg2","reg1","file report.Rmd","simulate","small\n0.004s","large\n0.004s","regression1_small\n0.004s","regression2_small\n0.005s","regression2_large\n0.005s","regression1_large\n0.004s","coef_regression1_small\n0.003s","summ_regression1_small\n0.002s","coef_regression2_small\n0.004s","summ_regression2_small\n0.003s","coef_regression2_large\n0.003s","summ_regression2_large\n0.003s","summ_regression1_large\n0.003s","coef_regression1_large\n0.003s","report\n0.044s","file report.md"],"status":["imported","imported","imported","imported","imported","imported","up to date","up to date","up to date","outdated","outdated","up to date","up to date","up to date","outdated","outdated","outdated","outdated","up to date","up to date","outdated","outdated"],"type":["function","object","function","function","file","function","object","object","object","object","object","object","object","object","object","object","object","object","object","object","object","file"],"font.size":[20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20],"color":["#1874CD","#1874CD","#1874CD","#1874CD","#1874CD","#1874CD","#228B22","#228B22","#228B22","#000000","#000000","#228B22","#228B22","#228B22","#000000","#000000","#000000","#000000","#228B22","#228B22","#000000","#000000"],"shape":["triangle","dot","triangle","triangle","square","triangle","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","square"],"level":[1,1,1,1,1,2,3,3,4,4,4,4,5,5,5,5,5,5,5,5,6,7],"x":[-1,-1,-1,-1,-1,-0.666666666666667,-0.333333333333333,-0.333333333333333,0,0,0,0,0.333333333333333,0.333333333333333,0.333333333333333,0.333333333333333,0.333333333333333,0.333333333333333,0.333333333333333,0.333333333333333,0.666666666666667,1],"y":[-0.857142857142857,-0.428571428571428,2.22044604925031e-16,0.428571428571429,0.857142857142857,2.22044604925031e-16,-0.428571428571428,0.428571428571429,-0.771428571428571,-0.257142857142857,0.257142857142858,0.771428571428572,-1,-0.714285714285714,-0.428571428571428,-0.142857142857143,0.142857142857143,0.428571428571429,0.714285714285714,1,2.22044604925031e-16,2.22044604925031e-16]},"edges":{"from":["regression1_small","regression1_small","simulate","simulate","regression2_small","regression2_small","random_rows","n-MRQXIYLTMV2HGOR2NV2GGYLSOM","small","small","small","reg2","reg2","regression2_large","regression2_large","large","large","large","reg1","reg1","regression1_large","regression1_large","coef_regression2_small","p-OJSXA33SOQXFE3LE","report"],"to":["coef_regression1_small","summ_regression1_small","small","large","coef_regression2_small","summ_regression2_small","simulate","simulate","regression1_small","regression2_small","report","regression2_small","regression2_large","coef_regression2_large","summ_regression2_large","regression2_large","regression1_large","report","regression1_small","regression1_large","summ_regression1_large","coef_regression1_large","report","report","p-OJSXA33SOQXG2ZA"],"arrows":["to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"interaction":{"navigationButtons":true},"edges":{"smooth":false},"physics":{"stabilization":false}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"Dependency graph","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":false,"hoverNearest":false,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"legend":{"width":0.2,"useGroups":false,"position":"left","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Up to date","Outdated","Imported","Object","Function","File"],"color":["#228B22","#000000","#1874CD","#888888","#888888","#888888"],"shape":["dot","dot","dot","dot","triangle","square"],"font.color":["black","black","black","black","black","black"],"font.size":[20,20,20,20,20,20],"id":[1,2,6,8,10,11]},"nodesToDataframe":true},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);","igraphlayout":{"type":"square"}},"evals":[],"jsHooks":[]}</script>
<p>Let’s condense all the imports into one node and all the up-to-date targets into another. That way, the outdated targets stand out.</p>
<div class="sourceCode" id="cb260"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb260-1" data-line-number="1"><span class="kw">vis_drake_graph</span>(</a>
<a class="sourceLine" id="cb260-2" data-line-number="2">  my_plan,</a>
<a class="sourceLine" id="cb260-3" data-line-number="3">  <span class="dt">group =</span> <span class="st">&quot;status&quot;</span>,</a>
<a class="sourceLine" id="cb260-4" data-line-number="4">  <span class="dt">clusters =</span> <span class="kw">c</span>(<span class="st">&quot;imported&quot;</span>, <span class="st">&quot;up to date&quot;</span>)</a>
<a class="sourceLine" id="cb260-5" data-line-number="5">)</a></code></pre></div>
<div id="htmlwidget-db2d7de65bbfeeb84906" style="width:576px;height:576px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-db2d7de65bbfeeb84906">{"x":{"nodes":{"id":["regression2_small","regression2_large","coef_regression2_small","summ_regression2_small","coef_regression2_large","summ_regression2_large","report","p-OJSXA33SOQXG2ZA","status: imported","status: up to date"],"imported":[false,false,false,false,false,false,false,false,true,false],"label":["regression2_small\n0.005s","regression2_large\n0.005s","coef_regression2_small\n0.004s","summ_regression2_small\n0.003s","coef_regression2_large\n0.003s","summ_regression2_large\n0.003s","report\n0.044s","file report.md","status: imported","status: up to date"],"status":["outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","imported","up to date"],"type":["object","object","object","object","object","object","object","file","cluster","cluster"],"font.size":[20,20,20,20,20,20,20,20,20,20],"color":["#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#1874CD","#228B22"],"shape":["dot","dot","dot","dot","dot","dot","dot","square","diamond","diamond"],"level":[2,2,3,3,3,3,4,5,1,3],"x":[0,0,0.333333333333333,0.333333333333333,0.333333333333333,0.333333333333333,0.666666666666667,1,-0.666666666666667,0.333333333333333],"y":[-0.257142857142857,0.257142857142858,-0.428571428571428,-0.142857142857143,0.142857142857143,0.428571428571429,2.22044604925031e-16,2.22044604925031e-16,2.22044604925031e-16,-1]},"edges":{"from":["status: imported","regression2_small","regression2_small","status: up to date","status: up to date","status: imported","status: imported","regression2_large","regression2_large","status: up to date","coef_regression2_small","status: imported","report"],"to":["status: up to date","coef_regression2_small","summ_regression2_small","regression2_small","report","regression2_small","regression2_large","coef_regression2_large","summ_regression2_large","regression2_large","report","report","p-OJSXA33SOQXG2ZA"],"arrows":["to","to","to","to","to","to","to","to","to","to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"interaction":{"navigationButtons":true},"layout":{"hierarchical":{"enabled":true,"direction":"LR"}}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"Dependency graph","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":false,"hoverNearest":false,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"legend":{"width":0.2,"useGroups":false,"position":"left","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Up to date","Outdated","Imported","Object","File","Cluster"],"color":["#228B22","#000000","#1874CD","#888888","#888888","#888888"],"shape":["dot","dot","dot","dot","square","diamond"],"font.color":["black","black","black","black","black","black"],"font.size":[20,20,20,20,20,20],"id":[1,2,6,8,11,12]},"nodesToDataframe":true},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="output-files" class="section level2">
<h2><span class="header-section-number">16.7</span> Output files</h2>
<p><code>drake</code> can reproducibly track multiple output files per target and show them in the graph.</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb261-1" data-line-number="1">plan &lt;-<span class="st"> </span><span class="kw">drake_plan</span>(</a>
<a class="sourceLine" id="cb261-2" data-line-number="2">  <span class="dt">target1 =</span> {</a>
<a class="sourceLine" id="cb261-3" data-line-number="3">    <span class="kw">file.copy</span>(<span class="kw">file_in</span>(<span class="st">&quot;in1.txt&quot;</span>), <span class="kw">file_out</span>(<span class="st">&quot;out1.txt&quot;</span>))</a>
<a class="sourceLine" id="cb261-4" data-line-number="4">    <span class="kw">file.copy</span>(<span class="kw">file_in</span>(<span class="st">&quot;in2.txt&quot;</span>), <span class="kw">file_out</span>(<span class="st">&quot;out2.txt&quot;</span>))</a>
<a class="sourceLine" id="cb261-5" data-line-number="5">  },</a>
<a class="sourceLine" id="cb261-6" data-line-number="6">  <span class="dt">target2 =</span> {</a>
<a class="sourceLine" id="cb261-7" data-line-number="7">    <span class="kw">file.copy</span>(<span class="kw">file_in</span>(<span class="st">&quot;out1.txt&quot;</span>), <span class="kw">file_out</span>(<span class="st">&quot;out3.txt&quot;</span>))</a>
<a class="sourceLine" id="cb261-8" data-line-number="8">    <span class="kw">file.copy</span>(<span class="kw">file_in</span>(<span class="st">&quot;out2.txt&quot;</span>), <span class="kw">file_out</span>(<span class="st">&quot;out4.txt&quot;</span>))</a>
<a class="sourceLine" id="cb261-9" data-line-number="9">  }</a>
<a class="sourceLine" id="cb261-10" data-line-number="10">)</a>
<a class="sourceLine" id="cb261-11" data-line-number="11"><span class="kw">writeLines</span>(<span class="st">&quot;in1&quot;</span>, <span class="st">&quot;in1.txt&quot;</span>)</a>
<a class="sourceLine" id="cb261-12" data-line-number="12"><span class="kw">writeLines</span>(<span class="st">&quot;in2&quot;</span>, <span class="st">&quot;in2.txt&quot;</span>)</a>
<a class="sourceLine" id="cb261-13" data-line-number="13"><span class="kw">make</span>(plan)</a>
<a class="sourceLine" id="cb261-14" data-line-number="14"><span class="co">#&gt; ▶ target target1</span></a>
<a class="sourceLine" id="cb261-15" data-line-number="15"><span class="co">#&gt; ▶ target target2</span></a>
<a class="sourceLine" id="cb261-16" data-line-number="16"></a>
<a class="sourceLine" id="cb261-17" data-line-number="17"><span class="kw">writeLines</span>(<span class="st">&quot;abcdefg&quot;</span>, <span class="st">&quot;out3.txt&quot;</span>)</a>
<a class="sourceLine" id="cb261-18" data-line-number="18"><span class="kw">vis_drake_graph</span>(plan, <span class="dt">targets_only =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<div id="htmlwidget-229091d1da9cea4d2f79" style="width:576px;height:576px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-229091d1da9cea4d2f79">{"x":{"nodes":{"id":["target1","p-N52XIMROOR4HI","p-N52XIMJOOR4HI","target2","p-N52XINBOOR4HI","p-N52XIMZOOR4HI"],"imported":[false,false,false,false,false,false],"label":["target1\n0.01s","file out2.txt","file out1.txt","target2\n0.009s","file out4.txt","file out3.txt"],"status":["up to date","up to date","up to date","outdated","outdated","outdated"],"type":["object","file","file","object","file","file"],"font.size":[20,20,20,20,20,20],"color":["#228B22","#228B22","#228B22","#000000","#000000","#000000"],"shape":["dot","square","square","dot","square","square"],"level":[1,2,2,3,4,4],"x":[-1,-0.333333333333333,-0.333333333333333,0.333333333333333,1,1],"y":[2.22044604925031e-16,-1,1,2.22044604925031e-16,-1,1]},"edges":{"from":["target1","target1","target1","p-N52XIMROOR4HI","p-N52XIMJOOR4HI","target2","target2"],"to":["p-N52XIMROOR4HI","p-N52XIMJOOR4HI","target2","target2","target2","p-N52XINBOOR4HI","p-N52XIMZOOR4HI"],"arrows":["to","to","to","to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"interaction":{"navigationButtons":true},"layout":{"hierarchical":{"enabled":true,"direction":"LR"}}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"Dependency graph","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":false,"hoverNearest":false,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"legend":{"width":0.2,"useGroups":false,"position":"left","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Up to date","Outdated","Object","File"],"color":["#228B22","#000000","#888888","#888888"],"shape":["dot","dot","dot","square"],"font.color":["black","black","black","black"],"font.size":[20,20,20,20],"id":[1,2,8,11]},"nodesToDataframe":true},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);"},"evals":[],"jsHooks":[]}</script>
<p>If your graph is too busy, you can hide the output files with <code>show_output_files = FALSE</code>.</p>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb262-1" data-line-number="1"><span class="kw">vis_drake_graph</span>(plan, <span class="dt">show_output_files =</span> <span class="ot">FALSE</span>, <span class="dt">targets_only =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<div id="htmlwidget-8b2f0a5828f1b1d31665" style="width:576px;height:576px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-8b2f0a5828f1b1d31665">{"x":{"nodes":{"id":["target1","target2"],"imported":[false,false],"label":["target1\n0.01s","target2\n0.009s"],"status":["up to date","outdated"],"type":["object","object"],"font.size":[20,20],"color":["#228B22","#000000"],"shape":["dot","dot"],"level":[1,2],"x":[-1,1],"y":[0,0]},"edges":{"from":["target1"],"to":["target2"],"arrows":["to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"interaction":{"navigationButtons":true},"layout":{"hierarchical":{"enabled":true,"direction":"LR"}}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"Dependency graph","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":false,"hoverNearest":false,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"legend":{"width":0.2,"useGroups":false,"position":"left","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Up to date","Outdated","Object"],"color":["#228B22","#000000","#888888"],"shape":["dot","dot","dot"],"font.color":["black","black","black"],"font.size":[20,20,20],"id":[1,2,8]},"nodesToDataframe":true},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="node-selection" class="section level2">
<h2><span class="header-section-number">16.8</span> Node Selection</h2>
<p><em>(Supported in drake &gt; 7.7.0 only)</em></p>
<p>First, we define our plan, adding a custom column named “link”.</p>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb263-1" data-line-number="1">mtcars_link &lt;-</a>
<a class="sourceLine" id="cb263-2" data-line-number="2"><span class="st">  &quot;https://stat.ethz.ch/R-manual/R-devel/library/datasets/html/mtcars.html&quot;</span></a>
<a class="sourceLine" id="cb263-3" data-line-number="3">iris_link &lt;-</a>
<a class="sourceLine" id="cb263-4" data-line-number="4"><span class="st">  &quot;https://archive.ics.uci.edu/ml/datasets/iris&quot;</span></a>
<a class="sourceLine" id="cb263-5" data-line-number="5">iris3_link &lt;-</a>
<a class="sourceLine" id="cb263-6" data-line-number="6"><span class="st">  &quot;https://www.rdocumentation.org/packages/datasets/versions/3.6.1/topics/iris&quot;</span></a>
<a class="sourceLine" id="cb263-7" data-line-number="7"></a>
<a class="sourceLine" id="cb263-8" data-line-number="8">plan &lt;-<span class="st"> </span><span class="kw">drake_plan</span>(</a>
<a class="sourceLine" id="cb263-9" data-line-number="9">  <span class="dt">mtc =</span> <span class="kw">target</span>(</a>
<a class="sourceLine" id="cb263-10" data-line-number="10">    mtcars,</a>
<a class="sourceLine" id="cb263-11" data-line-number="11">    <span class="dt">link =</span> <span class="op">!!</span>mtcars_link</a>
<a class="sourceLine" id="cb263-12" data-line-number="12">  ),</a>
<a class="sourceLine" id="cb263-13" data-line-number="13">  <span class="dt">ir =</span> <span class="kw">target</span>(</a>
<a class="sourceLine" id="cb263-14" data-line-number="14">    iris,</a>
<a class="sourceLine" id="cb263-15" data-line-number="15">    <span class="dt">link =</span> <span class="op">!!</span>iris_link</a>
<a class="sourceLine" id="cb263-16" data-line-number="16">  ),</a>
<a class="sourceLine" id="cb263-17" data-line-number="17">  <span class="dt">ir3 =</span> <span class="kw">target</span>(</a>
<a class="sourceLine" id="cb263-18" data-line-number="18">    <span class="kw">modify_iris3</span>(iris3, number),</a>
<a class="sourceLine" id="cb263-19" data-line-number="19">    <span class="dt">transform =</span> <span class="kw">map</span>(<span class="dt">number =</span> <span class="op">!!</span><span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>), <span class="dt">.tag_in =</span> cluster_id ),</a>
<a class="sourceLine" id="cb263-20" data-line-number="20">    <span class="dt">link =</span> <span class="op">!!</span>iris3_link</a>
<a class="sourceLine" id="cb263-21" data-line-number="21">  ),</a>
<a class="sourceLine" id="cb263-22" data-line-number="22">  <span class="dt">trace =</span> <span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb263-23" data-line-number="23">)</a></code></pre></div>
<div class="sourceCode" id="cb264"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb264-1" data-line-number="1">unique_stems &lt;-<span class="st"> </span><span class="kw">unique</span>(plan<span class="op">$</span>cluster_id)</a></code></pre></div>
<div id="perform-the-default-action-on-select" class="section level3">
<h3><span class="header-section-number">16.8.1</span> Perform the default action on select</h3>
<p>By supplying <code>vis_drake_graph(on_select = TRUE, on_select_col = &quot;my_column&quot;)</code>,
treats the values in the column named <code>&quot;my_column&quot;</code> as hyperlinks.</p>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb265-1" data-line-number="1"><span class="kw">vis_drake_graph</span>(</a>
<a class="sourceLine" id="cb265-2" data-line-number="2">  my_plan,</a>
<a class="sourceLine" id="cb265-3" data-line-number="3">  <span class="dt">clusters =</span> unique_stems,</a>
<a class="sourceLine" id="cb265-4" data-line-number="4">  <span class="dt">group =</span> <span class="st">&quot;cluster_id&quot;</span>,</a>
<a class="sourceLine" id="cb265-5" data-line-number="5">  <span class="dt">on_select_col =</span> <span class="st">&quot;link&quot;</span>,</a>
<a class="sourceLine" id="cb265-6" data-line-number="6">  <span class="dt">on_select =</span> <span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb265-7" data-line-number="7">)</a></code></pre></div>
<div id="htmlwidget-016e092131fffb8c7bc9" style="width:576px;height:576px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-016e092131fffb8c7bc9">{"x":{"nodes":{"id":["reg2","reg1","random_rows","n-MRQXIYLTMV2HGOR2NV2GGYLSOM","p-OJSXA33SOQXFE3LE","simulate","large","small","regression2_large","regression1_large","regression1_small","regression2_small","summ_regression2_large","coef_regression2_large","summ_regression1_large","coef_regression1_large","coef_regression1_small","summ_regression1_small","coef_regression2_small","summ_regression2_small","report","p-OJSXA33SOQXG2ZA"],"imported":[true,true,true,true,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],"label":["reg2","reg1","random_rows","datasets::mtcars","file report.Rmd","simulate","large\n0.004s","small\n0.004s","regression2_large\n0.005s","regression1_large\n0.004s","regression1_small\n0.004s","regression2_small\n0.005s","summ_regression2_large\n0.003s","coef_regression2_large\n0.003s","summ_regression1_large\n0.003s","coef_regression1_large\n0.003s","coef_regression1_small\n0.003s","summ_regression1_small\n0.002s","coef_regression2_small\n0.004s","summ_regression2_small\n0.003s","report\n0.044s","file report.md"],"cluster_id":["NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL"],"status":["imported","imported","imported","imported","imported","imported","up to date","up to date","outdated","up to date","up to date","outdated","outdated","outdated","up to date","up to date","up to date","up to date","outdated","outdated","outdated","outdated"],"type":["function","function","function","object","file","function","object","object","object","object","object","object","object","object","object","object","object","object","object","object","object","file"],"font.size":[20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20],"color":["#1874CD","#1874CD","#1874CD","#1874CD","#1874CD","#1874CD","#228B22","#228B22","#000000","#228B22","#228B22","#000000","#000000","#000000","#228B22","#228B22","#228B22","#228B22","#000000","#000000","#000000","#000000"],"shape":["triangle","triangle","triangle","dot","square","triangle","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","square"],"level":[1,1,1,1,1,2,3,3,4,4,4,4,5,5,5,5,5,5,5,5,6,7],"x":[-1,-1,-1,-1,-1,-0.666666666666667,-0.333333333333333,-0.333333333333333,0,0,0,0,0.333333333333333,0.333333333333333,0.333333333333333,0.333333333333333,0.333333333333333,0.333333333333333,0.333333333333333,0.333333333333333,0.666666666666667,1],"y":[-0.857142857142857,-0.428571428571428,2.22044604925031e-16,0.428571428571429,0.857142857142857,2.22044604925031e-16,-0.428571428571428,0.428571428571429,-0.771428571428571,-0.257142857142857,0.257142857142858,0.771428571428572,-1,-0.714285714285714,-0.428571428571428,-0.142857142857143,0.142857142857143,0.428571428571429,0.714285714285714,1,2.22044604925031e-16,2.22044604925031e-16],"on_select_col":["NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL"]},"edges":{"from":["regression2_large","regression2_large","large","large","large","reg2","reg2","small","small","small","reg1","reg1","simulate","simulate","regression1_small","regression1_small","regression1_large","regression1_large","regression2_small","regression2_small","random_rows","n-MRQXIYLTMV2HGOR2NV2GGYLSOM","coef_regression2_small","p-OJSXA33SOQXFE3LE","report"],"to":["summ_regression2_large","coef_regression2_large","regression2_large","regression1_large","report","regression2_large","regression2_small","regression1_small","regression2_small","report","regression1_small","regression1_large","large","small","coef_regression1_small","summ_regression1_small","summ_regression1_large","coef_regression1_large","coef_regression2_small","summ_regression2_small","simulate","simulate","report","report","p-OJSXA33SOQXG2ZA"],"arrows":["to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"interaction":{"navigationButtons":true},"edges":{"smooth":false},"physics":{"stabilization":false}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"Dependency graph","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":false,"hoverNearest":false,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"legend":{"width":0.2,"useGroups":false,"position":"left","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Up to date","Outdated","Imported","Object","Function","File"],"color":["#228B22","#000000","#1874CD","#888888","#888888","#888888"],"shape":["dot","dot","dot","dot","triangle","square"],"font.color":["black","black","black","black","black","black"],"font.size":[20,20,20,20,20,20],"id":[1,2,6,8,10,11]},"nodesToDataframe":true},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);","igraphlayout":{"type":"square"},"events":{"selectNode":"\n  function(props) {\n    window.open(\n      this.body.data.nodes.get(props.nodes[0]).on_select_col,\n      '_blank');\n  }"}},"evals":["events.selectNode"],"jsHooks":[]}</script>
</div>
<div id="perform-no-action-on-select" class="section level3">
<h3><span class="header-section-number">16.8.2</span> Perform no action on select</h3>
<p>No action will be taken if any of the following are given to
<code>vis_drake_graph()</code>:</p>
<ul>
<li><code>on_select = NULL</code>,</li>
<li><code>on_select = FALSE</code>,</li>
<li><code>on_select_col = NULL</code></li>
</ul>
<p>This is the default behaviour.</p>
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb266-1" data-line-number="1"><span class="kw">vis_drake_graph</span>(</a>
<a class="sourceLine" id="cb266-2" data-line-number="2">  my_plan,</a>
<a class="sourceLine" id="cb266-3" data-line-number="3">  <span class="dt">clusters =</span> unique_stems,</a>
<a class="sourceLine" id="cb266-4" data-line-number="4">  <span class="dt">group =</span> <span class="st">&quot;cluster_id&quot;</span>,</a>
<a class="sourceLine" id="cb266-5" data-line-number="5">  <span class="dt">on_select_col =</span> <span class="st">&quot;link&quot;</span>,</a>
<a class="sourceLine" id="cb266-6" data-line-number="6">  <span class="dt">on_select =</span> <span class="ot">NULL</span></a>
<a class="sourceLine" id="cb266-7" data-line-number="7">)</a></code></pre></div>
<div id="htmlwidget-3eb75524e1b335e91e92" style="width:576px;height:576px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-3eb75524e1b335e91e92">{"x":{"nodes":{"id":["reg2","reg1","random_rows","n-MRQXIYLTMV2HGOR2NV2GGYLSOM","p-OJSXA33SOQXFE3LE","simulate","large","small","regression2_large","regression1_large","regression1_small","regression2_small","summ_regression2_large","coef_regression2_large","summ_regression1_large","coef_regression1_large","coef_regression1_small","summ_regression1_small","coef_regression2_small","summ_regression2_small","report","p-OJSXA33SOQXG2ZA"],"imported":[true,true,true,true,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],"label":["reg2","reg1","random_rows","datasets::mtcars","file report.Rmd","simulate","large\n0.004s","small\n0.004s","regression2_large\n0.005s","regression1_large\n0.004s","regression1_small\n0.004s","regression2_small\n0.005s","summ_regression2_large\n0.003s","coef_regression2_large\n0.003s","summ_regression1_large\n0.003s","coef_regression1_large\n0.003s","coef_regression1_small\n0.003s","summ_regression1_small\n0.002s","coef_regression2_small\n0.004s","summ_regression2_small\n0.003s","report\n0.044s","file report.md"],"cluster_id":["NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL"],"status":["imported","imported","imported","imported","imported","imported","up to date","up to date","outdated","up to date","up to date","outdated","outdated","outdated","up to date","up to date","up to date","up to date","outdated","outdated","outdated","outdated"],"type":["function","function","function","object","file","function","object","object","object","object","object","object","object","object","object","object","object","object","object","object","object","file"],"font.size":[20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20],"color":["#1874CD","#1874CD","#1874CD","#1874CD","#1874CD","#1874CD","#228B22","#228B22","#000000","#228B22","#228B22","#000000","#000000","#000000","#228B22","#228B22","#228B22","#228B22","#000000","#000000","#000000","#000000"],"shape":["triangle","triangle","triangle","dot","square","triangle","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","square"],"level":[1,1,1,1,1,2,3,3,4,4,4,4,5,5,5,5,5,5,5,5,6,7],"x":[-1,-1,-1,-1,-1,-0.666666666666667,-0.333333333333333,-0.333333333333333,0,0,0,0,0.333333333333333,0.333333333333333,0.333333333333333,0.333333333333333,0.333333333333333,0.333333333333333,0.333333333333333,0.333333333333333,0.666666666666667,1],"y":[-0.857142857142857,-0.428571428571428,2.22044604925031e-16,0.428571428571429,0.857142857142857,2.22044604925031e-16,-0.428571428571428,0.428571428571429,-0.771428571428571,-0.257142857142857,0.257142857142858,0.771428571428572,-1,-0.714285714285714,-0.428571428571428,-0.142857142857143,0.142857142857143,0.428571428571429,0.714285714285714,1,2.22044604925031e-16,2.22044604925031e-16],"on_select_col":["NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL"]},"edges":{"from":["regression2_large","regression2_large","large","large","large","reg2","reg2","small","small","small","reg1","reg1","simulate","simulate","regression1_small","regression1_small","regression1_large","regression1_large","regression2_small","regression2_small","random_rows","n-MRQXIYLTMV2HGOR2NV2GGYLSOM","coef_regression2_small","p-OJSXA33SOQXFE3LE","report"],"to":["summ_regression2_large","coef_regression2_large","regression2_large","regression1_large","report","regression2_large","regression2_small","regression1_small","regression2_small","report","regression1_small","regression1_large","large","small","coef_regression1_small","summ_regression1_small","summ_regression1_large","coef_regression1_large","coef_regression2_small","summ_regression2_small","simulate","simulate","report","report","p-OJSXA33SOQXG2ZA"],"arrows":["to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"interaction":{"navigationButtons":true},"edges":{"smooth":false},"physics":{"stabilization":false}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"Dependency graph","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":false,"hoverNearest":false,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"legend":{"width":0.2,"useGroups":false,"position":"left","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Up to date","Outdated","Imported","Object","Function","File"],"color":["#228B22","#000000","#1874CD","#888888","#888888","#888888"],"shape":["dot","dot","dot","dot","triangle","square"],"font.color":["black","black","black","black","black","black"],"font.size":[20,20,20,20,20,20],"id":[1,2,6,8,10,11]},"nodesToDataframe":true},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);","igraphlayout":{"type":"square"}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="customize-the-onselect-event-behaviour" class="section level3">
<h3><span class="header-section-number">16.8.3</span> Customize the onSelect event behaviour</h3>
<p>What if we instead wanted the browser to display an alert when a node is
clicked?</p>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb267-1" data-line-number="1">alert_behaviour &lt;-<span class="st"> </span><span class="cf">function</span>(){</a>
<a class="sourceLine" id="cb267-2" data-line-number="2">  js &lt;-<span class="st"> &quot;</span></a>
<a class="sourceLine" id="cb267-3" data-line-number="3"><span class="st">  function(props) {</span></a>
<a class="sourceLine" id="cb267-4" data-line-number="4"><span class="st">    alert(&#39;selected node with on_select_col: </span><span class="ch">\\</span><span class="st">r</span><span class="ch">\\</span><span class="st">n&#39; +</span></a>
<a class="sourceLine" id="cb267-5" data-line-number="5"><span class="st">            this.body.data.nodes.get(props.nodes[0]).on_select_col);</span></a>
<a class="sourceLine" id="cb267-6" data-line-number="6"><span class="st">  }&quot;</span></a>
<a class="sourceLine" id="cb267-7" data-line-number="7">}</a>
<a class="sourceLine" id="cb267-8" data-line-number="8"></a>
<a class="sourceLine" id="cb267-9" data-line-number="9"><span class="kw">vis_drake_graph</span>(</a>
<a class="sourceLine" id="cb267-10" data-line-number="10">  my_plan,</a>
<a class="sourceLine" id="cb267-11" data-line-number="11">  <span class="dt">on_select_col =</span> <span class="st">&quot;link&quot;</span>,</a>
<a class="sourceLine" id="cb267-12" data-line-number="12">  <span class="dt">on_select =</span> <span class="kw">alert_behaviour</span>()</a>
<a class="sourceLine" id="cb267-13" data-line-number="13">)</a></code></pre></div>
<div id="htmlwidget-cb1573e9202d29856910" style="width:576px;height:576px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-cb1573e9202d29856910">{"x":{"nodes":{"id":["random_rows","reg1","reg2","p-OJSXA33SOQXFE3LE","n-MRQXIYLTMV2HGOR2NV2GGYLSOM","simulate","small","large","regression1_small","regression2_small","regression1_large","regression2_large","summ_regression1_small","coef_regression1_small","coef_regression2_small","summ_regression2_small","summ_regression1_large","coef_regression1_large","coef_regression2_large","summ_regression2_large","report","p-OJSXA33SOQXG2ZA"],"imported":[true,true,true,true,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],"label":["random_rows","reg1","reg2","file report.Rmd","datasets::mtcars","simulate","small\n0.004s","large\n0.004s","regression1_small\n0.004s","regression2_small\n0.005s","regression1_large\n0.004s","regression2_large\n0.005s","summ_regression1_small\n0.002s","coef_regression1_small\n0.003s","coef_regression2_small\n0.004s","summ_regression2_small\n0.003s","summ_regression1_large\n0.003s","coef_regression1_large\n0.003s","coef_regression2_large\n0.003s","summ_regression2_large\n0.003s","report\n0.044s","file report.md"],"status":["imported","imported","imported","imported","imported","imported","up to date","up to date","up to date","outdated","up to date","outdated","up to date","up to date","outdated","outdated","up to date","up to date","outdated","outdated","outdated","outdated"],"type":["function","function","function","file","object","function","object","object","object","object","object","object","object","object","object","object","object","object","object","object","object","file"],"font.size":[20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20],"color":["#1874CD","#1874CD","#1874CD","#1874CD","#1874CD","#1874CD","#228B22","#228B22","#228B22","#000000","#228B22","#000000","#228B22","#228B22","#000000","#000000","#228B22","#228B22","#000000","#000000","#000000","#000000"],"shape":["triangle","triangle","triangle","square","dot","triangle","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","square"],"level":[1,1,1,1,1,2,3,3,4,4,4,4,5,5,5,5,5,5,5,5,6,7],"x":[-1,-1,-1,-1,-1,-0.666666666666667,-0.333333333333333,-0.333333333333333,0,0,0,0,0.333333333333333,0.333333333333333,0.333333333333333,0.333333333333333,0.333333333333333,0.333333333333333,0.333333333333333,0.333333333333333,0.666666666666667,1],"y":[-0.857142857142857,-0.428571428571428,2.22044604925031e-16,0.428571428571429,0.857142857142857,2.22044604925031e-16,-0.428571428571428,0.428571428571429,-0.771428571428571,-0.257142857142857,0.257142857142858,0.771428571428572,-1,-0.714285714285714,-0.428571428571428,-0.142857142857143,0.142857142857143,0.428571428571429,0.714285714285714,1,2.22044604925031e-16,2.22044604925031e-16],"on_select_col":["NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL"]},"edges":{"from":["regression1_small","regression1_small","random_rows","simulate","simulate","small","small","small","reg1","reg1","regression2_small","regression2_small","large","large","large","reg2","reg2","coef_regression2_small","p-OJSXA33SOQXFE3LE","report","regression1_large","regression1_large","regression2_large","regression2_large","n-MRQXIYLTMV2HGOR2NV2GGYLSOM"],"to":["summ_regression1_small","coef_regression1_small","simulate","small","large","regression1_small","regression2_small","report","regression1_small","regression1_large","coef_regression2_small","summ_regression2_small","report","regression1_large","regression2_large","regression2_small","regression2_large","report","report","p-OJSXA33SOQXG2ZA","summ_regression1_large","coef_regression1_large","coef_regression2_large","summ_regression2_large","simulate"],"arrows":["to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"interaction":{"navigationButtons":true},"edges":{"smooth":false},"physics":{"stabilization":false}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"Dependency graph","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":false,"hoverNearest":false,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"legend":{"width":0.2,"useGroups":false,"position":"left","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Up to date","Outdated","Imported","Object","Function","File"],"color":["#228B22","#000000","#1874CD","#888888","#888888","#888888"],"shape":["dot","dot","dot","dot","triangle","square"],"font.color":["black","black","black","black","black","black"],"font.size":[20,20,20,20,20,20],"id":[1,2,6,8,10,11]},"nodesToDataframe":true},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);","igraphlayout":{"type":"square"},"events":{"selectNode":"\n  function(props) {\n    alert('selected node with on_select_col: \\r\\n' +\n            this.body.data.nodes.get(props.nodes[0]).on_select_col);\n  }"}},"evals":["events.selectNode"],"jsHooks":[]}</script>

</div>
</div>
</div>
<div style = "background: #1C356D; color: white; padding: 10px 10px 10px 25px; font-size: 1em; width: 100%;">
  Copyright Eli Lilly and Company
</div>
            </section>

          </div>
        </div>
      </div>
<a href="storage.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="debugging.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ropensci-books/drake/edit/master/visuals.Rmd",
"text": "Edit this chapter"
},
"history": {
"link": "https://github.com/ropensci-books/drake/commits/master/visuals.Rmd",
"text": "Chapter edit history"
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
