<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 17 Debugging and testing drake projects | The drake R Package User Manual</title>
  <meta name="description" content="In-depth walkthroughs and examples of drake, an R package for reproducible computation at scale." />
  <meta name="generator" content="bookdown 0.16 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 17 Debugging and testing drake projects | The drake R Package User Manual" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://books.ropensci.org/drake/" />
  <meta property="og:image" content="https://books.ropensci.org/drake//images/logo.png" />
  <meta property="og:description" content="In-depth walkthroughs and examples of drake, an R package for reproducible computation at scale." />
  <meta name="github-repo" content="ropensci-books/drake" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 17 Debugging and testing drake projects | The drake R Package User Manual" />
  
  <meta name="twitter:description" content="In-depth walkthroughs and examples of drake, an R package for reproducible computation at scale." />
  <meta name="twitter:image" content="https://books.ropensci.org/drake//images/logo.png" />

<meta name="author" content="Will Landau, Kirill Müller, Alex Axthelm, Jasper Clarkberg, Lorenz Walthert, Ellis Hughes, Matthew Mark Strasiotto" />
<meta name="author" content="Copyright Eli Lilly and Company" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="images/apple-touch-icon.png" />
  <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
<link rel="prev" href="visuals.html"/>
<link rel="next" href="triggers.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/vis-4.20.1/vis.css" rel="stylesheet" />
<script src="libs/vis-4.20.1/vis.min.js"></script>
<script src="libs/visNetwork-binding-2.0.9/visNetwork.js"></script>
<script src="libs/d3-4.5.0/d3.min.js"></script>
<script src="libs/sankey-1/sankey.js"></script>
<script src="libs/sankeyNetwork-binding-0.4/sankeyNetwork.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-150843595-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-150843595-1');
</script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="https://ropensci.github.io/dev_guide/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">The drake R Package User Manual</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#short-version"><i class="fa fa-check"></i><b>1.1</b> Short version</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#long-version"><i class="fa fa-check"></i><b>1.2</b> Long version</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#the-drake-r-package"><i class="fa fa-check"></i><b>1.3</b> The drake R package</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#installation"><i class="fa fa-check"></i><b>1.4</b> Installation</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#why-drake"><i class="fa fa-check"></i><b>1.5</b> Why drake?</a><ul>
<li class="chapter" data-level="1.5.1" data-path="index.html"><a href="index.html#what-gets-done-stays-done."><i class="fa fa-check"></i><b>1.5.1</b> What gets done stays done.</a></li>
<li class="chapter" data-level="1.5.2" data-path="index.html"><a href="index.html#reproducibility-with-confidence"><i class="fa fa-check"></i><b>1.5.2</b> Reproducibility with confidence</a></li>
<li class="chapter" data-level="1.5.3" data-path="index.html"><a href="index.html#scale-up-and-out."><i class="fa fa-check"></i><b>1.5.3</b> Scale up and out.</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#with-docker"><i class="fa fa-check"></i><b>1.6</b> With Docker</a></li>
<li class="chapter" data-level="1.7" data-path="index.html"><a href="index.html#documentation"><i class="fa fa-check"></i><b>1.7</b> Documentation</a><ul>
<li class="chapter" data-level="1.7.1" data-path="index.html"><a href="index.html#frequently-asked-questions"><i class="fa fa-check"></i><b>1.7.1</b> Frequently asked questions</a></li>
<li class="chapter" data-level="1.7.2" data-path="index.html"><a href="index.html#function-reference"><i class="fa fa-check"></i><b>1.7.2</b> Function reference</a></li>
<li class="chapter" data-level="1.7.3" data-path="index.html"><a href="index.html#tutorials"><i class="fa fa-check"></i><b>1.7.3</b> Tutorials</a></li>
<li class="chapter" data-level="1.7.4" data-path="index.html"><a href="index.html#examples"><i class="fa fa-check"></i><b>1.7.4</b> Examples</a></li>
<li class="chapter" data-level="1.7.5" data-path="index.html"><a href="index.html#presentations"><i class="fa fa-check"></i><b>1.7.5</b> Presentations</a></li>
<li class="chapter" data-level="1.7.6" data-path="index.html"><a href="index.html#context-and-history"><i class="fa fa-check"></i><b>1.7.6</b> Context and history</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="index.html"><a href="index.html#help-and-troubleshooting"><i class="fa fa-check"></i><b>1.8</b> Help and troubleshooting</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="similar-work.html"><a href="similar-work.html"><i class="fa fa-check"></i><b>2</b> Similar work</a><ul>
<li class="chapter" data-level="2.1" data-path="similar-work.html"><a href="similar-work.html#pipeline-tools"><i class="fa fa-check"></i><b>2.1</b> Pipeline tools</a><ul>
<li class="chapter" data-level="2.1.1" data-path="similar-work.html"><a href="similar-work.html#gnu-make"><i class="fa fa-check"></i><b>2.1.1</b> GNU Make</a></li>
<li class="chapter" data-level="2.1.2" data-path="similar-work.html"><a href="similar-work.html#remake"><i class="fa fa-check"></i><b>2.1.2</b> Remake</a></li>
<li class="chapter" data-level="2.1.3" data-path="similar-work.html"><a href="similar-work.html#factuals-drake"><i class="fa fa-check"></i><b>2.1.3</b> Factual’s Drake</a></li>
<li class="chapter" data-level="2.1.4" data-path="similar-work.html"><a href="similar-work.html#other-pipeline-tools"><i class="fa fa-check"></i><b>2.1.4</b> Other pipeline tools</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="similar-work.html"><a href="similar-work.html#memoization"><i class="fa fa-check"></i><b>2.2</b> Memoization</a></li>
<li class="chapter" data-level="2.3" data-path="similar-work.html"><a href="similar-work.html#literate-programming"><i class="fa fa-check"></i><b>2.3</b> Literate programming</a><ul>
<li class="chapter" data-level="2.3.1" data-path="similar-work.html"><a href="similar-work.html#knitr-and-r-markdown"><i class="fa fa-check"></i><b>2.3.1</b> knitr and R Markdown</a></li>
<li class="chapter" data-level="2.3.2" data-path="similar-work.html"><a href="similar-work.html#version-control"><i class="fa fa-check"></i><b>2.3.2</b> Version control</a></li>
<li class="chapter" data-level="2.3.3" data-path="similar-work.html"><a href="similar-work.html#containerization-and-r-package-environments"><i class="fa fa-check"></i><b>2.3.3</b> Containerization and R package environments</a></li>
<li class="chapter" data-level="2.3.4" data-path="similar-work.html"><a href="similar-work.html#workflowr"><i class="fa fa-check"></i><b>2.3.4</b> workflowr</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="similar-work.html"><a href="similar-work.html#acknowledgements"><i class="fa fa-check"></i><b>2.4</b> Acknowledgements</a></li>
</ul></li>
<li class="part"><span><b>I Getting started</b></span></li>
<li class="chapter" data-level="3" data-path="walkthrough.html"><a href="walkthrough.html"><i class="fa fa-check"></i><b>3</b> Walkthrough</a><ul>
<li class="chapter" data-level="3.1" data-path="walkthrough.html"><a href="walkthrough.html#set-the-stage."><i class="fa fa-check"></i><b>3.1</b> Set the stage.</a></li>
<li class="chapter" data-level="3.2" data-path="walkthrough.html"><a href="walkthrough.html#make-your-results."><i class="fa fa-check"></i><b>3.2</b> Make your results.</a></li>
<li class="chapter" data-level="3.3" data-path="walkthrough.html"><a href="walkthrough.html#go-back-and-fix-things."><i class="fa fa-check"></i><b>3.3</b> Go back and fix things.</a></li>
<li class="chapter" data-level="3.4" data-path="walkthrough.html"><a href="walkthrough.html#history-and-provenance"><i class="fa fa-check"></i><b>3.4</b> History and provenance</a></li>
<li class="chapter" data-level="3.5" data-path="walkthrough.html"><a href="walkthrough.html#reproducible-data-recovery-and-renaming"><i class="fa fa-check"></i><b>3.5</b> Reproducible data recovery and renaming</a><ul>
<li class="chapter" data-level="3.5.1" data-path="walkthrough.html"><a href="walkthrough.html#undoing-clean"><i class="fa fa-check"></i><b>3.5.1</b> Undoing <code>clean()</code></a></li>
<li class="chapter" data-level="3.5.2" data-path="walkthrough.html"><a href="walkthrough.html#renaming"><i class="fa fa-check"></i><b>3.5.2</b> Renaming</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="walkthrough.html"><a href="walkthrough.html#try-the-code-yourself"><i class="fa fa-check"></i><b>3.6</b> Try the code yourself!</a></li>
<li class="chapter" data-level="3.7" data-path="walkthrough.html"><a href="walkthrough.html#thanks"><i class="fa fa-check"></i><b>3.7</b> Thanks</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="plans.html"><a href="plans.html"><i class="fa fa-check"></i><b>4</b> <code>drake</code> plans</a><ul>
<li class="chapter" data-level="4.1" data-path="plans.html"><a href="plans.html#functions"><i class="fa fa-check"></i><b>4.1</b> Functions</a></li>
<li class="chapter" data-level="4.2" data-path="plans.html"><a href="plans.html#intro-to-plans"><i class="fa fa-check"></i><b>4.2</b> Intro to plans</a></li>
<li class="chapter" data-level="4.3" data-path="plans.html"><a href="plans.html#how-to-choose-good-targets"><i class="fa fa-check"></i><b>4.3</b> How to choose good targets</a></li>
<li class="chapter" data-level="4.4" data-path="plans.html"><a href="plans.html#special-data-formats-for-targets"><i class="fa fa-check"></i><b>4.4</b> Special data formats for targets</a></li>
<li class="chapter" data-level="4.5" data-path="plans.html"><a href="plans.html#special-columns"><i class="fa fa-check"></i><b>4.5</b> Special columns</a></li>
<li class="chapter" data-level="4.6" data-path="plans.html"><a href="plans.html#external-files"><i class="fa fa-check"></i><b>4.6</b> External files</a><ul>
<li class="chapter" data-level="4.6.1" data-path="plans.html"><a href="plans.html#urls"><i class="fa fa-check"></i><b>4.6.1</b> URLs</a></li>
<li class="chapter" data-level="4.6.2" data-path="plans.html"><a href="plans.html#limitations-of-file-tracking"><i class="fa fa-check"></i><b>4.6.2</b> Limitations of file tracking</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="plans.html"><a href="plans.html#large-plans"><i class="fa fa-check"></i><b>4.7</b> Large plans</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="dynamic.html"><a href="dynamic.html"><i class="fa fa-check"></i><b>5</b> Dynamic branching</a><ul>
<li class="chapter" data-level="5.1" data-path="dynamic.html"><a href="dynamic.html#a-note-about-versions"><i class="fa fa-check"></i><b>5.1</b> A note about versions</a></li>
<li class="chapter" data-level="5.2" data-path="dynamic.html"><a href="dynamic.html#motivation"><i class="fa fa-check"></i><b>5.2</b> Motivation</a></li>
<li class="chapter" data-level="5.3" data-path="dynamic.html"><a href="dynamic.html#which-kind-of-branching-should-i-use"><i class="fa fa-check"></i><b>5.3</b> Which kind of branching should I use?</a></li>
<li class="chapter" data-level="5.4" data-path="dynamic.html"><a href="dynamic.html#dynamic-targets"><i class="fa fa-check"></i><b>5.4</b> Dynamic targets</a></li>
<li class="chapter" data-level="5.5" data-path="dynamic.html"><a href="dynamic.html#dynamic-transformations"><i class="fa fa-check"></i><b>5.5</b> Dynamic transformations</a><ul>
<li class="chapter" data-level="5.5.1" data-path="dynamic.html"><a href="dynamic.html#map"><i class="fa fa-check"></i><b>5.5.1</b> <code>map()</code></a></li>
<li class="chapter" data-level="5.5.2" data-path="dynamic.html"><a href="dynamic.html#cross"><i class="fa fa-check"></i><b>5.5.2</b> <code>cross()</code></a></li>
<li class="chapter" data-level="5.5.3" data-path="dynamic.html"><a href="dynamic.html#group"><i class="fa fa-check"></i><b>5.5.3</b> <code>group()</code></a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="dynamic.html"><a href="dynamic.html#trace"><i class="fa fa-check"></i><b>5.6</b> Trace</a></li>
<li class="chapter" data-level="5.7" data-path="dynamic.html"><a href="dynamic.html#max_expand"><i class="fa fa-check"></i><b>5.7</b> <code>max_expand</code></a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="static.html"><a href="static.html"><i class="fa fa-check"></i><b>6</b> Static branching</a><ul>
<li class="chapter" data-level="6.0.1" data-path="static.html"><a href="static.html#how-to-create-large-plans"><i class="fa fa-check"></i><b>6.0.1</b> How to create large plans</a></li>
<li class="chapter" data-level="6.0.2" data-path="static.html"><a href="static.html#start-small"><i class="fa fa-check"></i><b>6.0.2</b> Start small</a></li>
<li class="chapter" data-level="6.0.3" data-path="static.html"><a href="static.html#the-types-of-transformations"><i class="fa fa-check"></i><b>6.0.3</b> The types of transformations</a></li>
<li class="chapter" data-level="6.0.4" data-path="static.html"><a href="static.html#grouping-variables"><i class="fa fa-check"></i><b>6.0.4</b> Grouping variables</a></li>
<li class="chapter" data-level="6.0.5" data-path="static.html"><a href="static.html#tags"><i class="fa fa-check"></i><b>6.0.5</b> Tags</a></li>
<li class="chapter" data-level="6.0.6" data-path="static.html"><a href="static.html#target-names"><i class="fa fa-check"></i><b>6.0.6</b> Target names</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="projects.html"><a href="projects.html"><i class="fa fa-check"></i><b>7</b> <code>drake</code> projects</a><ul>
<li class="chapter" data-level="7.1" data-path="projects.html"><a href="projects.html#code-files"><i class="fa fa-check"></i><b>7.1</b> Code files</a></li>
<li class="chapter" data-level="7.2" data-path="projects.html"><a href="projects.html#safer-interactivity"><i class="fa fa-check"></i><b>7.2</b> Safer interactivity</a><ul>
<li class="chapter" data-level="7.2.1" data-path="projects.html"><a href="projects.html#motivation-1"><i class="fa fa-check"></i><b>7.2.1</b> Motivation</a></li>
<li class="chapter" data-level="7.2.2" data-path="projects.html"><a href="projects.html#usage"><i class="fa fa-check"></i><b>7.2.2</b> Usage</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="projects.html"><a href="projects.html#script-file-pitfalls"><i class="fa fa-check"></i><b>7.3</b> Script file pitfalls</a></li>
<li class="chapter" data-level="7.4" data-path="projects.html"><a href="projects.html#workflows-as-r-packages"><i class="fa fa-check"></i><b>7.4</b> Workflows as R packages</a></li>
<li class="chapter" data-level="7.5" data-path="projects.html"><a href="projects.html#other-tools"><i class="fa fa-check"></i><b>7.5</b> Other tools</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="scripts.html"><a href="scripts.html"><i class="fa fa-check"></i><b>8</b> Script-based workflows</a><ul>
<li class="chapter" data-level="8.1" data-path="scripts.html"><a href="scripts.html#function-oriented-workflows"><i class="fa fa-check"></i><b>8.1</b> Function-oriented workflows</a></li>
<li class="chapter" data-level="8.2" data-path="scripts.html"><a href="scripts.html#traditional-and-legacy-workflows"><i class="fa fa-check"></i><b>8.2</b> Traditional and legacy workflows</a></li>
<li class="chapter" data-level="8.3" data-path="scripts.html"><a href="scripts.html#overcoming-technical-debt"><i class="fa fa-check"></i><b>8.3</b> Overcoming Technical Debt</a></li>
<li class="chapter" data-level="8.4" data-path="scripts.html"><a href="scripts.html#dependencies"><i class="fa fa-check"></i><b>8.4</b> Dependencies</a></li>
<li class="chapter" data-level="8.5" data-path="scripts.html"><a href="scripts.html#building-the-connections"><i class="fa fa-check"></i><b>8.5</b> Building the connections</a></li>
<li class="chapter" data-level="8.6" data-path="scripts.html"><a href="scripts.html#run-the-workflow"><i class="fa fa-check"></i><b>8.6</b> Run the workflow</a></li>
<li class="chapter" data-level="8.7" data-path="scripts.html"><a href="scripts.html#keeping-the-results-up-to-date"><i class="fa fa-check"></i><b>8.7</b> Keeping the results up to date</a></li>
<li class="chapter" data-level="8.8" data-path="scripts.html"><a href="scripts.html#final-thoughts"><i class="fa fa-check"></i><b>8.8</b> Final thoughts</a></li>
</ul></li>
<li class="part"><span><b>II Examples</b></span></li>
<li class="chapter" data-level="9" data-path="churn.html"><a href="churn.html"><i class="fa fa-check"></i><b>9</b> Customer churn and deep learning</a><ul>
<li class="chapter" data-level="9.1" data-path="churn.html"><a href="churn.html#packages"><i class="fa fa-check"></i><b>9.1</b> Packages</a></li>
<li class="chapter" data-level="9.2" data-path="churn.html"><a href="churn.html#functions-1"><i class="fa fa-check"></i><b>9.2</b> Functions</a></li>
<li class="chapter" data-level="9.3" data-path="churn.html"><a href="churn.html#plan"><i class="fa fa-check"></i><b>9.3</b> Plan</a></li>
<li class="chapter" data-level="9.4" data-path="churn.html"><a href="churn.html#dependency-graph"><i class="fa fa-check"></i><b>9.4</b> Dependency graph</a></li>
<li class="chapter" data-level="9.5" data-path="churn.html"><a href="churn.html#run-the-models"><i class="fa fa-check"></i><b>9.5</b> Run the models</a></li>
<li class="chapter" data-level="9.6" data-path="churn.html"><a href="churn.html#inspect-the-results"><i class="fa fa-check"></i><b>9.6</b> Inspect the results</a></li>
<li class="chapter" data-level="9.7" data-path="churn.html"><a href="churn.html#add-models"><i class="fa fa-check"></i><b>9.7</b> Add models</a></li>
<li class="chapter" data-level="9.8" data-path="churn.html"><a href="churn.html#inspect-the-results-again"><i class="fa fa-check"></i><b>9.8</b> Inspect the results again</a></li>
<li class="chapter" data-level="9.9" data-path="churn.html"><a href="churn.html#update-your-code"><i class="fa fa-check"></i><b>9.9</b> Update your code</a></li>
<li class="chapter" data-level="9.10" data-path="churn.html"><a href="churn.html#history-and-provenance-1"><i class="fa fa-check"></i><b>9.10</b> History and provenance</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="churn.html"><a href="churn.html#packages"><i class="fa fa-check"></i><b>10</b> An analysis of R package download trends</a><ul>
<li class="chapter" data-level="10.1" data-path="packages.html"><a href="packages.html"><i class="fa fa-check"></i><b>10.1</b> Get the code.</a></li>
<li class="chapter" data-level="10.2" data-path="packages.html"><a href="packages.html#overview"><i class="fa fa-check"></i><b>10.2</b> Overview</a></li>
<li class="chapter" data-level="10.3" data-path="packages.html"><a href="packages.html#analysis"><i class="fa fa-check"></i><b>10.3</b> Analysis</a></li>
<li class="chapter" data-level="10.4" data-path="packages.html"><a href="packages.html#other-ways-to-trigger-downloads"><i class="fa fa-check"></i><b>10.4</b> Other ways to trigger downloads</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="gsp.html"><a href="gsp.html"><i class="fa fa-check"></i><b>11</b> Finding the best model of gross state product</a><ul>
<li class="chapter" data-level="11.1" data-path="gsp.html"><a href="gsp.html#get-the-code.-1"><i class="fa fa-check"></i><b>11.1</b> Get the code.</a></li>
<li class="chapter" data-level="11.2" data-path="gsp.html"><a href="gsp.html#objective-and-methods"><i class="fa fa-check"></i><b>11.2</b> Objective and methods</a></li>
<li class="chapter" data-level="11.3" data-path="gsp.html"><a href="gsp.html#data"><i class="fa fa-check"></i><b>11.3</b> Data</a></li>
<li class="chapter" data-level="11.4" data-path="gsp.html"><a href="gsp.html#analysis-1"><i class="fa fa-check"></i><b>11.4</b> Analysis</a></li>
<li class="chapter" data-level="11.5" data-path="gsp.html"><a href="gsp.html#results"><i class="fa fa-check"></i><b>11.5</b> Results</a></li>
<li class="chapter" data-level="11.6" data-path="gsp.html"><a href="gsp.html#comparison-with-gnu-make"><i class="fa fa-check"></i><b>11.6</b> Comparison with GNU Make</a></li>
<li class="chapter" data-level="11.7" data-path="gsp.html"><a href="gsp.html#references"><i class="fa fa-check"></i><b>11.7</b> References</a></li>
</ul></li>
<li class="part"><span><b>III Resource management</b></span></li>
<li class="chapter" data-level="12" data-path="hpc.html"><a href="hpc.html"><i class="fa fa-check"></i><b>12</b> High-performance computing</a><ul>
<li class="chapter" data-level="12.1" data-path="hpc.html"><a href="hpc.html#start-small-1"><i class="fa fa-check"></i><b>12.1</b> Start small</a></li>
<li class="chapter" data-level="12.2" data-path="hpc.html"><a href="hpc.html#let-make-schedule-your-targets."><i class="fa fa-check"></i><b>12.2</b> Let <code>make()</code> schedule your targets.</a></li>
<li class="chapter" data-level="12.3" data-path="hpc.html"><a href="hpc.html#the-master-process"><i class="fa fa-check"></i><b>12.3</b> The master process</a><ul>
<li class="chapter" data-level="12.3.1" data-path="hpc.html"><a href="hpc.html#master-on-a-cluster"><i class="fa fa-check"></i><b>12.3.1</b> Master on a cluster</a></li>
<li class="chapter" data-level="12.3.2" data-path="hpc.html"><a href="hpc.html#local-master"><i class="fa fa-check"></i><b>12.3.2</b> Local master</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="hpc.html"><a href="hpc.html#parallel-backends"><i class="fa fa-check"></i><b>12.4</b> Parallel backends</a></li>
<li class="chapter" data-level="12.5" data-path="hpc.html"><a href="hpc.html#the-clustermq-backend"><i class="fa fa-check"></i><b>12.5</b> The <code>clustermq</code> backend</a><ul>
<li class="chapter" data-level="12.5.1" data-path="hpc.html"><a href="hpc.html#persistent-workers"><i class="fa fa-check"></i><b>12.5.1</b> Persistent workers</a></li>
<li class="chapter" data-level="12.5.2" data-path="hpc.html"><a href="hpc.html#installation-1"><i class="fa fa-check"></i><b>12.5.2</b> Installation</a></li>
<li class="chapter" data-level="12.5.3" data-path="hpc.html"><a href="hpc.html#on-your-local-machine"><i class="fa fa-check"></i><b>12.5.3</b> On your local machine</a></li>
<li class="chapter" data-level="12.5.4" data-path="hpc.html"><a href="hpc.html#on-a-cluster"><i class="fa fa-check"></i><b>12.5.4</b> On a cluster</a></li>
</ul></li>
<li class="chapter" data-level="12.6" data-path="hpc.html"><a href="hpc.html#the-future-backend"><i class="fa fa-check"></i><b>12.6</b> The <code>future</code> backend</a><ul>
<li class="chapter" data-level="12.6.1" data-path="hpc.html"><a href="hpc.html#transient-workers"><i class="fa fa-check"></i><b>12.6.1</b> Transient workers</a></li>
<li class="chapter" data-level="12.6.2" data-path="hpc.html"><a href="hpc.html#installation-2"><i class="fa fa-check"></i><b>12.6.2</b> Installation</a></li>
<li class="chapter" data-level="12.6.3" data-path="hpc.html"><a href="hpc.html#on-your-local-machine-1"><i class="fa fa-check"></i><b>12.6.3</b> On your local machine</a></li>
<li class="chapter" data-level="12.6.4" data-path="hpc.html"><a href="hpc.html#on-a-cluster-1"><i class="fa fa-check"></i><b>12.6.4</b> On a cluster</a></li>
</ul></li>
<li class="chapter" data-level="12.7" data-path="hpc.html"><a href="hpc.html#advanced-options"><i class="fa fa-check"></i><b>12.7</b> Advanced options</a><ul>
<li class="chapter" data-level="12.7.1" data-path="hpc.html"><a href="hpc.html#selectivity"><i class="fa fa-check"></i><b>12.7.1</b> Selectivity</a></li>
<li class="chapter" data-level="12.7.2" data-path="hpc.html"><a href="hpc.html#memory-options"><i class="fa fa-check"></i><b>12.7.2</b> Memory options</a></li>
<li class="chapter" data-level="12.7.3" data-path="hpc.html"><a href="hpc.html#storage-options"><i class="fa fa-check"></i><b>12.7.3</b> Storage options</a></li>
<li class="chapter" data-level="12.7.4" data-path="hpc.html"><a href="hpc.html#the-template-argument-for-persistent-workers"><i class="fa fa-check"></i><b>12.7.4</b> The <code>template</code> argument for persistent workers</a></li>
<li class="chapter" data-level="12.7.5" data-path="hpc.html"><a href="hpc.html#the-resources-column-for-transient-workers"><i class="fa fa-check"></i><b>12.7.5</b> The <code>resources</code> column for transient workers</a></li>
<li class="chapter" data-level="12.7.6" data-path="hpc.html"><a href="hpc.html#parallel-computing-within-targets"><i class="fa fa-check"></i><b>12.7.6</b> Parallel computing <em>within</em> targets</a></li>
<li class="chapter" data-level="12.7.7" data-path="hpc.html"><a href="hpc.html#custom-job-schedulers"><i class="fa fa-check"></i><b>12.7.7</b> Custom job schedulers</a></li>
<li class="chapter" data-level="12.7.8" data-path="hpc.html"><a href="hpc.html#hasty-mode"><i class="fa fa-check"></i><b>12.7.8</b> Hasty mode</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="time.html"><a href="time.html"><i class="fa fa-check"></i><b>13</b> Time: logging, prediction, and strategy</a><ul>
<li class="chapter" data-level="13.1" data-path="time.html"><a href="time.html#predict-total-runtime"><i class="fa fa-check"></i><b>13.1</b> Predict total runtime</a></li>
<li class="chapter" data-level="13.2" data-path="time.html"><a href="time.html#strategize-your-high-performance-computing"><i class="fa fa-check"></i><b>13.2</b> Strategize your high-performance computing</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="memory.html"><a href="memory.html"><i class="fa fa-check"></i><b>14</b> Memory management</a><ul>
<li class="chapter" data-level="14.1" data-path="memory.html"><a href="memory.html#garbage-collection-and-custom-files"><i class="fa fa-check"></i><b>14.1</b> Garbage collection and custom files</a></li>
<li class="chapter" data-level="14.2" data-path="memory.html"><a href="memory.html#memory-strategies"><i class="fa fa-check"></i><b>14.2</b> Memory strategies</a></li>
<li class="chapter" data-level="14.3" data-path="memory.html"><a href="memory.html#data-splitting"><i class="fa fa-check"></i><b>14.3</b> Data splitting</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="storage.html"><a href="storage.html"><i class="fa fa-check"></i><b>15</b> Storage</a><ul>
<li class="chapter" data-level="15.1" data-path="storage.html"><a href="storage.html#special-data-formats-for-targets-1"><i class="fa fa-check"></i><b>15.1</b> Special data formats for targets</a></li>
<li class="chapter" data-level="15.2" data-path="storage.html"><a href="storage.html#cache-management"><i class="fa fa-check"></i><b>15.2</b> Cache management</a></li>
<li class="chapter" data-level="15.3" data-path="storage.html"><a href="storage.html#cache-formats"><i class="fa fa-check"></i><b>15.3</b> Cache formats</a><ul>
<li class="chapter" data-level="15.3.1" data-path="storage.html"><a href="storage.html#rds-caches"><i class="fa fa-check"></i><b>15.3.1</b> RDS caches</a></li>
<li class="chapter" data-level="15.3.2" data-path="storage.html"><a href="storage.html#database-caches"><i class="fa fa-check"></i><b>15.3.2</b> Database caches</a></li>
<li class="chapter" data-level="15.3.3" data-path="storage.html"><a href="storage.html#environment-caches"><i class="fa fa-check"></i><b>15.3.3</b> Environment caches</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="storage.html"><a href="storage.html#hash-algorithms"><i class="fa fa-check"></i><b>15.4</b> Hash algorithms</a></li>
</ul></li>
<li class="part"><span><b>IV Extra features</b></span></li>
<li class="chapter" data-level="16" data-path="visuals.html"><a href="visuals.html"><i class="fa fa-check"></i><b>16</b> Visualization with drake</a><ul>
<li class="chapter" data-level="16.1" data-path="visuals.html"><a href="visuals.html#plotting-plans"><i class="fa fa-check"></i><b>16.1</b> Plotting plans</a><ul>
<li class="chapter" data-level="16.1.1" data-path="visuals.html"><a href="visuals.html#vis_drake_graph"><i class="fa fa-check"></i><b>16.1.1</b> <code>vis_drake_graph()</code></a></li>
<li class="chapter" data-level="16.1.2" data-path="visuals.html"><a href="visuals.html#sankey_drake_graph"><i class="fa fa-check"></i><b>16.1.2</b> <code>sankey_drake_graph()</code></a></li>
<li class="chapter" data-level="16.1.3" data-path="visuals.html"><a href="visuals.html#drake_ggraph"><i class="fa fa-check"></i><b>16.1.3</b> <code>drake_ggraph()</code></a></li>
<li class="chapter" data-level="16.1.4" data-path="visuals.html"><a href="visuals.html#text_drake_graph"><i class="fa fa-check"></i><b>16.1.4</b> <code>text_drake_graph()</code></a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="visuals.html"><a href="visuals.html#underlying-graph-data-node-and-edge-data-frames"><i class="fa fa-check"></i><b>16.2</b> Underlying graph data: node and edge data frames</a></li>
<li class="chapter" data-level="16.3" data-path="visuals.html"><a href="visuals.html#visualizing-target-status"><i class="fa fa-check"></i><b>16.3</b> Visualizing target status</a></li>
<li class="chapter" data-level="16.4" data-path="visuals.html"><a href="visuals.html#subgraphs"><i class="fa fa-check"></i><b>16.4</b> Subgraphs</a></li>
<li class="chapter" data-level="16.5" data-path="visuals.html"><a href="visuals.html#control-the-vis_drake_graph-legend."><i class="fa fa-check"></i><b>16.5</b> Control the <code>vis_drake_graph()</code> legend.</a></li>
<li class="chapter" data-level="16.6" data-path="visuals.html"><a href="visuals.html#clusters"><i class="fa fa-check"></i><b>16.6</b> Clusters</a></li>
<li class="chapter" data-level="16.7" data-path="visuals.html"><a href="visuals.html#output-files"><i class="fa fa-check"></i><b>16.7</b> Output files</a></li>
<li class="chapter" data-level="16.8" data-path="visuals.html"><a href="visuals.html#node-selection"><i class="fa fa-check"></i><b>16.8</b> Node Selection</a><ul>
<li class="chapter" data-level="16.8.1" data-path="visuals.html"><a href="visuals.html#perform-the-default-action-on-select"><i class="fa fa-check"></i><b>16.8.1</b> Perform the default action on select</a></li>
<li class="chapter" data-level="16.8.2" data-path="visuals.html"><a href="visuals.html#perform-no-action-on-select"><i class="fa fa-check"></i><b>16.8.2</b> Perform no action on select</a></li>
<li class="chapter" data-level="16.8.3" data-path="visuals.html"><a href="visuals.html#customize-the-onselect-event-behaviour"><i class="fa fa-check"></i><b>16.8.3</b> Customize the onSelect event behaviour</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="debugging.html"><a href="debugging.html"><i class="fa fa-check"></i><b>17</b> Debugging and testing drake projects</a><ul>
<li class="chapter" data-level="17.0.1" data-path="debugging.html"><a href="debugging.html#start-small-2"><i class="fa fa-check"></i><b>17.0.1</b> Start small</a></li>
<li class="chapter" data-level="17.1" data-path="debugging.html"><a href="debugging.html#dependencies-1"><i class="fa fa-check"></i><b>17.1</b> Dependencies</a><ul>
<li class="chapter" data-level="17.1.1" data-path="debugging.html"><a href="debugging.html#visualize-your-dependency-graph."><i class="fa fa-check"></i><b>17.1.1</b> Visualize your dependency graph.</a></li>
<li class="chapter" data-level="17.1.2" data-path="debugging.html"><a href="debugging.html#check-specific-dependency-information."><i class="fa fa-check"></i><b>17.1.2</b> Check specific dependency information.</a></li>
<li class="chapter" data-level="17.1.3" data-path="debugging.html"><a href="debugging.html#outdated-targets-and-missing-dependencies"><i class="fa fa-check"></i><b>17.1.3</b> Outdated targets and missing dependencies</a></li>
<li class="chapter" data-level="17.1.4" data-path="debugging.html"><a href="debugging.html#but-why-are-my-targets-out-of-date"><i class="fa fa-check"></i><b>17.1.4</b> But <em>why</em> are my targets out of date?</a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="debugging.html"><a href="debugging.html#diagnose-failures."><i class="fa fa-check"></i><b>17.2</b> Diagnose failures.</a></li>
<li class="chapter" data-level="17.3" data-path="debugging.html"><a href="debugging.html#timeouts-and-retries"><i class="fa fa-check"></i><b>17.3</b> Timeouts and retries</a></li>
<li class="chapter" data-level="17.4" data-path="debugging.html"><a href="debugging.html#more-help"><i class="fa fa-check"></i><b>17.4</b> More help</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="triggers.html"><a href="triggers.html"><i class="fa fa-check"></i><b>18</b> Triggers: decision rules for building targets</a><ul>
<li class="chapter" data-level="18.1" data-path="triggers.html"><a href="triggers.html#what-are-triggers"><i class="fa fa-check"></i><b>18.1</b> What are triggers?</a></li>
<li class="chapter" data-level="18.2" data-path="triggers.html"><a href="triggers.html#customization"><i class="fa fa-check"></i><b>18.2</b> Customization</a></li>
<li class="chapter" data-level="18.3" data-path="triggers.html"><a href="triggers.html#alternative-trigger-modes"><i class="fa fa-check"></i><b>18.3</b> Alternative trigger modes</a></li>
<li class="chapter" data-level="18.4" data-path="triggers.html"><a href="triggers.html#a-more-practical-example"><i class="fa fa-check"></i><b>18.4</b> A more practical example</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="faq.html"><a href="faq.html"><i class="fa fa-check"></i><b>A</b> Frequently-asked questions</a></li>
<li class="chapter" data-level="B" data-path="caution.html"><a href="caution.html"><i class="fa fa-check"></i><b>B</b> Cautionary notes</a><ul>
<li class="chapter" data-level="B.1" data-path="caution.html"><a href="caution.html#workflow-plans"><i class="fa fa-check"></i><b>B.1</b> Workflow plans</a><ul>
<li class="chapter" data-level="B.1.1" data-path="caution.html"><a href="caution.html#externalizing-commands-in-r-script-files"><i class="fa fa-check"></i><b>B.1.1</b> Externalizing commands in R script files</a></li>
<li class="chapter" data-level="B.1.2" data-path="caution.html"><a href="caution.html#commands-are-not-perfectly-flexible."><i class="fa fa-check"></i><b>B.1.2</b> Commands are NOT perfectly flexible.</a></li>
</ul></li>
<li class="chapter" data-level="B.2" data-path="caution.html"><a href="caution.html#execution"><i class="fa fa-check"></i><b>B.2</b> Execution</a><ul>
<li class="chapter" data-level="B.2.1" data-path="caution.html"><a href="caution.html#install-drake-properly."><i class="fa fa-check"></i><b>B.2.1</b> Install <code>drake</code> properly.</a></li>
<li class="chapter" data-level="B.2.2" data-path="caution.html"><a href="caution.html#install-all-your-packages."><i class="fa fa-check"></i><b>B.2.2</b> Install all your packages.</a></li>
<li class="chapter" data-level="B.2.3" data-path="caution.html"><a href="caution.html#a-note-on-tidy-evaluation"><i class="fa fa-check"></i><b>B.2.3</b> A note on tidy evaluation</a></li>
<li class="chapter" data-level="B.2.4" data-path="caution.html"><a href="caution.html#find-and-diagnose-your-errors."><i class="fa fa-check"></i><b>B.2.4</b> Find and diagnose your errors.</a></li>
<li class="chapter" data-level="B.2.5" data-path="caution.html"><a href="caution.html#refresh-the-drake_config-list-early-and-often."><i class="fa fa-check"></i><b>B.2.5</b> Refresh the <code>drake_config()</code> list early and often.</a></li>
<li class="chapter" data-level="B.2.6" data-path="caution.html"><a href="caution.html#workflows-as-r-packages."><i class="fa fa-check"></i><b>B.2.6</b> Workflows as R packages.</a></li>
<li class="chapter" data-level="B.2.7" data-path="caution.html"><a href="caution.html#the-lazy_load-flag-does-not-work-with-parlapply-parallelism."><i class="fa fa-check"></i><b>B.2.7</b> The <code>lazy_load</code> flag does not work with <code>&quot;parLapply&quot;</code> parallelism.</a></li>
<li class="chapter" data-level="B.2.8" data-path="caution.html"><a href="caution.html#timeouts-may-be-unreliable."><i class="fa fa-check"></i><b>B.2.8</b> Timeouts may be unreliable.</a></li>
</ul></li>
<li class="chapter" data-level="B.3" data-path="caution.html"><a href="caution.html#dependencies-2"><i class="fa fa-check"></i><b>B.3</b> Dependencies</a><ul>
<li class="chapter" data-level="B.3.1" data-path="caution.html"><a href="caution.html#objects-that-contain-functions-may-rebuild-too-often"><i class="fa fa-check"></i><b>B.3.1</b> Objects that contain functions may rebuild too often</a></li>
<li class="chapter" data-level="B.3.2" data-path="caution.html"><a href="caution.html#dependencies-are-not-tracked-in-some-edge-cases."><i class="fa fa-check"></i><b>B.3.2</b> Dependencies are not tracked in some edge cases.</a></li>
<li class="chapter" data-level="B.3.3" data-path="caution.html"><a href="caution.html#dependencies-of-knitr-reports"><i class="fa fa-check"></i><b>B.3.3</b> Dependencies of <code>knitr</code> reports</a></li>
<li class="chapter" data-level="B.3.4" data-path="caution.html"><a href="caution.html#s3-and-generic-methods"><i class="fa fa-check"></i><b>B.3.4</b> S3 and generic methods</a></li>
<li class="chapter" data-level="B.3.5" data-path="caution.html"><a href="caution.html#file-outputs-in-imported-functions."><i class="fa fa-check"></i><b>B.3.5</b> File outputs in imported functions.</a></li>
<li class="chapter" data-level="B.3.6" data-path="caution.html"><a href="caution.html#functions-produced-by-vectorize"><i class="fa fa-check"></i><b>B.3.6</b> Functions produced by <code>Vectorize()</code></a></li>
<li class="chapter" data-level="B.3.7" data-path="caution.html"><a href="caution.html#compiled-code-is-not-reproducibly-tracked."><i class="fa fa-check"></i><b>B.3.7</b> Compiled code is not reproducibly tracked.</a></li>
<li class="chapter" data-level="B.3.8" data-path="caution.html"><a href="caution.html#directories-folders-are-not-reproducibly-tracked."><i class="fa fa-check"></i><b>B.3.8</b> Directories (folders) are not reproducibly tracked.</a></li>
<li class="chapter" data-level="B.3.9" data-path="caution.html"><a href="caution.html#packages-are-not-tracked-as-dependencies."><i class="fa fa-check"></i><b>B.3.9</b> Packages are not tracked as dependencies.</a></li>
</ul></li>
<li class="chapter" data-level="B.4" data-path="caution.html"><a href="caution.html#high-performance-computing"><i class="fa fa-check"></i><b>B.4</b> High-performance computing</a><ul>
<li class="chapter" data-level="B.4.1" data-path="caution.html"><a href="caution.html#calling-mclapply-within-targets"><i class="fa fa-check"></i><b>B.4.1</b> Calling <code>mclapply()</code> <em>within</em> targets</a></li>
<li class="chapter" data-level="B.4.2" data-path="caution.html"><a href="caution.html#zombie-processes"><i class="fa fa-check"></i><b>B.4.2</b> Zombie processes</a></li>
</ul></li>
<li class="chapter" data-level="B.5" data-path="caution.html"><a href="caution.html#storage-1"><i class="fa fa-check"></i><b>B.5</b> Storage</a><ul>
<li class="chapter" data-level="B.5.1" data-path="caution.html"><a href="caution.html#projects-hosted-on-dropbox-and-similar-platforms"><i class="fa fa-check"></i><b>B.5.1</b> Projects hosted on Dropbox and similar platforms</a></li>
<li class="chapter" data-level="B.5.2" data-path="caution.html"><a href="caution.html#cache-customization-is-limited"><i class="fa fa-check"></i><b>B.5.2</b> Cache customization is limited</a></li>
<li class="chapter" data-level="B.5.3" data-path="caution.html"><a href="caution.html#runtime-predictions"><i class="fa fa-check"></i><b>B.5.3</b> Runtime predictions</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The drake R Package User Manual</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="debugging" class="section level1">
<h1><span class="header-section-number">Chapter 17</span> Debugging and testing drake projects</h1>
<p>This chapter is a guide to debugging and testing <code>drake</code> projects.</p>
<div id="start-small-2" class="section level3">
<h3><span class="header-section-number">17.0.1</span> Start small</h3>
<p>If your workflow is large, consider running a downsized version to debug and test things first. That way, you can find the bugs early on without wasting as much time. Create a test plan with <code>drake_plan(max_expand = SMALL_NUMBER)</code> before scaling up to the full set of targets. See <a href="https://books.ropensci.org/drake/plans.html#start-small">this section on plans</a> for details.</p>
</div>
<div id="dependencies-1" class="section level2">
<h2><span class="header-section-number">17.1</span> Dependencies</h2>
<p><code>drake</code> automatically detects dependency relationships among your targets and imports. While this is convenient most of the time, it can lead to some pitfalls. This section describes techniques to understand you project’s dependency structure and diagnose and debug issues.</p>
<div id="visualize-your-dependency-graph." class="section level3">
<h3><span class="header-section-number">17.1.1</span> Visualize your dependency graph.</h3>
<p>To avoid frustration early on, please use <a href="visuals.html#visuals"><code>drake</code>’s dependency graph visualizations</a> to see how the steps of your workflow fit together. <code>drake</code> resolves the dependency relationships in the graph by analyzing the code in your commands and the functions in your environment.</p>
<div class="sourceCode" id="cb276"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb276-1" data-line-number="1"><span class="kw">load_mtcars_example</span>() <span class="co"># from https://github.com/wlandau/drake-examples/tree/master/mtcars</span></a>
<a class="sourceLine" id="cb276-2" data-line-number="2">config &lt;-<span class="st"> </span><span class="kw">drake_config</span>(my_plan)</a>
<a class="sourceLine" id="cb276-3" data-line-number="3"><span class="co"># Hover, click, drag, zoom, and pan. See args &#39;from&#39; and &#39;to&#39;.</span></a>
<a class="sourceLine" id="cb276-4" data-line-number="4"><span class="kw">vis_drake_graph</span>(config, <span class="dt">width =</span> <span class="st">&quot;100%&quot;</span>, <span class="dt">height =</span> <span class="st">&quot;500px&quot;</span>)</a></code></pre></div>
<div id="htmlwidget-cb1573e9202d29856910" style="width:100%;height:500px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-cb1573e9202d29856910">{"x":{"nodes":{"id":["reg2","reg1","random_rows","n-MRQXIYLTMV2HGOR2NV2GGYLSOM","p-OJSXA33SOQXFE3LE","simulate","large","small","regression1_large","regression2_large","regression1_small","regression2_small","summ_regression1_large","coef_regression1_large","coef_regression2_large","summ_regression2_large","coef_regression1_small","summ_regression1_small","coef_regression2_small","summ_regression2_small","report","p-OJSXA33SOQXG2ZA"],"imported":[true,true,true,true,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],"label":["reg2","reg1","random_rows","datasets::mtcars","file report.Rmd","simulate","large","small","regression1_large","regression2_large","regression1_small","regression2_small","summ_regression1_large","coef_regression1_large","coef_regression2_large","summ_regression2_large","coef_regression1_small","summ_regression1_small","coef_regression2_small","summ_regression2_small","report","file report.md"],"status":["imported","imported","imported","imported","imported","imported","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated"],"type":["function","function","function","object","file","function","object","object","object","object","object","object","object","object","object","object","object","object","object","object","object","file"],"font.size":[20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20],"color":["#1874CD","#1874CD","#1874CD","#1874CD","#1874CD","#1874CD","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000"],"shape":["triangle","triangle","triangle","dot","square","triangle","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","square"],"level":[1,1,1,1,1,2,3,3,4,4,4,4,5,5,5,5,5,5,5,5,6,7],"x":[-1,-1,-1,-1,-1,-0.666666666666667,-0.333333333333333,-0.333333333333333,0,0,0,0,0.333333333333333,0.333333333333333,0.333333333333333,0.333333333333333,0.333333333333333,0.333333333333333,0.333333333333333,0.333333333333333,0.666666666666667,1],"y":[-0.857142857142857,-0.428571428571428,2.22044604925031e-16,0.428571428571429,0.857142857142857,2.22044604925031e-16,-0.428571428571428,0.428571428571429,-0.771428571428571,-0.257142857142857,0.257142857142858,0.771428571428572,-1,-0.714285714285714,-0.428571428571428,-0.142857142857143,0.142857142857143,0.428571428571429,0.714285714285714,1,2.22044604925031e-16,2.22044604925031e-16]},"edges":{"from":["regression1_small","regression1_small","large","large","large","reg2","reg2","small","small","small","reg1","reg1","regression1_large","regression1_large","regression2_large","regression2_large","random_rows","n-MRQXIYLTMV2HGOR2NV2GGYLSOM","simulate","simulate","regression2_small","regression2_small","coef_regression2_small","p-OJSXA33SOQXFE3LE","report"],"to":["coef_regression1_small","summ_regression1_small","regression1_large","regression2_large","report","regression2_large","regression2_small","regression1_small","regression2_small","report","regression1_small","regression1_large","summ_regression1_large","coef_regression1_large","coef_regression2_large","summ_regression2_large","simulate","simulate","large","small","coef_regression2_small","summ_regression2_small","report","report","p-OJSXA33SOQXG2ZA"],"arrows":["to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"interaction":{"navigationButtons":true},"edges":{"smooth":false},"physics":{"stabilization":false}},"groups":null,"width":"100%","height":"500px","idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"Dependency graph","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":false,"hoverNearest":false,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"legend":{"width":0.2,"useGroups":false,"position":"left","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Outdated","Imported","Object","Function","File"],"color":["#000000","#1874CD","#888888","#888888","#888888"],"shape":["dot","dot","dot","triangle","square"],"font.color":["black","black","black","black","black"],"font.size":[20,20,20,20,20],"id":[2,5,7,9,10]},"nodesToDataframe":true},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);","igraphlayout":{"type":"square"}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="check-specific-dependency-information." class="section level3">
<h3><span class="header-section-number">17.1.2</span> Check specific dependency information.</h3>
<p>With the <code>deps_code()</code> function, you can see for yourself how <code>drake</code> detects first-order dependencies from code.</p>
<div class="sourceCode" id="cb277"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb277-1" data-line-number="1"><span class="kw">print</span>(simulate)</a>
<a class="sourceLine" id="cb277-2" data-line-number="2"><span class="co">#&gt; function (n) </span></a>
<a class="sourceLine" id="cb277-3" data-line-number="3"><span class="co">#&gt; {</span></a>
<a class="sourceLine" id="cb277-4" data-line-number="4"><span class="co">#&gt;     data &lt;- random_rows(data = datasets::mtcars, n = n)</span></a>
<a class="sourceLine" id="cb277-5" data-line-number="5"><span class="co">#&gt;     data.frame(x = data$wt, y = data$mpg)</span></a>
<a class="sourceLine" id="cb277-6" data-line-number="6"><span class="co">#&gt; }</span></a>
<a class="sourceLine" id="cb277-7" data-line-number="7"></a>
<a class="sourceLine" id="cb277-8" data-line-number="8"><span class="kw">deps_code</span>(simulate)</a>
<a class="sourceLine" id="cb277-9" data-line-number="9"><span class="co">#&gt; # A tibble: 3 x 2</span></a>
<a class="sourceLine" id="cb277-10" data-line-number="10"><span class="co">#&gt;   name             type      </span></a>
<a class="sourceLine" id="cb277-11" data-line-number="11"><span class="co">#&gt;   &lt;chr&gt;            &lt;chr&gt;     </span></a>
<a class="sourceLine" id="cb277-12" data-line-number="12"><span class="co">#&gt; 1 data.frame       globals   </span></a>
<a class="sourceLine" id="cb277-13" data-line-number="13"><span class="co">#&gt; 2 random_rows      globals   </span></a>
<a class="sourceLine" id="cb277-14" data-line-number="14"><span class="co">#&gt; 3 datasets::mtcars namespaced</span></a>
<a class="sourceLine" id="cb277-15" data-line-number="15"></a>
<a class="sourceLine" id="cb277-16" data-line-number="16"><span class="co"># knitr_in() makes sure your target depends on `report.Rmd`</span></a>
<a class="sourceLine" id="cb277-17" data-line-number="17"><span class="co"># and any dependencies loaded with loadd() and readd()</span></a>
<a class="sourceLine" id="cb277-18" data-line-number="18"><span class="co"># in the report&#39;s active code chunks.</span></a>
<a class="sourceLine" id="cb277-19" data-line-number="19">my_plan<span class="op">$</span>command[[<span class="dv">1</span>]]</a>
<a class="sourceLine" id="cb277-20" data-line-number="20"><span class="co">#&gt; knit(knitr_in(&quot;report.Rmd&quot;), file_out(&quot;report.md&quot;), quiet = TRUE)</span></a>
<a class="sourceLine" id="cb277-21" data-line-number="21"></a>
<a class="sourceLine" id="cb277-22" data-line-number="22"><span class="kw">deps_code</span>(my_plan<span class="op">$</span>command[[<span class="dv">1</span>]])</a>
<a class="sourceLine" id="cb277-23" data-line-number="23"><span class="co">#&gt; # A tibble: 6 x 2</span></a>
<a class="sourceLine" id="cb277-24" data-line-number="24"><span class="co">#&gt;   name                   type    </span></a>
<a class="sourceLine" id="cb277-25" data-line-number="25"><span class="co">#&gt;   &lt;chr&gt;                  &lt;chr&gt;   </span></a>
<a class="sourceLine" id="cb277-26" data-line-number="26"><span class="co">#&gt; 1 knit                   globals </span></a>
<a class="sourceLine" id="cb277-27" data-line-number="27"><span class="co">#&gt; 2 large                  loadd   </span></a>
<a class="sourceLine" id="cb277-28" data-line-number="28"><span class="co">#&gt; 3 small                  readd   </span></a>
<a class="sourceLine" id="cb277-29" data-line-number="29"><span class="co">#&gt; 4 coef_regression2_small readd   </span></a>
<a class="sourceLine" id="cb277-30" data-line-number="30"><span class="co">#&gt; 5 report.md              file_out</span></a>
<a class="sourceLine" id="cb277-31" data-line-number="31"><span class="co">#&gt; 6 report.Rmd             knitr_in</span></a>
<a class="sourceLine" id="cb277-32" data-line-number="32"></a>
<a class="sourceLine" id="cb277-33" data-line-number="33">my_plan<span class="op">$</span>command[[<span class="kw">nrow</span>(my_plan)]]</a>
<a class="sourceLine" id="cb277-34" data-line-number="34"><span class="co">#&gt; suppressWarnings(summary(regression2_large))$coefficients</span></a>
<a class="sourceLine" id="cb277-35" data-line-number="35"></a>
<a class="sourceLine" id="cb277-36" data-line-number="36"><span class="kw">deps_code</span>(my_plan<span class="op">$</span>command[[<span class="kw">nrow</span>(my_plan)]])</a>
<a class="sourceLine" id="cb277-37" data-line-number="37"><span class="co">#&gt; # A tibble: 3 x 2</span></a>
<a class="sourceLine" id="cb277-38" data-line-number="38"><span class="co">#&gt;   name              type   </span></a>
<a class="sourceLine" id="cb277-39" data-line-number="39"><span class="co">#&gt;   &lt;chr&gt;             &lt;chr&gt;  </span></a>
<a class="sourceLine" id="cb277-40" data-line-number="40"><span class="co">#&gt; 1 summary           globals</span></a>
<a class="sourceLine" id="cb277-41" data-line-number="41"><span class="co">#&gt; 2 suppressWarnings  globals</span></a>
<a class="sourceLine" id="cb277-42" data-line-number="42"><span class="co">#&gt; 3 regression2_large globals</span></a></code></pre></div>
<p>With <code>deps_target()</code>, you can see the dependencies that <code>drake</code> has already detected for your targets and imports.</p>
<div class="sourceCode" id="cb278"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb278-1" data-line-number="1"><span class="kw">deps_target</span>(<span class="st">&quot;simulate&quot;</span>, config)</a>
<a class="sourceLine" id="cb278-2" data-line-number="2"><span class="co">#&gt; # A tibble: 2 x 2</span></a>
<a class="sourceLine" id="cb278-3" data-line-number="3"><span class="co">#&gt;   name             type      </span></a>
<a class="sourceLine" id="cb278-4" data-line-number="4"><span class="co">#&gt;   &lt;chr&gt;            &lt;chr&gt;     </span></a>
<a class="sourceLine" id="cb278-5" data-line-number="5"><span class="co">#&gt; 1 random_rows      globals   </span></a>
<a class="sourceLine" id="cb278-6" data-line-number="6"><span class="co">#&gt; 2 datasets::mtcars namespaced</span></a>
<a class="sourceLine" id="cb278-7" data-line-number="7"></a>
<a class="sourceLine" id="cb278-8" data-line-number="8"><span class="kw">deps_target</span>(<span class="st">&quot;small&quot;</span>, config)</a>
<a class="sourceLine" id="cb278-9" data-line-number="9"><span class="co">#&gt; # A tibble: 1 x 2</span></a>
<a class="sourceLine" id="cb278-10" data-line-number="10"><span class="co">#&gt;   name     type   </span></a>
<a class="sourceLine" id="cb278-11" data-line-number="11"><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;  </span></a>
<a class="sourceLine" id="cb278-12" data-line-number="12"><span class="co">#&gt; 1 simulate globals</span></a>
<a class="sourceLine" id="cb278-13" data-line-number="13"></a>
<a class="sourceLine" id="cb278-14" data-line-number="14"><span class="kw">deps_target</span>(<span class="st">&quot;report&quot;</span>, config)</a>
<a class="sourceLine" id="cb278-15" data-line-number="15"><span class="co">#&gt; # A tibble: 5 x 2</span></a>
<a class="sourceLine" id="cb278-16" data-line-number="16"><span class="co">#&gt;   name                   type    </span></a>
<a class="sourceLine" id="cb278-17" data-line-number="17"><span class="co">#&gt;   &lt;chr&gt;                  &lt;chr&gt;   </span></a>
<a class="sourceLine" id="cb278-18" data-line-number="18"><span class="co">#&gt; 1 large                  loadd   </span></a>
<a class="sourceLine" id="cb278-19" data-line-number="19"><span class="co">#&gt; 2 small                  readd   </span></a>
<a class="sourceLine" id="cb278-20" data-line-number="20"><span class="co">#&gt; 3 coef_regression2_small readd   </span></a>
<a class="sourceLine" id="cb278-21" data-line-number="21"><span class="co">#&gt; 4 report.md              file_out</span></a>
<a class="sourceLine" id="cb278-22" data-line-number="22"><span class="co">#&gt; 5 report.Rmd             knitr_in</span></a></code></pre></div>
<p>And with <code>tracked()</code>, you can list all the reproducibly tracked objects and files.</p>
<div class="sourceCode" id="cb279"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb279-1" data-line-number="1"><span class="kw">tracked</span>(config)</a>
<a class="sourceLine" id="cb279-2" data-line-number="2"><span class="co">#&gt;  [1] &quot;coef_regression1_large&quot; &quot;coef_regression1_small&quot; &quot;coef_regression2_large&quot;</span></a>
<a class="sourceLine" id="cb279-3" data-line-number="3"><span class="co">#&gt;  [4] &quot;coef_regression2_small&quot; &quot;large&quot;                  &quot;datasets::mtcars&quot;      </span></a>
<a class="sourceLine" id="cb279-4" data-line-number="4"><span class="co">#&gt;  [7] &quot;file report.Rmd&quot;        &quot;file report.md&quot;         &quot;random_rows&quot;           </span></a>
<a class="sourceLine" id="cb279-5" data-line-number="5"><span class="co">#&gt; [10] &quot;reg1&quot;                   &quot;reg2&quot;                   &quot;regression1_large&quot;     </span></a>
<a class="sourceLine" id="cb279-6" data-line-number="6"><span class="co">#&gt; [13] &quot;regression1_small&quot;      &quot;regression2_large&quot;      &quot;regression2_small&quot;     </span></a>
<a class="sourceLine" id="cb279-7" data-line-number="7"><span class="co">#&gt; [16] &quot;report&quot;                 &quot;simulate&quot;               &quot;small&quot;                 </span></a>
<a class="sourceLine" id="cb279-8" data-line-number="8"><span class="co">#&gt; [19] &quot;summ_regression1_large&quot; &quot;summ_regression1_small&quot; &quot;summ_regression2_large&quot;</span></a>
<a class="sourceLine" id="cb279-9" data-line-number="9"><span class="co">#&gt; [22] &quot;summ_regression2_small&quot;</span></a></code></pre></div>
</div>
<div id="outdated-targets-and-missing-dependencies" class="section level3">
<h3><span class="header-section-number">17.1.3</span> Outdated targets and missing dependencies</h3>
<p><code>missed()</code> shows any imports missing from your environment</p>
<div class="sourceCode" id="cb280"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb280-1" data-line-number="1"><span class="kw">missed</span>(config) <span class="co"># Nothing is missing right now.</span></a>
<a class="sourceLine" id="cb280-2" data-line-number="2"><span class="co">#&gt; character(0)</span></a></code></pre></div>
<p><code>outdated()</code> reports any targets that are outdated.</p>
<div class="sourceCode" id="cb281"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb281-1" data-line-number="1"><span class="kw">outdated</span>(config)</a>
<a class="sourceLine" id="cb281-2" data-line-number="2"><span class="co">#&gt;  [1] &quot;coef_regression1_large&quot; &quot;coef_regression1_small&quot; &quot;coef_regression2_large&quot;</span></a>
<a class="sourceLine" id="cb281-3" data-line-number="3"><span class="co">#&gt;  [4] &quot;coef_regression2_small&quot; &quot;large&quot;                  &quot;regression1_large&quot;     </span></a>
<a class="sourceLine" id="cb281-4" data-line-number="4"><span class="co">#&gt;  [7] &quot;regression1_small&quot;      &quot;regression2_large&quot;      &quot;regression2_small&quot;     </span></a>
<a class="sourceLine" id="cb281-5" data-line-number="5"><span class="co">#&gt; [10] &quot;report&quot;                 &quot;small&quot;                  &quot;summ_regression1_large&quot;</span></a>
<a class="sourceLine" id="cb281-6" data-line-number="6"><span class="co">#&gt; [13] &quot;summ_regression1_small&quot; &quot;summ_regression2_large&quot; &quot;summ_regression2_small&quot;</span></a>
<a class="sourceLine" id="cb281-7" data-line-number="7"></a>
<a class="sourceLine" id="cb281-8" data-line-number="8"><span class="kw">make</span>(my_plan)</a>
<a class="sourceLine" id="cb281-9" data-line-number="9"><span class="co">#&gt; target large</span></a>
<a class="sourceLine" id="cb281-10" data-line-number="10"><span class="co">#&gt; target small</span></a>
<a class="sourceLine" id="cb281-11" data-line-number="11"><span class="co">#&gt; target regression1_large</span></a>
<a class="sourceLine" id="cb281-12" data-line-number="12"><span class="co">#&gt; target regression2_large</span></a>
<a class="sourceLine" id="cb281-13" data-line-number="13"><span class="co">#&gt; target regression1_small</span></a>
<a class="sourceLine" id="cb281-14" data-line-number="14"><span class="co">#&gt; target regression2_small</span></a>
<a class="sourceLine" id="cb281-15" data-line-number="15"><span class="co">#&gt; target summ_regression1_large</span></a>
<a class="sourceLine" id="cb281-16" data-line-number="16"><span class="co">#&gt; target coef_regression1_large</span></a>
<a class="sourceLine" id="cb281-17" data-line-number="17"><span class="co">#&gt; target coef_regression2_large</span></a>
<a class="sourceLine" id="cb281-18" data-line-number="18"><span class="co">#&gt; target summ_regression2_large</span></a>
<a class="sourceLine" id="cb281-19" data-line-number="19"><span class="co">#&gt; target coef_regression1_small</span></a>
<a class="sourceLine" id="cb281-20" data-line-number="20"><span class="co">#&gt; target summ_regression1_small</span></a>
<a class="sourceLine" id="cb281-21" data-line-number="21"><span class="co">#&gt; target coef_regression2_small</span></a>
<a class="sourceLine" id="cb281-22" data-line-number="22"><span class="co">#&gt; target summ_regression2_small</span></a>
<a class="sourceLine" id="cb281-23" data-line-number="23"><span class="co">#&gt; target report</span></a>
<a class="sourceLine" id="cb281-24" data-line-number="24"></a>
<a class="sourceLine" id="cb281-25" data-line-number="25"><span class="kw">outdated</span>(config)</a>
<a class="sourceLine" id="cb281-26" data-line-number="26"><span class="co">#&gt; character(0)</span></a></code></pre></div>
</div>
<div id="but-why-are-my-targets-out-of-date" class="section level3">
<h3><span class="header-section-number">17.1.4</span> But <em>why</em> are my targets out of date?</h3>
<p><code>drake</code> has the option to produce a cache log with the fingerprint of every target and import.</p>
<div class="sourceCode" id="cb282"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb282-1" data-line-number="1"><span class="kw">drake_cache_log</span>()</a>
<a class="sourceLine" id="cb282-2" data-line-number="2"><span class="co">#&gt; # A tibble: 22 x 3</span></a>
<a class="sourceLine" id="cb282-3" data-line-number="3"><span class="co">#&gt;    hash             type   name                  </span></a>
<a class="sourceLine" id="cb282-4" data-line-number="4"><span class="co">#&gt;    &lt;chr&gt;            &lt;chr&gt;  &lt;chr&gt;                 </span></a>
<a class="sourceLine" id="cb282-5" data-line-number="5"><span class="co">#&gt;  1 ecb4739b594986b9 target coef_regression1_large</span></a>
<a class="sourceLine" id="cb282-6" data-line-number="6"><span class="co">#&gt;  2 599bea898e306775 target coef_regression1_small</span></a>
<a class="sourceLine" id="cb282-7" data-line-number="7"><span class="co">#&gt;  3 44bfee4c258a76d7 target coef_regression2_large</span></a>
<a class="sourceLine" id="cb282-8" data-line-number="8"><span class="co">#&gt;  4 b5502b9c62933484 target coef_regression2_small</span></a>
<a class="sourceLine" id="cb282-9" data-line-number="9"><span class="co">#&gt;  5 d87293dd4d012762 target large                 </span></a>
<a class="sourceLine" id="cb282-10" data-line-number="10"><span class="co">#&gt;  6 f4b89e63bc92af79 import datasets::mtcars      </span></a>
<a class="sourceLine" id="cb282-11" data-line-number="11"><span class="co">#&gt;  7 1a0869b7fe7a1e57 import file report.Rmd       </span></a>
<a class="sourceLine" id="cb282-12" data-line-number="12"><span class="co">#&gt;  8 6153acbb3f1070de target file report.md        </span></a>
<a class="sourceLine" id="cb282-13" data-line-number="13"><span class="co">#&gt;  9 db84c9f752635a13 import random_rows           </span></a>
<a class="sourceLine" id="cb282-14" data-line-number="14"><span class="co">#&gt; 10 21935c86f12692e2 import reg1                  </span></a>
<a class="sourceLine" id="cb282-15" data-line-number="15"><span class="co">#&gt; # … with 12 more rows</span></a></code></pre></div>
<div class="sourceCode" id="cb283"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb283-1" data-line-number="1"><span class="kw">filter</span>(<span class="kw">drake_cache_log</span>(), type <span class="op">==</span><span class="st"> &quot;import&quot;</span>)</a>
<a class="sourceLine" id="cb283-2" data-line-number="2"><span class="co">#&gt; # A tibble: 6 x 3</span></a>
<a class="sourceLine" id="cb283-3" data-line-number="3"><span class="co">#&gt;   hash             type   name            </span></a>
<a class="sourceLine" id="cb283-4" data-line-number="4"><span class="co">#&gt;   &lt;chr&gt;            &lt;chr&gt;  &lt;chr&gt;           </span></a>
<a class="sourceLine" id="cb283-5" data-line-number="5"><span class="co">#&gt; 1 f4b89e63bc92af79 import datasets::mtcars</span></a>
<a class="sourceLine" id="cb283-6" data-line-number="6"><span class="co">#&gt; 2 1a0869b7fe7a1e57 import file report.Rmd </span></a>
<a class="sourceLine" id="cb283-7" data-line-number="7"><span class="co">#&gt; 3 db84c9f752635a13 import random_rows     </span></a>
<a class="sourceLine" id="cb283-8" data-line-number="8"><span class="co">#&gt; 4 21935c86f12692e2 import reg1            </span></a>
<a class="sourceLine" id="cb283-9" data-line-number="9"><span class="co">#&gt; 5 69ade4b78f15a3f9 import reg2            </span></a>
<a class="sourceLine" id="cb283-10" data-line-number="10"><span class="co">#&gt; 6 f4d57e5ba38b744b import simulate</span></a></code></pre></div>
<p>We highly recommend that you automatically produce a cache log file on every <code>make()</code> and put it under <a href="https://github.com">version control</a> with the rest of your project.</p>
<div class="sourceCode" id="cb284"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb284-1" data-line-number="1"><span class="kw">make</span>(my_plan, <span class="dt">cache_log_file =</span> <span class="st">&quot;cache_log.csv&quot;</span>)</a>
<a class="sourceLine" id="cb284-2" data-line-number="2"><span class="co">#&gt; All targets are already up to date.</span></a></code></pre></div>
<p>Suppose we go back and add input checking to one of our functions.</p>
<div class="sourceCode" id="cb285"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb285-1" data-line-number="1"><span class="kw">print</span>(random_rows)</a>
<a class="sourceLine" id="cb285-2" data-line-number="2"><span class="co">#&gt; function (data, n) </span></a>
<a class="sourceLine" id="cb285-3" data-line-number="3"><span class="co">#&gt; {</span></a>
<a class="sourceLine" id="cb285-4" data-line-number="4"><span class="co">#&gt;     data[sample.int(n = nrow(data), size = n, replace = TRUE), </span></a>
<a class="sourceLine" id="cb285-5" data-line-number="5"><span class="co">#&gt;         ]</span></a>
<a class="sourceLine" id="cb285-6" data-line-number="6"><span class="co">#&gt; }</span></a>
<a class="sourceLine" id="cb285-7" data-line-number="7"><span class="co">#&gt; &lt;bytecode: 0x13bb7e18&gt;</span></a>
<a class="sourceLine" id="cb285-8" data-line-number="8"></a>
<a class="sourceLine" id="cb285-9" data-line-number="9">random_rows &lt;-<span class="st"> </span><span class="cf">function</span>(data, n){</a>
<a class="sourceLine" id="cb285-10" data-line-number="10">  <span class="kw">stopifnot</span>(n <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb285-11" data-line-number="11">  data[<span class="kw">sample.int</span>(<span class="dt">n =</span> <span class="kw">nrow</span>(data), <span class="dt">size =</span> n, <span class="dt">replace =</span> <span class="ot">TRUE</span>), ]</a>
<a class="sourceLine" id="cb285-12" data-line-number="12">}</a></code></pre></div>
<p>Then, we forget to run <code>make()</code> again, and we leave the the project for several months. When we come back, all our targets are suddenly out of date.</p>
<div class="sourceCode" id="cb286"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb286-1" data-line-number="1"><span class="kw">outdated</span>(config)</a>
<a class="sourceLine" id="cb286-2" data-line-number="2"><span class="co">#&gt;  [1] &quot;coef_regression1_large&quot; &quot;coef_regression1_small&quot; &quot;coef_regression2_large&quot;</span></a>
<a class="sourceLine" id="cb286-3" data-line-number="3"><span class="co">#&gt;  [4] &quot;coef_regression2_small&quot; &quot;large&quot;                  &quot;regression1_large&quot;     </span></a>
<a class="sourceLine" id="cb286-4" data-line-number="4"><span class="co">#&gt;  [7] &quot;regression1_small&quot;      &quot;regression2_large&quot;      &quot;regression2_small&quot;     </span></a>
<a class="sourceLine" id="cb286-5" data-line-number="5"><span class="co">#&gt; [10] &quot;report&quot;                 &quot;small&quot;                  &quot;summ_regression1_large&quot;</span></a>
<a class="sourceLine" id="cb286-6" data-line-number="6"><span class="co">#&gt; [13] &quot;summ_regression1_small&quot; &quot;summ_regression2_large&quot; &quot;summ_regression2_small&quot;</span></a></code></pre></div>
<p>At first, we may not know why all our targets are outdated. But we can generate another cache log and check any hashes that changed. Our call to <code>outdated()</code> already re-cached the imports, so any changed imports will show up in the new cache log.</p>
<div class="sourceCode" id="cb287"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb287-1" data-line-number="1"><span class="kw">read_csv</span>(<span class="st">&quot;cache_log.csv&quot;</span>, <span class="dt">col_types =</span> <span class="kw">cols</span>()) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb287-2" data-line-number="2"><span class="st">  </span><span class="kw">left_join</span>(<span class="kw">drake_cache_log</span>(), <span class="dt">by =</span> <span class="st">&quot;name&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb287-3" data-line-number="3"><span class="st">  </span><span class="kw">filter</span>(hash.x <span class="op">!=</span><span class="st"> </span>hash.y) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb287-4" data-line-number="4"><span class="st">  </span><span class="kw">select</span>(name, hash.x, hash.y, <span class="op">-</span>type.x, <span class="op">-</span>type.y)</a>
<a class="sourceLine" id="cb287-5" data-line-number="5"><span class="co">#&gt; # A tibble: 2 x 3</span></a>
<a class="sourceLine" id="cb287-6" data-line-number="6"><span class="co">#&gt;   name        hash.x           hash.y          </span></a>
<a class="sourceLine" id="cb287-7" data-line-number="7"><span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt;            &lt;chr&gt;           </span></a>
<a class="sourceLine" id="cb287-8" data-line-number="8"><span class="co">#&gt; 1 random_rows db84c9f752635a13 089a5c1023c1c51a</span></a>
<a class="sourceLine" id="cb287-9" data-line-number="9"><span class="co">#&gt; 2 simulate    f4d57e5ba38b744b 739a28336ceb4da2</span></a></code></pre></div>
<p>Now, we see that <code>random_rows()</code> has changed since last time, and we have a new dependency <code>stopifnot()</code>. <code>simulate()</code> shows up in the changes too because <code>random_rows()</code> is nested in the body of <code>simulate()</code>. If we revert <code>random_rows()</code> to its original state, all our targets are up to date again.</p>
<div class="sourceCode" id="cb288"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb288-1" data-line-number="1">random_rows &lt;-<span class="st"> </span><span class="cf">function</span>(data, n){</a>
<a class="sourceLine" id="cb288-2" data-line-number="2">  data[<span class="kw">sample.int</span>(<span class="dt">n =</span> <span class="kw">nrow</span>(data), <span class="dt">size =</span> n, <span class="dt">replace =</span> <span class="ot">TRUE</span>), ]</a>
<a class="sourceLine" id="cb288-3" data-line-number="3">}</a>
<a class="sourceLine" id="cb288-4" data-line-number="4"></a>
<a class="sourceLine" id="cb288-5" data-line-number="5"><span class="kw">print</span>(<span class="kw">outdated</span>(config))</a>
<a class="sourceLine" id="cb288-6" data-line-number="6"><span class="co">#&gt; character(0)</span></a>
<a class="sourceLine" id="cb288-7" data-line-number="7"></a>
<a class="sourceLine" id="cb288-8" data-line-number="8"><span class="kw">read_csv</span>(<span class="st">&quot;cache_log.csv&quot;</span>, <span class="dt">col_types =</span> <span class="kw">cols</span>()) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb288-9" data-line-number="9"><span class="st">  </span><span class="kw">left_join</span>(<span class="kw">drake_cache_log</span>(), <span class="dt">by =</span> <span class="st">&quot;name&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb288-10" data-line-number="10"><span class="st">  </span><span class="kw">filter</span>(hash.x <span class="op">!=</span><span class="st"> </span>hash.y) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb288-11" data-line-number="11"><span class="st">  </span><span class="kw">select</span>(name, hash.x, hash.y, <span class="op">-</span>type.x, <span class="op">-</span>type.y)</a>
<a class="sourceLine" id="cb288-12" data-line-number="12"><span class="co">#&gt; # A tibble: 0 x 3</span></a>
<a class="sourceLine" id="cb288-13" data-line-number="13"><span class="co">#&gt; # … with 3 variables: name &lt;chr&gt;, hash.x &lt;chr&gt;, hash.y &lt;chr&gt;</span></a></code></pre></div>
</div>
</div>
<div id="diagnose-failures." class="section level2">
<h2><span class="header-section-number">17.2</span> Diagnose failures.</h2>
<p><code>drake</code> records diagnostic metadata on all your targets, including the latest errors, warnings, messages, and other bits of context.</p>
<div class="sourceCode" id="cb289"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb289-1" data-line-number="1">f &lt;-<span class="st"> </span><span class="cf">function</span>(x){</a>
<a class="sourceLine" id="cb289-2" data-line-number="2">  <span class="cf">if</span> (x <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span>){</a>
<a class="sourceLine" id="cb289-3" data-line-number="3">    <span class="kw">stop</span>(<span class="st">&quot;`x` cannot be negative.&quot;</span>)</a>
<a class="sourceLine" id="cb289-4" data-line-number="4">  }</a>
<a class="sourceLine" id="cb289-5" data-line-number="5">  x</a>
<a class="sourceLine" id="cb289-6" data-line-number="6">}</a>
<a class="sourceLine" id="cb289-7" data-line-number="7">bad_plan &lt;-<span class="st"> </span><span class="kw">drake_plan</span>(</a>
<a class="sourceLine" id="cb289-8" data-line-number="8">  <span class="dt">a =</span> <span class="dv">12</span>,</a>
<a class="sourceLine" id="cb289-9" data-line-number="9">  <span class="dt">b =</span> <span class="op">-</span>a,</a>
<a class="sourceLine" id="cb289-10" data-line-number="10">  <span class="dt">my_target =</span> <span class="kw">f</span>(b)</a>
<a class="sourceLine" id="cb289-11" data-line-number="11">)</a>
<a class="sourceLine" id="cb289-12" data-line-number="12"></a>
<a class="sourceLine" id="cb289-13" data-line-number="13">bad_plan</a>
<a class="sourceLine" id="cb289-14" data-line-number="14"><span class="co">#&gt; # A tibble: 3 x 2</span></a>
<a class="sourceLine" id="cb289-15" data-line-number="15"><span class="co">#&gt;   target    command</span></a>
<a class="sourceLine" id="cb289-16" data-line-number="16"><span class="co">#&gt;   &lt;chr&gt;     &lt;expr&gt; </span></a>
<a class="sourceLine" id="cb289-17" data-line-number="17"><span class="co">#&gt; 1 a         12     </span></a>
<a class="sourceLine" id="cb289-18" data-line-number="18"><span class="co">#&gt; 2 b         -a     </span></a>
<a class="sourceLine" id="cb289-19" data-line-number="19"><span class="co">#&gt; 3 my_target f(b)</span></a>
<a class="sourceLine" id="cb289-20" data-line-number="20"></a>
<a class="sourceLine" id="cb289-21" data-line-number="21">withr<span class="op">::</span><span class="kw">with_message_sink</span>(</a>
<a class="sourceLine" id="cb289-22" data-line-number="22">  <span class="dt">new =</span> <span class="kw">stdout</span>(),</a>
<a class="sourceLine" id="cb289-23" data-line-number="23">  <span class="kw">make</span>(bad_plan)</a>
<a class="sourceLine" id="cb289-24" data-line-number="24">)</a>
<a class="sourceLine" id="cb289-25" data-line-number="25"><span class="co">#&gt; target a</span></a>
<a class="sourceLine" id="cb289-26" data-line-number="26"><span class="co">#&gt; target b</span></a>
<a class="sourceLine" id="cb289-27" data-line-number="27"><span class="co">#&gt; target my_target</span></a>
<a class="sourceLine" id="cb289-28" data-line-number="28"><span class="co">#&gt; fail my_target</span></a>
<a class="sourceLine" id="cb289-29" data-line-number="29"><span class="co">#&gt; Error: Target `my_target` failed. Call `diagnose(my_target)` for details. Error message:</span></a>
<a class="sourceLine" id="cb289-30" data-line-number="30"><span class="co">#&gt;   `x` cannot be negative.</span></a>
<a class="sourceLine" id="cb289-31" data-line-number="31"></a>
<a class="sourceLine" id="cb289-32" data-line-number="32"><span class="kw">failed</span>(<span class="dt">verbose =</span> 0L) <span class="co"># from the last make() only</span></a>
<a class="sourceLine" id="cb289-33" data-line-number="33"><span class="co">#&gt; [1] &quot;my_target&quot;</span></a>
<a class="sourceLine" id="cb289-34" data-line-number="34"></a>
<a class="sourceLine" id="cb289-35" data-line-number="35"><span class="co"># See also warnings and messages.</span></a>
<a class="sourceLine" id="cb289-36" data-line-number="36">error &lt;-<span class="st"> </span><span class="kw">diagnose</span>(my_target, <span class="dt">verbose =</span> 0L)<span class="op">$</span>error</a>
<a class="sourceLine" id="cb289-37" data-line-number="37"></a>
<a class="sourceLine" id="cb289-38" data-line-number="38">error<span class="op">$</span>message</a>
<a class="sourceLine" id="cb289-39" data-line-number="39"><span class="co">#&gt; [1] &quot;`x` cannot be negative.&quot;</span></a>
<a class="sourceLine" id="cb289-40" data-line-number="40"></a>
<a class="sourceLine" id="cb289-41" data-line-number="41">error<span class="op">$</span>call</a>
<a class="sourceLine" id="cb289-42" data-line-number="42"><span class="co">#&gt; f(b)</span></a>
<a class="sourceLine" id="cb289-43" data-line-number="43"></a>
<a class="sourceLine" id="cb289-44" data-line-number="44"><span class="kw">str</span>(error<span class="op">$</span>calls) <span class="co"># View the traceback.</span></a>
<a class="sourceLine" id="cb289-45" data-line-number="45"><span class="co">#&gt; List of 8</span></a>
<a class="sourceLine" id="cb289-46" data-line-number="46"><span class="co">#&gt;  $ : language local(f(b))</span></a>
<a class="sourceLine" id="cb289-47" data-line-number="47"><span class="co">#&gt;  $ : language eval.parent(substitute(eval(quote(expr), envir)))</span></a>
<a class="sourceLine" id="cb289-48" data-line-number="48"><span class="co">#&gt;  $ : language eval(expr, p)</span></a>
<a class="sourceLine" id="cb289-49" data-line-number="49"><span class="co">#&gt;  $ : language eval(expr, p)</span></a>
<a class="sourceLine" id="cb289-50" data-line-number="50"><span class="co">#&gt;  $ : language eval(quote(f(b)), new.env())</span></a>
<a class="sourceLine" id="cb289-51" data-line-number="51"><span class="co">#&gt;  $ : language eval(quote(f(b)), new.env())</span></a>
<a class="sourceLine" id="cb289-52" data-line-number="52"><span class="co">#&gt;  $ : language f(b)</span></a>
<a class="sourceLine" id="cb289-53" data-line-number="53"><span class="co">#&gt;  $ : language stop(&quot;`x` cannot be negative.&quot;)</span></a>
<a class="sourceLine" id="cb289-54" data-line-number="54"><span class="co">#&gt;   ..- attr(*, &quot;srcref&quot;)= &#39;srcref&#39; int [1:8] 3 5 3 35 5 35 3 3</span></a>
<a class="sourceLine" id="cb289-55" data-line-number="55"><span class="co">#&gt;   .. ..- attr(*, &quot;srcfile&quot;)=Classes &#39;srcfilecopy&#39;, &#39;srcfile&#39; &lt;environment: 0x10e55850&gt;</span></a></code></pre></div>
<p>To figure out what went wrong, you could try to build the failed target interactively. To do that, simply call <code>drake_build()</code> or <code>drake_debug()</code>. These functions first call <code>loadd(deps = TRUE)</code> to load any missing dependencies (see the <code>replace</code> argument here) and then build your target. <code>drake_build()</code> simply runs the command, and <code>drake_debug()</code> runs the command in debug mode using <code>debugonce()</code>.</p>
<div class="sourceCode" id="cb290"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb290-1" data-line-number="1"><span class="co"># Pretend we just opened a new R session.</span></a>
<a class="sourceLine" id="cb290-2" data-line-number="2"><span class="kw">library</span>(drake)</a>
<a class="sourceLine" id="cb290-3" data-line-number="3"></a>
<a class="sourceLine" id="cb290-4" data-line-number="4"><span class="co"># Unloads target `b`.</span></a>
<a class="sourceLine" id="cb290-5" data-line-number="5">config &lt;-<span class="st"> </span><span class="kw">drake_config</span>(<span class="dt">plan =</span> bad_plan)</a>
<a class="sourceLine" id="cb290-6" data-line-number="6"></a>
<a class="sourceLine" id="cb290-7" data-line-number="7"><span class="co"># my_target depends on b.</span></a>
<a class="sourceLine" id="cb290-8" data-line-number="8"><span class="st">&quot;b&quot;</span> <span class="op">%in%</span><span class="st"> </span><span class="kw">ls</span>()</a>
<a class="sourceLine" id="cb290-9" data-line-number="9"><span class="co">#&gt; [1] FALSE</span></a>
<a class="sourceLine" id="cb290-10" data-line-number="10"></a>
<a class="sourceLine" id="cb290-11" data-line-number="11"><span class="co"># Try to build my_target until the error is fixed.</span></a>
<a class="sourceLine" id="cb290-12" data-line-number="12"><span class="co"># Skip all that pesky work checking dependencies.</span></a>
<a class="sourceLine" id="cb290-13" data-line-number="13"><span class="kw">drake_build</span>(my_target, <span class="dt">config =</span> config) <span class="co"># See also drake_debug().</span></a>
<a class="sourceLine" id="cb290-14" data-line-number="14"><span class="co">#&gt; target my_target</span></a>
<a class="sourceLine" id="cb290-15" data-line-number="15"><span class="co">#&gt; fail my_target</span></a>
<a class="sourceLine" id="cb290-16" data-line-number="16"><span class="co">#&gt; Error: Target `my_target` failed. Call `diagnose(my_target)` for details. Error message:</span></a>
<a class="sourceLine" id="cb290-17" data-line-number="17"><span class="co">#&gt;   `x` cannot be negative.</span></a>
<a class="sourceLine" id="cb290-18" data-line-number="18"></a>
<a class="sourceLine" id="cb290-19" data-line-number="19"><span class="co"># The target failed, but the dependency was loaded.</span></a>
<a class="sourceLine" id="cb290-20" data-line-number="20"><span class="st">&quot;b&quot;</span> <span class="op">%in%</span><span class="st"> </span><span class="kw">ls</span>()</a>
<a class="sourceLine" id="cb290-21" data-line-number="21"><span class="co">#&gt; [1] FALSE</span></a>
<a class="sourceLine" id="cb290-22" data-line-number="22"></a>
<a class="sourceLine" id="cb290-23" data-line-number="23"><span class="co"># What was `b` again?</span></a>
<a class="sourceLine" id="cb290-24" data-line-number="24">b</a>
<a class="sourceLine" id="cb290-25" data-line-number="25"><span class="co">#&gt; Error in eval(expr, envir, enclos): object &#39;b&#39; not found</span></a>
<a class="sourceLine" id="cb290-26" data-line-number="26"></a>
<a class="sourceLine" id="cb290-27" data-line-number="27"><span class="co"># How was `b` used?</span></a>
<a class="sourceLine" id="cb290-28" data-line-number="28"><span class="kw">diagnose</span>(my_target)<span class="op">$</span>message</a>
<a class="sourceLine" id="cb290-29" data-line-number="29"><span class="co">#&gt; NULL</span></a>
<a class="sourceLine" id="cb290-30" data-line-number="30"></a>
<a class="sourceLine" id="cb290-31" data-line-number="31"><span class="kw">diagnose</span>(my_target)<span class="op">$</span>call</a>
<a class="sourceLine" id="cb290-32" data-line-number="32"><span class="co">#&gt; NULL</span></a>
<a class="sourceLine" id="cb290-33" data-line-number="33"></a>
<a class="sourceLine" id="cb290-34" data-line-number="34">f</a>
<a class="sourceLine" id="cb290-35" data-line-number="35"><span class="co">#&gt; function(x){</span></a>
<a class="sourceLine" id="cb290-36" data-line-number="36"><span class="co">#&gt;   if (x &lt; 0){</span></a>
<a class="sourceLine" id="cb290-37" data-line-number="37"><span class="co">#&gt;     stop(&quot;`x` cannot be negative.&quot;)</span></a>
<a class="sourceLine" id="cb290-38" data-line-number="38"><span class="co">#&gt;   }</span></a>
<a class="sourceLine" id="cb290-39" data-line-number="39"><span class="co">#&gt;   x</span></a>
<a class="sourceLine" id="cb290-40" data-line-number="40"><span class="co">#&gt; }</span></a>
<a class="sourceLine" id="cb290-41" data-line-number="41"><span class="co">#&gt; &lt;bytecode: 0xb9fea58&gt;</span></a>
<a class="sourceLine" id="cb290-42" data-line-number="42"></a>
<a class="sourceLine" id="cb290-43" data-line-number="43"><span class="co"># Aha! The error was in f(). Let&#39;s fix it and try again.</span></a>
<a class="sourceLine" id="cb290-44" data-line-number="44">f &lt;-<span class="st"> </span><span class="cf">function</span>(x){</a>
<a class="sourceLine" id="cb290-45" data-line-number="45">  x &lt;-<span class="st"> </span><span class="kw">abs</span>(x)</a>
<a class="sourceLine" id="cb290-46" data-line-number="46">  <span class="cf">if</span> (x <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span>){</a>
<a class="sourceLine" id="cb290-47" data-line-number="47">    <span class="kw">stop</span>(<span class="st">&quot;`x` cannot be negative.&quot;</span>)</a>
<a class="sourceLine" id="cb290-48" data-line-number="48">  }</a>
<a class="sourceLine" id="cb290-49" data-line-number="49">  x</a>
<a class="sourceLine" id="cb290-50" data-line-number="50">}</a>
<a class="sourceLine" id="cb290-51" data-line-number="51"></a>
<a class="sourceLine" id="cb290-52" data-line-number="52"><span class="co"># Now it works!</span></a>
<a class="sourceLine" id="cb290-53" data-line-number="53"><span class="co"># Since you called make() previously, `config` is read from the cache</span></a>
<a class="sourceLine" id="cb290-54" data-line-number="54"><span class="co"># if you do not supply it.</span></a>
<a class="sourceLine" id="cb290-55" data-line-number="55"><span class="kw">drake_build</span>(my_target, config) <span class="co"># See also drake_debug().</span></a>
<a class="sourceLine" id="cb290-56" data-line-number="56"><span class="co">#&gt; target my_target</span></a>
<a class="sourceLine" id="cb290-57" data-line-number="57"></a>
<a class="sourceLine" id="cb290-58" data-line-number="58"><span class="kw">readd</span>(my_target)</a>
<a class="sourceLine" id="cb290-59" data-line-number="59"><span class="co">#&gt; [1] 12</span></a></code></pre></div>
</div>
<div id="timeouts-and-retries" class="section level2">
<h2><span class="header-section-number">17.3</span> Timeouts and retries</h2>
<p>See the <code>elapsed</code>, <code>cpu</code>, and <code>retries</code> argument to <code>make()</code>.</p>
<div class="sourceCode" id="cb291"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb291-1" data-line-number="1"><span class="kw">clean</span>(<span class="dt">verbose =</span> 0L)</a>
<a class="sourceLine" id="cb291-2" data-line-number="2"><span class="co">#&gt; Warning: Argument `verbose` is deprecated some minor drake utility functions.</span></a>
<a class="sourceLine" id="cb291-3" data-line-number="3">f &lt;-<span class="st"> </span><span class="cf">function</span>(...){</a>
<a class="sourceLine" id="cb291-4" data-line-number="4">  <span class="kw">Sys.sleep</span>(<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb291-5" data-line-number="5">}</a>
<a class="sourceLine" id="cb291-6" data-line-number="6">debug_plan &lt;-<span class="st"> </span><span class="kw">drake_plan</span>(<span class="dt">x =</span> <span class="dv">1</span>, <span class="dt">y =</span> <span class="kw">f</span>(x))</a>
<a class="sourceLine" id="cb291-7" data-line-number="7">debug_plan</a>
<a class="sourceLine" id="cb291-8" data-line-number="8"><span class="co">#&gt; # A tibble: 2 x 2</span></a>
<a class="sourceLine" id="cb291-9" data-line-number="9"><span class="co">#&gt;   target command</span></a>
<a class="sourceLine" id="cb291-10" data-line-number="10"><span class="co">#&gt;   &lt;chr&gt;  &lt;expr&gt; </span></a>
<a class="sourceLine" id="cb291-11" data-line-number="11"><span class="co">#&gt; 1 x      1      </span></a>
<a class="sourceLine" id="cb291-12" data-line-number="12"><span class="co">#&gt; 2 y      f(x)</span></a>
<a class="sourceLine" id="cb291-13" data-line-number="13"></a>
<a class="sourceLine" id="cb291-14" data-line-number="14">withr<span class="op">::</span><span class="kw">with_message_sink</span>(</a>
<a class="sourceLine" id="cb291-15" data-line-number="15">  <span class="kw">stdout</span>(),</a>
<a class="sourceLine" id="cb291-16" data-line-number="16">  <span class="kw">make</span>(debug_plan, <span class="dt">elapsed =</span> <span class="fl">1e-3</span>, <span class="dt">retries =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb291-17" data-line-number="17">)</a>
<a class="sourceLine" id="cb291-18" data-line-number="18"><span class="co">#&gt; target x</span></a>
<a class="sourceLine" id="cb291-19" data-line-number="19"><span class="co">#&gt; target y</span></a>
<a class="sourceLine" id="cb291-20" data-line-number="20"><span class="co">#&gt; retry y 1 of 2</span></a></code></pre></div>
<p>To tailor these settings to each individual target, create new <code>elapsed</code>, <code>cpu</code>, or <code>retries</code> columns in your <code>drake</code> plan. These columns override the analogous arguments to <code>make()</code>.</p>
<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb292-1" data-line-number="1"><span class="kw">clean</span>(<span class="dt">verbose =</span> 0L)</a>
<a class="sourceLine" id="cb292-2" data-line-number="2">debug_plan<span class="op">$</span>elapsed &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">1e-3</span>, <span class="fl">2e-3</span>)</a>
<a class="sourceLine" id="cb292-3" data-line-number="3">debug_plan<span class="op">$</span>retries &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">2</span></a>
<a class="sourceLine" id="cb292-4" data-line-number="4"></a>
<a class="sourceLine" id="cb292-5" data-line-number="5">debug_plan</a>
<a class="sourceLine" id="cb292-6" data-line-number="6"><span class="co">#&gt; # A tibble: 2 x 4</span></a>
<a class="sourceLine" id="cb292-7" data-line-number="7"><span class="co">#&gt;   target command elapsed retries</span></a>
<a class="sourceLine" id="cb292-8" data-line-number="8"><span class="co">#&gt;   &lt;chr&gt;  &lt;expr&gt;    &lt;dbl&gt;   &lt;int&gt;</span></a>
<a class="sourceLine" id="cb292-9" data-line-number="9"><span class="co">#&gt; 1 x      1         0.001       1</span></a>
<a class="sourceLine" id="cb292-10" data-line-number="10"><span class="co">#&gt; 2 y      f(x)      0.002       2</span></a>
<a class="sourceLine" id="cb292-11" data-line-number="11"></a>
<a class="sourceLine" id="cb292-12" data-line-number="12">withr<span class="op">::</span><span class="kw">with_message_sink</span>(</a>
<a class="sourceLine" id="cb292-13" data-line-number="13">  <span class="dt">new =</span> <span class="kw">stdout</span>(),</a>
<a class="sourceLine" id="cb292-14" data-line-number="14">  <span class="kw">make</span>(debug_plan, <span class="dt">elapsed =</span> <span class="ot">Inf</span>, <span class="dt">retries =</span> <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb292-15" data-line-number="15">)</a>
<a class="sourceLine" id="cb292-16" data-line-number="16"><span class="co">#&gt; target x</span></a>
<a class="sourceLine" id="cb292-17" data-line-number="17"><span class="co">#&gt; target y</span></a>
<a class="sourceLine" id="cb292-18" data-line-number="18"><span class="co">#&gt; retry y 1 of 2</span></a>
<a class="sourceLine" id="cb292-19" data-line-number="19"><span class="co">#&gt; retry y 2 of 2</span></a>
<a class="sourceLine" id="cb292-20" data-line-number="20"><span class="co">#&gt; fail y</span></a>
<a class="sourceLine" id="cb292-21" data-line-number="21"><span class="co">#&gt; Error: Target `y` failed. Call `diagnose(y)` for details. Error message:</span></a>
<a class="sourceLine" id="cb292-22" data-line-number="22"><span class="co">#&gt;   reached elapsed time limit</span></a></code></pre></div>
</div>
<div id="more-help" class="section level2">
<h2><span class="header-section-number">17.4</span> More help</h2>
<p>Please also see the <a href="caution.html#caution">compendium of cautionary notes</a>, which addresses <code>drake</code>’s known edge cases, pitfalls, and weaknesses that may or may not be fixed in future releases. For the most up-to-date information on unhandled edge cases, please visit the <a href="https://github.com/ropensci/drake/issues">issue tracker</a>, where you can submit your own bug reports as well. Be sure to search the closed issues too, especially if you are not using the most up-to-date development version.</p>

</div>
</div>
<div style = "background: #1C356D; color: white; padding: 10px 10px 10px 25px; font-size: 1em; width: 100%;">
  Copyright Eli Lilly and Company
</div>
            </section>

          </div>
        </div>
      </div>
<a href="visuals.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="triggers.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ropensci-books/drake/edit/master/debugging.Rmd",
"text": "Edit this chapter"
},
"history": {
"link": "https://github.com/ropensci-books/drake/commits/master/debugging.Rmd",
"text": "Chapter edit history"
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
